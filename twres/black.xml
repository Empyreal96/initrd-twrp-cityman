<?xml version="1.0"?>
<recovery>
	<pages>
		<page name="main">
			<action>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>
		</page>

		<page name="main2">
			<template name="body"/>

			<template name="ab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="0" y="%ab_y%"/>
				<image resource="actionbar_logo"/>
				<action function="page">about</action>
			</button>

			<button>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_theme" highlightresource="actionbar_theme_hl"/>
				<action function="set">tw_filecheck=%tw_theme_path%/ui.zip</action>
				<action function="set">tw_back=main</action>
				<action function="page">themecheck</action>
			</button>

			<button>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_settings" highlightresource="actionbar_settings_hl"/>
				<action function="page">settings</action>
			</button>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row1_y%"/>
				<image resource="mb_install"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row1_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row1_y%"/>
				<image resource="mb_install_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row1_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row1_text_y%"/>
				<text>{@install_btn=Install}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row1_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="queueclear"/>
					<action function="page">install</action>
				</actions>
			</button>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row2_y%"/>
				<image resource="mb_wipe"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row2_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row2_y%"/>
				<image resource="mb_wipe_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row2_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row2_text_y%"/>
				<text>{@wipe_btn=Wipe}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row2_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">wipe</action>
			</button>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_backup"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row3_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_backup_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row3_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row3_text_y%"/>
				<text>{@backup_btn=Backup}</text>
			</text>

			<button style="mb_btn">
				<condition var1="auto_generate" var2="0"/>
				<placement x="%col1_x%" y="%mb_row3_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_backup_name={@auto_generate=(Auto Generate)}</action>
					<action function="page">backup</action>
				</actions>
			</button>

			<button style="mb_btn">
				<condition var1="auto_generate" var2="1"/>
				<placement x="%col1_x%" y="%mb_row3_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="generatebackupname"/>
					<action function="page">backup</action>
				</actions>
			</button>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_restore"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row4_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_restore_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row4_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row4_text_y%"/>
				<text>{@restore_btn=Restore}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row4_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">restore</action>
			</button>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_mount"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row5_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_mount_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row5_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row5_text_y%"/>
				<text>{@mount_btn=Mount}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row5_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">mount</action>
			</button>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row6_y%"/>
				<image resource="mb_filemanager"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row6_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row6_y%"/>
				<image resource="mb_filemanager_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row6_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row6_text_y%"/>
				<text>{@file_manager_btn=File Manager}</text>
			</text>

			<button style="mb_btn">
				<condition var1="aromafm" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%mb_row6_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button style="mb_btn">
				<condition var1="aromafm" var2="1"/>
				<placement x="%col1_x%" y="%mb_row6_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="queueclear"/>
					<action function="set">tw_signed_zip_verify_temp=%tw_signed_zip_verify%</action>
					<action function="set">tw_signed_zip_verify=0</action>
					<action function="set">tw_screen_timeout_temp=%tw_screen_timeout_secs%</action>
					<action function="set">tw_screen_timeout_secs=0</action>
					<action function="set">tw_aroma={@tw_aroma_btn=AROMA Filemanager}</action>
					<action function="set">tw_filename=%tw_theme_path%/aromafm/aromafm.zip</action>
					<action function="queuezip"/>
					<action function="page">flash_aromafm_confirm</action>
				</actions>
			</button>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row7_y%"/>
				<image resource="mb_advanced"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row7_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row7_y%"/>
				<image resource="mb_advanced_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row7_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row7_text_y%"/>
				<text>{@advanced_btn=Advanced}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row7_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">advanced</action>
			</button>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row8_y%"/>
				<image resource="mb_restart"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row8_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row8_y%"/>
				<image resource="mb_restart_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row8_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row8_text_y%"/>
				<text>{@reboot_btn=Reboot}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row8_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">reboot</action>
			</button>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row2_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row3_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row4_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row5_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row6_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row7_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row8_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>
		</page>

		<page name="settings">
			<template name="body"/>

			<template name="ab_tab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@settings_hdr=Settings}</text>
			</text>

			<button>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_reset" highlightresource="actionbar_reset_hl"/>
				<action function="overlay">dialog_reset</action>
			</button>

			<image>
				<placement x="%tab4_col1_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_misc_a"/>
			</image>

			<button>
				<placement x="%tab4_col2_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_time"/>
				<action function="page">timezone</action>
			</button>

			<button>
				<placement x="%tab4_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_display"/>
				<action function="page">screen</action>
			</button>

			<button>
				<placement x="%tab4_col4_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_vibration"/>
				<action function="page">vibrate</action>
			</button>

			<fill color="%text_actionbar%">
				<placement x="0" y="%tab_indicator_y%" w="%tab4_width%" h="%tab_indicator_height%"/>
			</fill>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_1_y%"/>
				<text>{@settings_cptn=General}</text>
			</text>

			<listbox style="settingslist">
				<placement x="%col1_x%" y="%row2_2_y%" w="%listbox_w%" h="%listbox_settings_height%"/>
				<listitem name="{@zip_sig_chk=Zip signature verification}">
					<data variable="tw_signed_zip_verify"/>
				</listitem>
				<listitem name="{@install_reboot_chk=Reboot after installation is complete}">
					<data variable="tw_install_reboot"/>
				</listitem>
				<listitem name="{@use_rmrf_chk=Use rm -rf instead of formatting}">
					<data variable="tw_rm_rf"/>
				</listitem>
				<listitem name="{@disable_backup_space_chk=Disable free space check before backup}">
					<data variable="tw_disable_free_space"/>
				</listitem>
				<listitem name="{@skip_digest_backup_chk=Skip Digest generation during backup}">
					<data variable="tw_skip_digest_generate"/>
				</listitem>
				<listitem name="{@restore_enable_digest_chk=Enable Digest verification of backups}">
					<data variable="tw_skip_digest_check"/>
				</listitem>
				<listitem name="{@sha2_chk=Use SHA2 for hashing}">
					<condition var1="tw_no_sha2" var2="0"/>
					<data variable="tw_use_sha2"/>
				</listitem>
				<listitem name="{@reboot_install_app_prompt_settings=Prompt to install the TWRP app at reboot}">
					<data variable="tw_app_prompt"/>
				</listitem>
				<listitem name="{@simact_chk=Simulate actions for theme testing}">
					<data variable="tw_simulate_actions"/>
				</listitem>
				<listitem name="{@simfail_chk=Simulate failure for actions}">
					<condition var1="tw_simulate_actions" var2="1"/>
					<data variable="tw_simulate_fail"/>
				</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x%" y="%row6_3_y%" />
				<text>{@language_cptn=Language}</text>
			</text>

			<listbox>
				<placement x="%col1_x%" y="%row7_1_y%" w="%listbox_w%" h="%listbox_settings_lang_height%"/>
				<data name="tw_language"/>
			</listbox>

			<button>
				<condition var1="tw_language" op="modified"/>
				<placement x="%btn_float_x%" y="%row7_3a_y%"/>
				<image resource="btn_float_accept"/>
				<highlight color="%highlight_color%"/>
				<action function="setlanguage"></action>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="timezone">
			<template name="body"/>

			<template name="ab_tab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@settings_hdr=Settings}</text>
			</text>

			<button>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_reset" highlightresource="actionbar_reset_hl"/>
				<action function="overlay">dialog_reset</action>
			</button>

			<button>
				<placement x="%tab4_col1_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_misc"/>
				<action function="page">settings</action>
			</button>

			<image>
				<placement x="%tab4_col2_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_time_a"/>
			</image>

			<button>
				<placement x="%tab4_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_display"/>
				<action function="page">screen</action>
			</button>

			<button>
				<placement x="%tab4_col4_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_vibration"/>
				<action function="page">vibrate</action>
			</button>

			<fill color="%text_actionbar%">
				<placement x="%tab4_ind2_x%" y="%tab_indicator_y%" w="%tab4_width%" h="%tab_indicator_height%"/>
			</fill>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_1_y%"/>
				<text>{@sel_tz_list=Time Zone}</text>
			</text>

			<listbox>
				<placement x="%col1_x%" y="%row2_2_y%" w="%listbox_tz_width%" h="%listbox_tz_height%"/>
				<data name="tw_time_zone_guisel"/>
				<listitem name="{@utcm11=(UTC -11) Samoa, Midway Island}">BST11;BDT</listitem>
				<listitem name="{@utcm10=(UTC -10) Hawaii}">HST10;HDT</listitem>
				<listitem name="{@utcm9=(UTC -9) Alaska}">AST9;ADT</listitem>
				<listitem name="{@utcm8=(UTC -8) Pacific Time}">PST8;PDT,M3.2.0,M11.1.0</listitem>
				<listitem name="{@utcm7=(UTC -7) Mountain Time}">MST7;MDT,M3.2.0,M11.1.0</listitem>
				<listitem name="{@utcm6=(UTC -6) Central Time}">CST6;CDT,M3.2.0,M11.1.0</listitem>
				<listitem name="{@utcm5=(UTC -5) Eastern Time}">EST5;EDT,M3.2.0,M11.1.0</listitem>
				<listitem name="{@utcm4=(UTC -4) Atlantic Time}">AST4;ADT</listitem>
				<listitem name="{@utcm3=(UTC -3) Brazil, Buenos Aires}">GRNLNDST3;GRNLNDDT</listitem>
				<listitem name="{@utcm2=(UTC -2) Mid-Atlantic}">FALKST2;FALKDT</listitem>
				<listitem name="{@utcm1=(UTC -1) Azores, Cape Verde}">AZOREST1;AZOREDT</listitem>
				<listitem name="{@utc0=(UTC  0) London, Dublin, Lisbon}">GMT0;BST,M3.5.0,M10.5.0</listitem>
				<listitem name="{@utcp1=(UTC +1) Berlin, Brussels, Paris}">CET-1;CEST,M3.5.0,M10.5.0</listitem>
				<listitem name="{@utcp2=(UTC +2) Athens, Istanbul, South Africa}">WET-2;WET,M3.5.0,M10.5.0</listitem>
				<listitem name="{@utcp3=(UTC +3) Moscow, Baghdad}">SAUST-3;SAUDT</listitem>
				<listitem name="{@utcp4=(UTC +4) Abu Dhabi, Tbilisi, Muscat}">WST-4;WDT</listitem>
				<listitem name="{@utcp5=(UTC +5) Yekaterinburg, Islamabad}">PAKST-5;PAKDT</listitem>
				<listitem name="{@utcp6=(UTC +6) Almaty, Dhaka, Colombo}">TASHST-6;TASHDT</listitem>
				<listitem name="{@utcp7=(UTC +7) Bangkok, Hanoi, Jakarta}">THAIST-7;THAIDT</listitem>
				<listitem name="{@utcp8=(UTC +8) Beijing, Singapore, Hong Kong}">TAIST-8;TAIDT</listitem>
				<listitem name="{@utcp9=(UTC +9) Tokyo, Seoul, Yakutsk}">JST-9;JSTDT</listitem>
				<listitem name="{@utcp10=(UTC +10) Eastern Australia, Guam}">EET-10;EETDT</listitem>
				<listitem name="{@utcp11=(UTC +11) Vladivostok, Solomon Islands}">MET-11;METDT</listitem>
				<listitem name="{@utcp12=(UTC +12) Auckland, Wellington, Fiji}">NZST-12;NZDT</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x%" y="%row6_1a_y%"/>
				<text>{@options_cptn=Options}</text>
			</text>

			<checkbox style="checkbox_big">
				<placement x="%col1_x%" y="%row6_2a_y%"/>
				<text>{@use_dst_chk=Use daylight savings time (DST)}</text>
				<data variable="tw_time_zone_guidst"/>
			</checkbox>

			<checkbox style="checkbox_big">
				<placement x="%col1_x%" y="%row7_1_y%"/>
				<text>{@use24clock_chk=Use 24-hour clock}</text>
				<data variable="tw_military_time"/>
			</checkbox>

			<text style="caption">
				<placement x="%col1_x%" y="%row7_3a_y%"/>
				<text>{@tz_offset=Offset}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row8_1a_y%"/>
				<text>{@sel_tz_offset=Select Offset (usually 0): %tw_time_zone_guioffset%}</text>
			</text>

			<button>
				<placement x="%col1_x%" y="%row7_3a_y%" w="%content_w%" h="%mb_h%"/>
				<fill color="%transparent%"/>
				<action function="overlay">dialog_offset</action>
			</button>

			<button>
				<placement x="%btn_float_x%" y="%row7_3a_y%"/>
				<image resource="btn_float_accept"/>
				<highlight color="%highlight_color%"/>
				<action function="setguitimezone"/>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">settings</action>
			</action>
		</page>

		<page name="screen">
			<template name="body"/>

			<template name="ab_tab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@settings_hdr=Settings}</text>
			</text>

			<button>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_reset" highlightresource="actionbar_reset_hl"/>
				<action function="overlay">dialog_reset</action>
			</button>

			<button>
				<placement x="%tab4_col1_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_misc"/>
				<action function="page">settings</action>
			</button>

			<button>
				<placement x="%tab4_col2_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_time"/>
				<action function="page">timezone</action>
			</button>

			<image>
				<placement x="%tab4_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_display_a"/>
			</image>

			<button>
				<placement x="%tab4_col4_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_vibration"/>
				<action function="page">vibrate</action>
			</button>

			<fill color="%text_actionbar%">
				<placement x="%center_x%" y="%tab_indicator_y%" w="%tab4_width%" h="%tab_indicator_height%"/>
			</fill>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_1_y%"/>
				<text>{@settings_screen_cptn=Screen Settings}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_has_brightnesss_file" var2="1"/>
				<placement x="%col1_x%" y="%row2_2a_y%"/>
				<text>{@screen_bright_slider=Brightness: %tw_brightness_pct%%}</text>
			</text>

			<slidervalue>
				<condition var1="tw_has_brightnesss_file" var2="1"/>
				<placement x="%slider_x%" y="%row2_3_y%" w="%slidervalue_w%"/>
				<resource background="slider" handle="handle" handlehover="handle_h"/>
				<font resource="caption" color="%text%"/>
				<colors line="%text_dark%" slider="%accent%"/>
				<dimensions lineh="%slidervalue_lineh%" linepadding="%slidervalue_padding%" sliderw="%slidervalue_sliderw%" sliderh="%slidervalue_sliderh%"/>
				<data variable="tw_brightness_pct" min="10" max="100" showrange="0" showcurr="0" changeondrag="1"/>
				<actions>
					<action function="set">tw_brightness=%tw_brightness_max%</action>
					<action function="compute">tw_brightness*%tw_brightness_pct%</action>
					<action function="compute">tw_brightness/100</action>
					<!--action function="cmd">echo %tw_brightness% > &quot;%tw_brightness_file%&quot;</action-->
					<action function="setbrightness">%tw_brightness%</action>
				</actions>
			</slidervalue>

			<text style="text_body2">
				<condition var1="tw_screen_timeout_secs" op="=" var2="0"/>
				<condition var1="tw_no_screen_timeout" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>{@settings_screen_timeout_cptn=Timeout}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_screen_timeout_secs" op="!=" var2="0"/>
				<condition var1="tw_no_screen_timeout" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>{@settings_screen_timeout_cptn2=Timeout:} %tw_screen_timeout_secs% {@timeout_unit=seconds}</text>
			</text>

			<button>
				<condition var1="tw_screen_timeout_secs" op="=" var2="0"/>
				<condition var1="tw_no_screen_timeout" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%row4_2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@enable_timeout_chk=Enable screen timeout}</text>
				<image resource="checkbox_false"/>
				<action function="set">tw_screen_timeout_secs=60</action>
			</button>

			<button>
				<condition var1="tw_screen_timeout_secs" op="!=" var2="0"/>
				<condition var1="tw_no_screen_timeout" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%row4_2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@enable_timeout_chk=Enable screen timeout}</text>
				<image resource="checkbox_true"/>
				<action function="set">tw_screen_timeout_secs=0</action>
			</button>

			<slidervalue>
				<condition var1="tw_screen_timeout_secs" op="!=" var2="0"/>
				<condition var1="tw_no_screen_timeout" op="!=" var2="1"/>
				<placement x="%slider_x%" y="%row4_3_y%" w="%slidervalue_w%"/>
				<resource background="slider" handle="handle" handlehover="handle_h"/>
				<font resource="caption" color="%text%"/>
				<colors line="%text_dark%" slider="%accent%"/>
				<dimensions lineh="%slidervalue_lineh%" linepadding="%slidervalue_padding%" sliderw="%slidervalue_sliderw%" sliderh="%slidervalue_sliderh%"/>
				<data variable="tw_screen_timeout_secs" min="15" max="300" showrange="0" showcurr="0" changeondrag="1"/>
			</slidervalue>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">settings</action>
			</action>
		</page>

		<page name="vibrate">
			<template name="body"/>

			<template name="ab_tab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@settings_hdr=Settings}</text>
			</text>

			<button>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_reset" highlightresource="actionbar_reset_hl"/>
				<action function="overlay">dialog_reset</action>
			</button>

			<button>
				<placement x="%tab4_col1_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_misc"/>
				<action function="page">settings</action>
			</button>

			<button>
				<placement x="%tab4_col2_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_time"/>
				<action function="page">timezone</action>
			</button>

			<button>
				<placement x="%tab4_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_display"/>
				<action function="page">screen</action>
			</button>

			<image>
				<placement x="%tab4_col4_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_vibration_a"/>
			</image>

			<fill color="%text_actionbar%">
				<placement x="%tab4_ind4_x%" y="%tab_indicator_y%" w="%tab4_width%" h="%tab_indicator_height%"/>
			</fill>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_1_y%"/>
				<text>{@vibration_hdr=Vibration}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_2a_y%"/>
				<text>{@button_vibration=Button Vibration:} %tw_button_vibrate%</text>
			</text>

			<slidervalue>
				<placement x="%slider_x%" y="%row2_3_y%" w="%slidervalue_w%"/>
				<resource background="slider" handle="handle" handlehover="handle_h"/>
				<font resource="caption" color="%text%"/>
				<colors line="%text_dark%" slider="%accent%"/>
				<dimensions lineh="%slidervalue_lineh%" linepadding="%slidervalue_padding%" sliderw="%slidervalue_sliderw%" sliderh="%slidervalue_sliderh%"/>
				<data variable="tw_button_vibrate" min="0" max="300" showrange="0" showcurr="0" changeondrag="1"/>
			</slidervalue>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>{@kb_vibration=Keyboard Vibration:} %tw_keyboard_vibrate%</text>
			</text>

			<slidervalue>
				<placement x="%slider_x%" y="%row4_1a_y%" w="%slidervalue_w%"/>
				<resource background="slider" handle="handle" handlehover="handle_h"/>
				<font resource="caption" color="%text%"/>
				<colors line="%text_dark%" slider="%accent%"/>
				<dimensions lineh="%slidervalue_lineh%" linepadding="%slidervalue_padding%" sliderw="%slidervalue_sliderw%" sliderh="%slidervalue_sliderh%"/>
				<data variable="tw_keyboard_vibrate" min="0" max="300" showrange="0" showcurr="0" changeondrag="1"/>
			</slidervalue>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row5_2a_y%"/>
				<text>{@act_vibration=Action Vibration:} %tw_action_vibrate%</text>
			</text>

			<slidervalue>
				<placement x="%slider_x%" y="%row5_3_y%" w="%slidervalue_w%"/>
				<resource background="slider" handle="handle" handlehover="handle_h"/>
				<font resource="caption" color="%text%"/>
				<colors line="%text_dark%" slider="%accent%"/>
				<dimensions lineh="%slidervalue_lineh%" linepadding="%slidervalue_padding%" sliderw="%slidervalue_sliderw%" sliderh="%slidervalue_sliderh%"/>
				<data variable="tw_action_vibrate" min="0" max="500" showrange="0" showcurr="0" changeondrag="1"/>
			</slidervalue>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">settings</action>
			</action>
		</page>

		<page name="theme_path_select">
			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".zip" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".zip" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@theme_path_hdr=Theme Path}</text>
			</text>

			<button>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_sort" highlightresource="actionbar_sort_hl"/>
				<action function="overlay">menu_sort</action>
			</button>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@theme_path_subhdr=Select the ui.zip}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<action>
				<condition var1="tw_filename" op="modified"/>
				<actions>
					<action function="set">tw_theme_path=%tw_zip_location%</action>
					<action function="set">tw_themeexists=1</action>
					<action function="page">theme_settings</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">%tw_back%</action>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_back=</action>
					<action function="page">main</action>
				</actions>
			</action>
		</page>

		<page name="theme_settings">
			<template name="body"/>

			<template name="ab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<button>
				<condition var1="tw_themeexists" var2="1"/>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_delete" highlightresource="actionbar_delete_hl"/>
				<action function="overlay">dialog_remove_theme</action>
			</button>

			<button>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_reset" highlightresource="actionbar_reset_hl"/>
				<action function="overlay">dialog_reset_theme</action>
			</button>

			<text style="caption">
				<placement x="%col1_x%" y="%row1_1_y%"/>
				<text>{@functional=Functional}</text>
			</text>

			<listbox style="settingslist">
				<placement x="%col1_x%" y="%row1_2_y%" w="%listbox_w%" h="%listbox_settings_mf_height%"/>
				<listitem name="{@use_aromafm=Use Aroma File Manager}">
					<data variable="aromafm"/>
				</listitem>
				<listitem name="{@use_bookmark=Use bookmark function for file lists}">
					<data variable="bookmark"/>
				</listitem>
				<listitem name="{@auto_name_generate=Show auto generated backup name}">
					<data variable="auto_generate"/>
				</listitem>
				<listitem name="{@use_flashit_script=Use FlashIt script for image flashing}">
					<data variable="use_flashit"/>
				</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>{@visual=Visual}</text>
			</text>

			<listbox style="settingslist">
				<placement x="%col1_x%" y="%row4_1_y%" w="%listbox_w%" h="%listbox_settings_mv_height%"/>
				<listitem name="{@center_clock_bar=Center clock in statusbar}">
					<data variable="center_clock"/>
				</listitem>
				<listitem name="{@show_cpu_temp_bar=Show CPU temperature}">
					<data variable="show_cpu_temp"/>
				</listitem>
				<listitem name="{@use_menu_btn=Use buttons on main menu}">
					<data variable="menu_btn_solid"/>
				</listitem>
				<listitem name="{@rev_navbar_chk=Reversed navbar layout}">
					<data variable="navbar_sams"/>
				</listitem>
				<listitem name="{@use_color_navbar=Use accent color for navbar}">
					<data variable="navbar_accent"/>
				</listitem>
			</listbox>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row7_1a_y%"/>
				<text>{@dialog_settheme_btn=CHANGE THEME}</text>
				<action function="page">theme_swap</action>
			</button>

			<button style="btn_raised_hl">
				<condition var1="tw_themeexists" var2="1"/>
				<placement x="%btn_raised_right_x%" y="%row7_1a_y%" placement="1"/>
				<text>{@dialog_settheme_color_btn=CHANGE COLOR}</text>
				<action function="page">theme_color</action>
			</button>

			<button style="btn_raised">
				<condition var1="tw_themeexists" var2="1"/>
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@dialog_splash_btn=CHANGE SPLASH}</text>
				<actions>
					<action function="cmd">
					if [ -f "%tw_theme_path%/flashit/flashit.zip" ];
					then cd /;
					else
					mkdir "%tw_theme_path%/flashit";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/flashit/* %tw_theme_path%/flashit;
					chmod 777 "%tw_theme_path%/flashit/flashit.zip";
					rm -r /data/local/twrp;
					fi
					</action>
					<action function="set">repack_fail=</action>
					<action function="set">tw_filecheck=/data/local/AIK-mobile/unpackimg.sh</action>
					<action function="set">tw_existpage=theme_splash</action>
					<action function="set">tw_notexistpage=dialog_aik_missing</action>
					<action function="set">tw_back=theme_settings</action>
					<action function="page">filecheck</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<condition var1="tw_themeexists" var2="1"/>
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@dialog_splash_adapt=ADAPT SPLASH}</text>
				<actions>
					<action function="cmd">
					if [ -f "%tw_theme_path%/flashit/flashit.zip" ];
					then cd /;
					else
					mkdir "%tw_theme_path%/flashit";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/flashit/* %tw_theme_path%/flashit;
					chmod 777 "%tw_theme_path%/flashit/flashit.zip";
					rm -r /data/local/twrp;
					fi
					</action>
					<action function="set">repack_fail=</action>
					<action function="set">tw_filecheck=/data/local/AIK-mobile/unpackimg.sh</action>
					<action function="set">tw_existpage=theme_splash_adapt</action>
					<action function="set">tw_notexistpage=dialog_aik_missing</action>
					<action function="set">tw_back=theme_settings</action>
					<action function="page">filecheck</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="theme_color">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<button>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_reset" highlightresource="actionbar_reset_hl"/>
				<action function="overlay">dialog_reset_theme</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@sel_color=Select Color}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@current_color=Current:} %accent_name%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@s_color=Color}</text>
			</text>

			<fill color="#E51C23FF">
				<placement x="%col1_x%" y="%row2_3_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col1_x%" y="%row2_3_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col1_x%" y="%row2_3_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Red</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=E51C23FF</action>
					<action function="set">tw_folder=images_red</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#3F51B5FF">
				<placement x="%col_col_center_x%" y="%row2_3_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_col_center_x%" y="%row2_3_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_col_center_x%" y="%row2_3_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Indigo</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=3F51B5FF</action>
					<action function="set">tw_folder=images_indigo</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#1464FFFF">
				<placement x="%col_x_color3%" y="%row2_3_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_x_color3%" y="%row2_3_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_x_color3%" y="%row2_3_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Blue</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=1464FFFF</action>
					<action function="set">tw_folder=images_blue</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#03A9F4FF">
				<placement x="%col1_x%" y="%row3_3a_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col1_x%" y="%row3_3a_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col1_x%" y="%row3_3a_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Light Blue</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=03A9F4FF</action>
					<action function="set">tw_folder=images_lightblue</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#0090CAFF">
				<placement x="%col_col_center_x%" y="%row3_3a_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_col_center_x%" y="%row3_3a_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_col_center_x%" y="%row3_3a_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Stock</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=0090CAFF</action>
					<action function="set">tw_folder=images_stock</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#009688FF">
				<placement x="%col_x_color3%" y="%row3_3a_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_x_color3%" y="%row3_3a_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_x_color3%" y="%row3_3a_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Teal</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=009688FF</action>
					<action function="set">tw_folder=images_teal</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#259B24FF">
				<placement x="%col1_x%" y="%row5_1_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col1_x%" y="%row5_1_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col1_x%" y="%row5_1_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Green</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=259B24FF</action>
					<action function="set">tw_folder=images_green</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#8BC34AFF">
				<placement x="%col_col_center_x%" y="%row5_1_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_col_center_x%" y="%row5_1_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_col_center_x%" y="%row5_1_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Light Green</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=8BC34AFF</action>
					<action function="set">tw_folder=images_lightgreen</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#CDDC39FF">
				<placement x="%col_x_color3%" y="%row5_1_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_x_color3%" y="%row5_1_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_x_color3%" y="%row5_1_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Lime</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=CDDC39FF</action>
					<action function="set">tw_folder=images_lime</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#FFC107FF">
				<placement x="%col1_x%" y="%row6_1a_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col1_x%" y="%row6_1a_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col1_x%" y="%row6_1a_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Amber</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=FFC107FF</action>
					<action function="set">tw_folder=images_amber</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#FF9800FF">
				<placement x="%col_col_center_x%" y="%row6_1a_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_col_center_x%" y="%row6_1a_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_col_center_x%" y="%row6_1a_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Orange</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=FF9800FF</action>
					<action function="set">tw_folder=images_orange</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#FF5722FF">
				<placement x="%col_x_color3%" y="%row6_1a_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_x_color3%" y="%row6_1a_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_x_color3%" y="%row6_1a_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Deep Orange</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=FF5722FF</action>
					<action function="set">tw_folder=images_deeporange</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#795548FF">
				<placement x="%col1_x%" y="%row7_2_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col1_x%" y="%row7_2_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col1_x%" y="%row7_2_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Brown</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=795548FF</action>
					<action function="set">tw_folder=images_brown</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#9E9E9EFF">
				<placement x="%col_col_center_x%" y="%row7_2_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_col_center_x%" y="%row7_2_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_col_center_x%" y="%row7_2_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Grey</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=9E9E9EFF</action>
					<action function="set">tw_folder=images_grey</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<fill color="#607D8BFF">
				<placement x="%col_x_color3%" y="%row7_2_y%" w="308" h="180"/>
			</fill>

			<fill color="%lightransparent%">
				<placement x="%col_x_color3%" y="%row7_2_y%" w="308" h="48"/>
			</fill>

			<button>
				<highlight color="%highlight_color%"/>
				<fill color="%transparent%"/>
				<placement x="%col_x_color3%" y="%row7_2_y%" w="308" h="180"/>
				<actions>
					<action function="set">tw_accent_name=Blue Grey</action>
					<action function="set">tw_text_actionbar=000000FF</action>
					<action function="set">tw_accent=607D8BFF</action>
					<action function="set">tw_folder=images_bluegrey</action>
					<action function="page">set_color</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">theme_settings</action>
			</action>
		</page>

		<page name="set_color">
			<action>
				<condition var1="dialog_hide_color" var2="0"/>
				<action function="page">theme_color</action>
				<action function="overlay">dialog_color</action>
			</action>

			<action>
				<condition var1="dialog_hide_color" var2="1"/>
				<actions>
					<action function="cmd">
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					chmod 777 "/data/local/twrp/zip";
					cp -r /data/local/twrp/%tw_folder%/* "/data/local/twrp/images";
					mv "/data/local/twrp/ui.xml" "/data/local/twrp/ui_temp.xml";
					sed "s/%accent%/#%tw_accent%/g" "/data/local/twrp/ui_temp.xml" &gt; "/data/local/twrp/ui_temp2.xml";
					rm -f "/data/local/twrp/ui_temp.xml";
					sed "s/%text_actionbar%/#%tw_text_actionbar%/g" "/data/local/twrp/ui_temp2.xml" &gt; "/data/local/twrp/ui_temp3.xml";
					rm -f "/data/local/twrp/ui_temp2.xml";
					sed "s/%accent_name%/%tw_accent_name%/g" "/data/local/twrp/ui_temp3.xml" &gt; "/data/local/twrp/ui.xml";
					rm -f "/data/local/twrp/ui_temp3.xml";
					cd "/data/local/twrp";
					./zip -0 -r "%tw_theme_path%/ui.zip" *;
					chown -R media_rw:media_rw "%tw_theme_path%";
					cd /;
					rm -r "/data/local/twrp";
					</action>
					<action function="set">accent_name=%tw_accent_name%</action>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_reboot_param=recovery</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</action>
		</page>

		<page name="theme_swap">
			<action>
				<condition var1="bookmark" var2="1"/>
				<action function="set">tw_zip_location=%location_themes%</action>
			</action>

			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".zip" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".zip" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@theme=Install Theme}</text>
			</text>

			<image>
				<condition var1="bookmark" var2="1"/>
				<condition var1="tw_zip_location" var2="%location_themes%"/>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_pinned"/>
			</image>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="1"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_themes%"/>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">location_themes=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_themes%</action>
				</actions>
			</button>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="0"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_themes%"/>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">dialog_context=loc_theme</action>
					<action function="overlay">dialog_folder</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text color="%text_actionbar%">
				<font resource="title"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@tw_zip_location_hdr=Select Theme Zip}</text>
			</text>

			<text color="%text_actionbar%">
				<font resource="body1"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row_btn1_y%"/>
				<text>{@select_storage_btn=SELECT STORAGE}</text>
				<actions>
					<action function="set">tw_back=theme_swap</action>
					<action function="overlay">dialog_storage</action>
				</actions>
			</button>

			<action>
				<actions>
					<action function="set">tw_fm_type=File</action>
					<action function="set">tw_fm_isfolder=0</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_filename" op="modified"/>
				<actions>
					<action function="queuezip"/>
					<action function="set">tw_q_1=%tw_file%</action>
					<action function="page">flash_confirm</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">theme_settings</action>
			</action>
		</page>

		<page name="theme_splash">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<actions>
					<action function="set">tw_splash_img_name=</action>
					<action function="set">tw_splash_img_path=</action>
					<action function="set">splash_type=</action>
					<action function="set">repack_fail=</action>
					<action function="page">main</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<button>
				<placement x="%btn_float_x%" y="%row1_2_y%"/>
				<image resource="btn_float_flashitinfo" highlightresource="btn_float_flashitinfo_hl"/>
				<action function="page">theme_splash_info</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@theme_splash_hdr=Change TWRP Splash}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@theme_image_kitchken=Android Image Kitchen}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@im_kitchen1=The repacked .img will be saved}</text>
			</text>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>{@im_kitchen2=to the same folder as the stock .img}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>{@stock_recovery_im=Stock TWRP Recovery Image}</text>
			</text>

			<text style="text_body2_fail">
				<condition var1="tw_splash_img_name" op="!="/>
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>{@not_selected=not selected}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_splash_img_name"/>
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>%tw_splash_img_name%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_right_x%" y="%row4_1_y%" placement="1"/>
				<text>{@install_select_file_btn=SELECT FILE}</text>
				<actions>
					<action function="set">tw_back=theme_splash</action>
					<action function="set">tw_splash_file=img</action>
					<action function="page">theme_splash_select_img</action>
				</actions>
			</button>

			<text style="caption">
				<placement x="%col1_x%" y="%row5_1_y%"/>
				<text>{@tw_splash_png_btn=PNG to use as Splash Screen}</text>
			</text>

			<text style="text_body2_fail">
				<condition var1="tw_splash_png_name" op="!="/>
				<placement x="%col1_x%" y="%row5_2_y%"/>
				<text>{@not_selected=not selected}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_splash_png_name"/>
				<placement x="%col1_x%" y="%row5_2_y%"/>
				<text>%tw_splash_png_name%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_right_x%" y="%row5_3_y%" placement="1"/>
				<text>{@install_select_file_btn=SELECT FILE}</text>
				<actions>
					<action function="set">tw_splash_file=png</action>
					<action function="page">theme_splash_select_png</action>
				</actions>
			</button>

			<checkbox style="checkbox_big">
				<condition var1="use_flashit" var2="0"/>
				<placement x="%col1_x%" y="%row6_3a_y%"/>
				<text>{@install_flash_repack=Install repacked recovery}</text>
				<data variable="auto_flash_repack"/>
			</checkbox>

			<checkbox style="checkbox_big">
				<condition var1="use_flashit" var2="1"/>
				<placement x="%col1_x%" y="%row6_3a_y%"/>
				<text>{@auto_flash_repack_chb=Automatically install repacked recovery}</text>
				<data variable="auto_flash_repack"/>
			</checkbox>

			<button>
				<condition var1="tw_themeexists" var2="1"/>
				<condition var1="inject_theme" var2="0"/>
				<placement x="%col1_x%" y="%row7_2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@include_flash_repack=Include current theme in repack}</text>
				<image resource="checkbox_false"/>
				<actions>
					<action function="set">tw_back=theme_splash</action>
					<action function="overlay">dialog_warning</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_themeexists" var2="1"/>
				<condition var1="inject_theme" var2="1"/>
				<placement x="%col1_x%" y="%row7_2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@include_flash_repack=Include current theme in repack}</text>
				<image resource="checkbox_true"/>
				<actions>
					<action function="set">inject_theme=0</action>
				</actions>
			</button>

			<text>
				<condition var1="tw_themeexists" var2="0"/>
				<placement x="%col1_x_indent%" y="%row7_2_y%"/>
				<font resource="body1" color="%text%"/>
				<text>{@not_include_theme=(the repack will not include the theme!)}</text>
			</text>

			<text style="caption">
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@slider_repack=Swipe to create Repack}</text>
			</text>

			<slider>
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_splash_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/splashes/splash_static.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cp "%tw_splash_png_path%/%tw_splash_png_name%" "/data/local/AIK-mobile/ramdisk/twres/images/splash.png";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_splash_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_splash_twrp.img";
					./cleanup.sh;
						umount /system;
						if [ -d "/system_root" ]; then
							umount /system_root;
							rmdir /system_root;
						fi;
						test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
				</actions>
			</slider>

			<text style="caption">
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@slider_repack=Swipe to create Repack}</text>
			</text>

			<slider>
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_theme_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					cd "ramdisk/twres";
					rm *.xml;
					rm -r images/*.png;
					rm -r fonts/*;
					rm -r languages/*;
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/images/* "/data/local/AIK-mobile/ramdisk/twres/images";
					cp -r /data/local/twrp/*.xml "/data/local/AIK-mobile/ramdisk/twres";
					cp -r /data/local/twrp/fonts/* "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp -r /data/local/twrp/languages/* "/data/local/AIK-mobile/ramdisk/twres/languages";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/splashes/splash_static.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cp "%tw_splash_png_path%/%tw_splash_png_name%" "/data/local/AIK-mobile/ramdisk/twres/images/splash.png";
					cd "/data/local/AIK-mobile";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_theme_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_theme_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
				</actions>
			</slider>

			<text style="caption">
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@slider_install_repack=Swipe to create &amp; install Repack}</text>
			</text>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="0"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_splash_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/splashes/splash_static.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cp "%tw_splash_png_path%/%tw_splash_png_name%" "/data/local/AIK-mobile/ramdisk/twres/images/splash.png";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_splash_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_splash_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="set">tw_file=custom_splash_twrp.img</action>
					<action function="set">tw_zip_location=%tw_flash_img_path%</action>
					<action function="set">tw_back=theme_splash</action>
					<action function="set">tw_flash_partition=/recovery;</action>
					<action function="page">flash_image_confirm</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="1"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_splash_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="cmd">
					i=%tw_theme_path%/flashit;
					rm -f $i/boot*.img $i/*recovery*.img $i/radio*.img $i/modem*.img;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/splashes/splash_static.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cp "%tw_splash_png_path%/%tw_splash_png_name%" "/data/local/AIK-mobile/ramdisk/twres/images/splash.png";
					./repackimg.sh;
					cp "image-new.img" "%tw_theme_path%/flashit/recovery.img";
					mv "image-new.img" "%tw_splash_img_path%/custom_splash_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_splash_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="set">tw_fm_type={@fm_type_file=File}</action>
					<action function="set">tw_fm_isfolder=0</action>
					<action function="set">tw_back=theme_splash</action>
					<action function="queueclear"/>
					<action function="set">tw_filename=%tw_theme_path%/flashit/flashit.zip</action>
					<action function="queuezip"/>
					<action function="flash">theme_splash_flash</action>
				</actions>
			</slider>

			<text style="caption">
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@slider_install_repack=Swipe to create &amp; install Repack}</text>
			</text>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="0"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_theme_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					cd "ramdisk/twres";
					rm *.xml;
					rm -r images/*.png;
					rm -r fonts/*;
					rm -r languages/*;
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/images/* "/data/local/AIK-mobile/ramdisk/twres/images";
					cp -r /data/local/twrp/*.xml "/data/local/AIK-mobile/ramdisk/twres";
					cp -r /data/local/twrp/fonts/* "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp -r /data/local/twrp/languages/* "/data/local/AIK-mobile/ramdisk/twres/languages";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/splashes/splash_static.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cp "%tw_splash_png_path%/%tw_splash_png_name%" "/data/local/AIK-mobile/ramdisk/twres/images/splash.png";
					cd "/data/local/AIK-mobile";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_theme_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_theme_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					rm -r "%tw_theme_path%/ui.zip";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="set">tw_file=custom_theme_twrp.img</action>
					<action function="set">tw_zip_location=%tw_flash_img_path%</action>
					<action function="set">tw_back=theme_splash</action>
					<action function="set">tw_flash_partition=/recovery;</action>
					<action function="page">flash_image_confirm</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="1"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="tw_splash_png_name"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_theme_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="cmd">
					i=%tw_theme_path%/flashit;
					rm -f $i/boot*.img $i/*recovery*.img $i/radio*.img $i/modem*.img;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					cd "ramdisk/twres";
					rm *.xml;
					rm -r images/*.png;
					rm -r fonts/*;
					rm -r languages/*;
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/images/* "/data/local/AIK-mobile/ramdisk/twres/images";
					cp -r /data/local/twrp/*.xml "/data/local/AIK-mobile/ramdisk/twres";
					cp -r /data/local/twrp/fonts/* "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp -r /data/local/twrp/languages/* "/data/local/AIK-mobile/ramdisk/twres/languages";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/splashes/splash_static.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cp "%tw_splash_png_path%/%tw_splash_png_name%" "/data/local/AIK-mobile/ramdisk/twres/images/splash.png";
					cd "/data/local/AIK-mobile";
					./repackimg.sh;
					cp "image-new.img" "%tw_theme_path%/flashit/recovery.img";
					mv "image-new.img" "%tw_splash_img_path%/custom_theme_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_theme_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					rm -r "%tw_theme_path%/ui.zip";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="set">tw_fm_type={@fm_type_file=File}</action>
					<action function="set">tw_fm_isfolder=0</action>
					<action function="set">tw_back=theme_splash</action>
					<action function="queueclear"/>
					<action function="set">tw_filename=%tw_theme_path%/flashit/flashit.zip</action>
					<action function="queuezip"/>
					<action function="flash">theme_splash_flash</action>
				</actions>
			</slider>

			<text color="%accent%">
				<condition var1="tw_busy" var2="1"/>
				<font resource="subhead"/>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@repacking=Repacking in progress...}</text>
			</text>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_splash_img_name=</action>
					<action function="set">tw_splash_img_path=</action>
					<action function="set">tw_splash_png_name=</action>
					<action function="set">tw_splash_png_path=</action>
					<action function="set">repack_fail=</action>
					<action function="page">theme_settings</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_splash_img_name=</action>
					<action function="set">tw_splash_img_path=</action>
					<action function="set">tw_splash_png_name=</action>
					<action function="set">tw_splash_png_path=</action>
					<action function="set">repack_fail=</action>
					<action function="page">main</action>
				</actions>
			</action>
		</page>

		<page name="theme_splash_info">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@theme_splash_hdr=Change TWRP Splash}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@ts_inform=Information}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@ts_how_works=How it works}</text>
			</text>

			<listbox style="textbox">
				<placement x="%col1_x%" y="%row2_3_y%" w="%console_width%" h="%console_action_height%"/>
				<listitem name="This function uses the"/>
				<listitem name="mobile AIK (Android Image Kitchen)"/>
				<listitem name="to replace the TWRP splash screen"/>
				<listitem name="and the stock recovery theme (optional)"/>
				<listitem name="inside the recovery.img file."/>
				<listitem name=""/>
				<listitem name="The mobile AIK is not part of the theme"/>
				<listitem name="and must be installed seperately."/>
				<listitem name="The flashable zip to install mobile AIK"/>
				<listitem name="is available at XDA (AIK thread)."/>
				<listitem name=""/>
				<listitem name="The selected recovery image (.img) will"/>
				<listitem name="be unpacked, the selected splash (.png) will"/>
				<listitem name="be copied into the unpacked recovery image,"/>
				<listitem name="replacing the stock TWRP splash."/>
				<listitem name=""/>
				<listitem name="The dimensions of the custom splash png"/>
				<listitem name="must match the screen resolution,"/>
				<listitem name="e.g. &quot;1920x1080&quot; for full HD devices."/>
				<listitem name=""/>
				<listitem name="If the option &quot;Include theme&quot; is selected,"/>
				<listitem name="the theme (only the current color) will also"/>
				<listitem name="be copied into the unpacked recovery image,"/>
				<listitem name="replacing the stock TWRP theme."/>
				<listitem name=""/>
				<listitem name="The recovery will then be repacked to"/>
				<listitem name="to a &quot;custom_splash_twrp.img&quot; (splash only)"/>
				<listitem name="or to a &quot;custom_theme_twrp.img&quot; (theme)"/>
				<listitem name="and saved to the same folder as the"/>
				<listitem name="stock recovery."/>
				<listitem name=""/>
				<listitem name="If the option &quot;automatically install...&quot; is selected,"/>
				<listitem name="the repacked image will directly be flashed"/>
				<listitem name="and replace the stock recovery."/>
				<listitem name=""/>
			</listbox>

			<fill color="%linecolor%">
				<placement x="%col1_x%" y="%row2_3_y%" w="%content_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<placement x="%col1_x%" y="%row7_3_y%" w="%content_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<button>
				<placement x="%btn_float_x%" y="%row7_3a_y%"/>
				<image resource="btn_float_accept"/>
				<highlight color="%highlight_color%"/>
				<action function="page">theme_splash</action>
			</button>

			<action>
				<touch key="back"/>
				<action function="page">theme_splash</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="theme_splash_adapt">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<actions>
					<action function="set">tw_splash_img_name=</action>
					<action function="set">tw_splash_img_path=</action>
					<action function="set">splash_type=</action>
					<action function="set">repack_fail=</action>
					<action function="page">main</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<button>
				<placement x="%btn_float_x%" y="%row1_2_y%"/>
				<image resource="btn_float_flashitinfo" highlightresource="btn_float_flashitinfo_hl"/>
				<action function="page">theme_splash_adapt_info</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@theme_splash_adapt_hdr=Adapt TWRP Splash}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@theme_image_kitchken=Android Image Kitchen}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@im_kitchen1=The repacked .img will be saved}</text>
			</text>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>{@im_kitchen2=to the same folder as the stock .img}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>{@stock_recovery_im=Stock TWRP Recovery Image}</text>
			</text>

			<text style="text_body2_fail">
				<condition var1="tw_splash_img_name" op="!="/>
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>{@not_selected=not selected}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_splash_img_name"/>
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>%tw_splash_img_name%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_right_x%" y="%row4_1_y%" placement="1"/>
				<text>{@install_select_file_btn=SELECT FILE}</text>
				<actions>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="set">tw_splash_file=img</action>
					<action function="page">theme_splash_select_img</action>
				</actions>
			</button>

			<text style="caption">
				<placement x="%col1_x%" y="%row5_1_y%"/>
				<text>{@splash_preview=Splash Type}</text>
			</text>

			<text style="text_body2_fail">
				<condition var1="splash_type" op="!="/>
				<placement x="%col1_x%" y="%row5_2_y%"/>
				<text>{@not_selected=not selected}</text>
			</text>

			<text style="text_body2">
				<condition var1="splash_type"/>
				<placement x="%col1_x%" y="%row5_2_y%"/>
				<text>%splash_type%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_right_x%" y="%row5_3_y%" placement="1"/>
				<text>{@theme_splash_preview=SELECT SPLASH}</text>
				<action function="page">theme_splash_adapt_preview</action>
			</button>

			<checkbox style="checkbox_big">
				<condition var1="use_flashit" var2="0"/>
				<placement x="%col1_x%" y="%row6_3a_y%"/>
				<text>{@install_flash_repack=Install repacked recovery}</text>
				<data variable="auto_flash_repack" />
			</checkbox>

			<checkbox style="checkbox_big">
				<condition var1="use_flashit" var2="1"/>
				<placement x="%col1_x%" y="%row6_3a_y%"/>
				<text>{@auto_flash_repack_chb=Automatically install repacked recovery}</text>
				<data variable="auto_flash_repack"/>
			</checkbox>

			<button>
				<condition var1="tw_themeexists" var2="1"/>
				<condition var1="inject_theme" var2="0"/>
				<placement x="%col1_x%" y="%row7_2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@include_flash_repack=Include current theme in repack}</text>
				<image resource="checkbox_false"/>
				<actions>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="overlay">dialog_warning</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_themeexists" var2="1"/>
				<condition var1="inject_theme" var2="1"/>
				<placement x="%col1_x%" y="%row7_2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@include_flash_repack=Include current theme in repack}</text>
				<image resource="checkbox_true"/>
				<actions>
					<action function="set">inject_theme=0</action>
				</actions>
			</button>

			<text>
				<condition var1="tw_themeexists" var2="0"/>
				<placement x="%col1_x_indent%" y="%row7_2_y%"/>
				<font resource="body1" color="%text%"/>
				<text>{@not_include_theme=(the repack will not include the theme!)}</text>
			</text>

			<text style="caption">
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@slider_repack=Swipe to create Repack}</text>
			</text>

			<slider>
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_splash_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/images/splashlogo_stock.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/splashteamwin_stock.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/actionbar_shadow.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/splashes/splash_xml_stock.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_splash_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_splash_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock Materialised"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_splash_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/images/splashlogo.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/splashteamwin.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/actionbar_shadow.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/splashes/splash_xml.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_splash_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_splash_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
				</actions>
			</slider>

			<text style="caption">
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@slider_repack=Swipe to create Repack}</text>
			</text>

			<slider>
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_theme_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					cd "ramdisk/twres";
					rm *.xml;
					rm -r images/*.png;
					rm -r fonts/*;
					rm -r languages/*;
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/images/* "/data/local/AIK-mobile/ramdisk/twres/images";
					cp -r /data/local/twrp/*.xml "/data/local/AIK-mobile/ramdisk/twres";
					cp -r /data/local/twrp/fonts/* "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp -r /data/local/twrp/languages/* "/data/local/AIK-mobile/ramdisk/twres/languages";
					cp "/data/local/twrp/splashes/splash_xml_stock.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cd "/data/local/AIK-mobile";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_theme_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_theme_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock Materialised"/>
					<condition var1="auto_flash_repack" var2="0"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_theme_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					cd "ramdisk/twres";
					rm *.xml;
					rm -r images/*.png;
					rm -r fonts/*;
					rm -r languages/*;
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/images/* "/data/local/AIK-mobile/ramdisk/twres/images";
					cp -r /data/local/twrp/*.xml "/data/local/AIK-mobile/ramdisk/twres";
					cp -r /data/local/twrp/fonts/* "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp -r /data/local/twrp/languages/* "/data/local/AIK-mobile/ramdisk/twres/languages";
					cp "/data/local/twrp/splashes/splash_xml.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cd "/data/local/AIK-mobile";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_theme_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_theme_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
				</actions>
			</slider>

			<text style="caption">
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@slider_install_repack=Swipe to create &amp; install Repack}</text>
			</text>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="0"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_splash_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/images/splashlogo_stock.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/splashteamwin_stock.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/actionbar_shadow.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/splashes/splash_xml_stock.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_splash_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_splash_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="set">tw_file=custom_splash_twrp.img</action>
					<action function="set">tw_zip_location=%tw_flash_img_path%</action>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="set">tw_flash_partition=/recovery;</action>
					<action function="page">flash_image_confirm</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="0"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock Materialised"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_splash_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/images/splashlogo.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/splashteamwin.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/actionbar_shadow.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/splashes/splash_xml.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_splash_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_splash_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="set">tw_file=custom_splash_twrp.img</action>
					<action function="set">tw_zip_location=%tw_flash_img_path%</action>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="set">tw_flash_partition=/recovery;</action>
					<action function="page">flash_image_confirm</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="1"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_splash_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="cmd">
					i=%tw_theme_path%/flashit;
					rm -f $i/boot*.img $i/*recovery*.img $i/radio*.img $i/modem*.img;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/images/splashlogo_stock.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/splashteamwin_stock.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/actionbar_shadow.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/splashes/splash_xml_stock.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					./repackimg.sh;
					cp "image-new.img" "%tw_theme_path%/flashit/recovery.img";
					mv "image-new.img" "%tw_splash_img_path%/custom_splash_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_splash_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="set">tw_fm_type=File</action>
					<action function="set">tw_fm_isfolder=0</action>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="queueclear"/>
					<action function="set">tw_filename=%tw_theme_path%/flashit/flashit.zip</action>
					<action function="queuezip"/>
					<action function="flash">theme_splash_flash</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="1"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock Materialised"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="0"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_splash_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="cmd">
					i=%tw_theme_path%/flashit;
					rm -f $i/boot*.img $i/*recovery*.img $i/radio*.img $i/modem*.img;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp "/data/local/twrp/fonts/Light.ttf" "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp "/data/local/twrp/images/splashlogo.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/splashteamwin.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/images/actionbar_shadow.png" "/data/local/AIK-mobile/ramdisk/twres/images";
					cp "/data/local/twrp/splashes/splash_xml.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					./repackimg.sh;
					cp "image-new.img" "%tw_theme_path%/flashit/recovery.img";
					mv "image-new.img" "%tw_splash_img_path%/custom_splash_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_splash_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_splash_twrp.img";
					fi;
					</action>
					<action function="set">tw_fm_type=File</action>
					<action function="set">tw_fm_isfolder=0</action>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="queueclear"/>
					<action function="set">tw_filename=%tw_theme_path%/flashit/flashit.zip</action>
					<action function="queuezip"/>
					<action function="flash">theme_splash_flash</action>
				</actions>
			</slider>

			<text style="caption">
				<conditions>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@slider_install_repack=Swipe to create &amp; install Repack}</text>
			</text>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="0"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_theme_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="cmd">
					i=%tw_theme_path%/flashit;
					rm -f $i/boot*.img $i/*recovery*.img $i/radio*.img $i/modem*.img;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					cd "ramdisk/twres";
					rm *.xml;
					rm -r images/*.png;
					rm -r fonts/*;
					rm -r languages/*;
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/images/* "/data/local/AIK-mobile/ramdisk/twres/images";
					cp -r /data/local/twrp/*.xml "/data/local/AIK-mobile/ramdisk/twres";
					cp -r /data/local/twrp/fonts/* "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp -r /data/local/twrp/languages/* "/data/local/AIK-mobile/ramdisk/twres/languages";
					cp "/data/local/twrp/splashes/splash_xml_stock.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cd "/data/local/AIK-mobile";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_theme_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_theme_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					rm -r "%tw_theme_path%/ui.zip";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="set">tw_file=custom_theme_twrp.img</action>
					<action function="set">tw_zip_location=%tw_flash_img_path%</action>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="set">tw_flash_partition=/recovery;</action>
					<action function="page">flash_image_confirm</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="0"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock Materialised"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_theme_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="cmd">
					i=%tw_theme_path%/flashit;
					rm -f $i/boot*.img $i/*recovery*.img $i/radio*.img $i/modem*.img;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					cd "ramdisk/twres";
					rm *.xml;
					rm -r images/*.png;
					rm -r fonts/*;
					rm -r languages/*;
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/images/* "/data/local/AIK-mobile/ramdisk/twres/images";
					cp -r /data/local/twrp/*.xml "/data/local/AIK-mobile/ramdisk/twres";
					cp -r /data/local/twrp/fonts/* "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp -r /data/local/twrp/languages/* "/data/local/AIK-mobile/ramdisk/twres/languages";
					cp "/data/local/twrp/splashes/splash_xml.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cd "/data/local/AIK-mobile";
					./repackimg.sh;
					mv "image-new.img" "%tw_splash_img_path%/custom_theme_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_theme_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					rm -r "%tw_theme_path%/ui.zip";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="set">tw_file=custom_theme_twrp.img</action>
					<action function="set">tw_zip_location=%tw_flash_img_path%</action>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="set">tw_flash_partition=/recovery;</action>
					<action function="page">flash_image_confirm</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="1"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_theme_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="cmd">
					i=%tw_theme_path%/flashit;
					rm -f $i/boot*.img $i/*recovery*.img $i/radio*.img $i/modem*.img;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					cd "ramdisk/twres";
					rm *.xml;
					rm -r images/*.png;
					rm -r fonts/*;
					rm -r languages/*;
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/images/* "/data/local/AIK-mobile/ramdisk/twres/images";
					cp -r /data/local/twrp/*.xml "/data/local/AIK-mobile/ramdisk/twres";
					cp -r /data/local/twrp/fonts/* "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp -r /data/local/twrp/languages/* "/data/local/AIK-mobile/ramdisk/twres/languages";
					cp "/data/local/twrp/splashes/splash_xml_stock.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cd "/data/local/AIK-mobile";
					./repackimg.sh;
					cp "image-new.img" "%tw_theme_path%/flashit/recovery.img";
					mv "image-new.img" "%tw_splash_img_path%/custom_theme_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_theme_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					rm -r "%tw_theme_path%/ui.zip";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="set">tw_fm_type=File</action>
					<action function="set">tw_fm_isfolder=0</action>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="queueclear"/>
					<action function="set">tw_filename=%tw_theme_path%/flashit/flashit.zip</action>
					<action function="queuezip"/>
					<action function="flash">theme_splash_flash</action>
				</actions>
			</slider>

			<slider>
				<conditions>
					<condition var1="use_flashit" var2="1"/>
					<condition var1="tw_busy" var2="0"/>
					<condition var1="tw_splash_img_name"/>
					<condition var1="splash_type" var2="Stock Materialised"/>
					<condition var1="auto_flash_repack" var2="1"/>
					<condition var1="inject_theme" var2="1"/>
				</conditions>
				<actions>
					<action function="cmd">
					if [ -f "%tw_splash_img_path%/custom_theme_twrp.img" ];
					then rm "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="cmd">
					i=%tw_theme_path%/flashit;
					rm -f $i/boot*.img $i/*recovery*.img $i/radio*.img $i/modem*.img;
					</action>
					<action function="cmd">
					cd "/data/local/AIK-mobile";
					cp "%tw_splash_img_path%/%tw_splash_img_name%" "/data/local/AIK-mobile/original.img";
					chmod 777 "/data/local/AIK-mobile/original.img";
					umount /system;
					umount /system;
					mount -o ro -t auto /system;
					if [ -f "/system/system/bin/dalvikvm" ]; then
						umount /system;
						umount /system;
						mkdir /system_root;
						slot=$(getprop ro.boot.slot_suffix 2>/dev/null);
						test ! "$slot" && slot=$(grep -o 'androidboot.slot_suffix=.*$' /proc/cmdline | cut -d\  -f1 | cut -d= -f2);
						test ! "$slot" -o ! -e "/dev/block/bootdevice/by-name/system$slot" && unset slot;
						mount -o ro -t auto /dev/block/bootdevice/by-name/system$slot /system_root;
						mount -o bind /system_root/system /system;
					fi;
					echo -e '#/sbin/sh\nshift;
					sh "$@";
					' > /sbin/su;
					chmod 755 /sbin/su;
					savedpath="$LD_LIBRARY_PATH";
					unset LD_LIBRARY_PATH;
					./unpackimg.sh "/data/local/AIK-mobile/original.img";
					cd "ramdisk/twres";
					rm *.xml;
					rm -r images/*.png;
					rm -r fonts/*;
					rm -r languages/*;
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					cp -r /data/local/twrp/images/* "/data/local/AIK-mobile/ramdisk/twres/images";
					cp -r /data/local/twrp/*.xml "/data/local/AIK-mobile/ramdisk/twres";
					cp -r /data/local/twrp/fonts/* "/data/local/AIK-mobile/ramdisk/twres/fonts";
					cp -r /data/local/twrp/languages/* "/data/local/AIK-mobile/ramdisk/twres/languages";
					cp "/data/local/twrp/splashes/splash_xml.xml" "/data/local/AIK-mobile/ramdisk/twres/splash.xml";
					cd "/data/local/AIK-mobile";
					./repackimg.sh;
					cp "image-new.img" "%tw_theme_path%/flashit/recovery.img";
					mv "image-new.img" "%tw_splash_img_path%/custom_theme_twrp.img";
					chown -R media_rw:media_rw "%tw_splash_img_path%/custom_theme_twrp.img";
					./cleanup.sh;
					umount /system;
					if [ -d "/system_root" ]; then
						umount /system_root;
						rmdir /system_root;
					fi;
					test "$savedpath" && export LD_LIBRARY_PATH="$savedpath";
					rm -r "/data/local/twrp";
					rm -r "%tw_theme_path%/ui.zip";
					</action>
					<action function="cmd">
					if [ -f "/data/custom_boot_image_patch.sh" ];
					then /data/local/AIK-mobile/bin/busybox ash "/data/custom_boot_image_patch.sh" "%tw_splash_img_path%/custom_theme_twrp.img";
					fi;
					</action>
					<action function="set">tw_fm_type=File</action>
					<action function="set">tw_fm_isfolder=0</action>
					<action function="set">tw_back=theme_splash_adapt</action>
					<action function="queueclear"/>
					<action function="set">tw_filename=%tw_theme_path%/flashit/flashit.zip</action>
					<action function="queuezip"/>
					<action function="flash">theme_splash_flash</action>
				</actions>
			</slider>

			<text color="%accent%">
				<condition var1="tw_busy" var2="1"/>
				<font resource="subhead"/>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@repacking=Repacking in progress...}</text>
			</text>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_splash_img_name=</action>
					<action function="set">tw_splash_img_path=</action>
					<action function="set">splash_type=</action>
					<action function="set">repack_fail=</action>
					<action function="page">theme_settings</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_splash_img_name=</action>
					<action function="set">tw_splash_img_path=</action>
					<action function="set">splash_type=</action>
					<action function="set">repack_fail=</action>
					<action function="page">main</action>
				</actions>
			</action>
		</page>

		<page name="theme_splash_adapt_preview">
			<background color="%background%"/>

			<fill color="%text_light%">
				<placement x="0" y="0" w="%screen_w%" h="456"/>
			</fill>

			<fill color="%background%">
				<placement x="462" y="420" w="64" h="50"/>
			</fill>

			<fill color="%text_light%">
				<placement x="554" y="452" w="64" h="50"/>
			</fill>

			<image>
				<image resource="splashlogo_stock"/>
				<placement x="540" y="456" placement="4"/>
			</image>

			<image>
				<image resource="splashteamwin_stock"/>
				<placement x="540" y="1540" placement="4"/>
			</image>

			<text color="%text_light%">
				<font resource="splash"/>
				<placement x="540" y="1590" placement="5"/>
				<text>Recovery Project %tw_version%</text>
			</text>

			<button style="navigate_left">
				<placement x="0" y="%row4_2_y%"/>
				<action function="page">theme_splash_adapt_preview</action>
			</button>

			<button style="navigate_accept">
				<placement x="444" y="%row4_2_y%"/>
				<actions>
					<action function="set">splash_type=Stock</action>
					<action function="page">theme_splash_adapt</action>
				</actions>
			</button>

			<button style="navigate_right">
				<placement x="%screen_w%" y="%row4_2_y%" placement="1"/>
				<action function="page">theme_splash_adapt_preview2</action>
			</button>

			<fill color="%accent%">
				<condition var1="navbar_accent" var2="1"/>
				<placement x="0" y="%row_nav_y%" w="%screen_w%" h="%nav_h%"/>
			</fill>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home" highlightresource="home_hl"/>
				<action function="key">home</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home_white" highlightresource="home_white_hl"/>
				<action function="key">home</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout" highlightresource="slideout_hl"/>
				<action function="overlay">console</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout_white" highlightresource="slideout_white_hl"/>
				<action function="overlay">console</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout" highlightresource="slideout_hl"/>
				<action function="overlay">console</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout_white" highlightresource="slideout_white_hl"/>
				<action function="overlay">console</action>
			</button>

			<action>
				<touch key="power"/>
				<action function="togglebacklight"/>
			</action>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">theme_splash_adapt</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="theme_splash_adapt_preview2">
			<background color="%background%"/>

			<image>
				<image resource="actionbar_shadow"/>
				<placement x="0" y="452"/>
			</image>

			<fill color="%text_light%">
				<placement x="0" y="0" w="%screen_w%" h="456"/>
			</fill>

			<fill color="%background%">
				<placement x="462" y="420" w="64" h="50"/>
			</fill>

			<fill color="%text_light%">
				<placement x="554" y="452" w="64" h="50"/>
			</fill>

			<image>
				<image resource="splashlogo"/>
				<placement x="540" y="456" placement="4"/>
			</image>

			<image>
				<image resource="splashteamwin"/>
				<placement x="540" y="1540" placement="4"/>
			</image>

			<text color="%text_light%">
				<font resource="splash"/>
				<placement x="540" y="1590" placement="5"/>
				<text>Recovery Project %tw_version%</text>
			</text>

			<button style="navigate_left">
				<placement x="0" y="%row4_2_y%"/>
				<action function="page">theme_splash_adapt_preview</action>
			</button>

			<button style="navigate_accept">
				<placement x="444" y="%row4_2_y%"/>
				<actions>
					<action function="set">splash_type=Stock Materialised</action>
					<action function="page">theme_splash_adapt</action>
				</actions>
			</button>

			<button style="navigate_right">
				<placement x="%screen_w%" y="%row4_2_y%" placement="1"/>
				<action function="page">theme_splash_adapt_preview2</action>
			</button>

			<fill color="%accent%">
				<condition var1="navbar_accent" var2="1"/>
				<placement x="0" y="%row_nav_y%" w="%screen_w%" h="%nav_h%"/>
			</fill>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home" highlightresource="home_hl"/>
				<action function="key">home</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home_white" highlightresource="home_white_hl"/>
				<action function="key">home</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout" highlightresource="slideout_hl"/>
				<action function="overlay">console</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout_white" highlightresource="slideout_white_hl"/>
				<action function="overlay">console</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout" highlightresource="slideout_hl"/>
				<action function="overlay">console</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout_white" highlightresource="slideout_white_hl"/>
				<action function="overlay">console</action>
			</button>

			<action>
				<touch key="power"/>
				<action function="togglebacklight"/>
			</action>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">theme_splash_adapt</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="theme_splash_adapt_info">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@theme_splash_adapt_hdr=Adapt TWRP Splash}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@ts_inform=Information}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@ts_how_works=How it works}</text>
			</text>

			<listbox style="textbox">
				<placement x="%col1_x%" y="%row2_3_y%" w="%console_width%" h="%console_action_height%"/>
				<listitem name="This function uses the"/>
				<listitem name="mobile AIK (Android Image Kitchen)"/>
				<listitem name="to modify the TWRP splash screen"/>
				<listitem name="and the stock recovery theme (optional)"/>
				<listitem name="inside the recovery.img file."/>
				<listitem name=""/>
				<listitem name="The mobile AIK is not part of the theme"/>
				<listitem name="and must be installed seperately."/>
				<listitem name="The flashable zip to install mobile AIK"/>
				<listitem name="is available at XDA (AIK thread)."/>
				<listitem name=""/>
				<listitem name="If the option &quot;Include theme&quot; is selected,"/>
				<listitem name="the theme (only the current color) will also"/>
				<listitem name="be copied into the unpacked recovery image,"/>
				<listitem name="replacing the stock TWRP theme."/>
				<listitem name=""/>
				<listitem name="The recovery will then be repacked to"/>
				<listitem name="to a &quot;custom_splash_twrp.img&quot; (splash only)"/>
				<listitem name="or to a &quot;custom_theme_twrp.img&quot; (theme)"/>
				<listitem name="and saved to the same folder as the"/>
				<listitem name="stock recovery."/>
				<listitem name=""/>
				<listitem name="If the option &quot;automatically install...&quot; is selected,"/>
				<listitem name="the repacked image will directly be flashed"/>
				<listitem name="and replace the stock recovery."/>
				<listitem name=""/>
			</listbox>

			<fill color="%linecolor%">
				<placement x="%col1_x%" y="%row2_3_y%" w="%content_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<placement x="%col1_x%" y="%row7_3_y%" w="%content_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<button>
				<placement x="%btn_float_x%" y="%row7_3a_y%"/>
				<image resource="btn_float_accept"/>
				<highlight color="%highlight_color%"/>
				<action function="page">theme_splash_adapt</action>
			</button>

			<action>
				<touch key="back"/>
				<action function="page">theme_splash_adapt</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="theme_splash_select_img">
			<action>
				<condition var1="bookmark" var2="1"/>
				<action function="set">tw_zip_location=%location_install_splash_image%</action>
			</action>

			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".img" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".img" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<image>
				<condition var1="bookmark" var2="1"/>
				<condition var1="tw_zip_location" var2="%location_install_splash_image%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pinned"/>
			</image>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="1"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_install_splash_image%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">location_install_splash_image=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_install_splash_image%</action>
				</actions>
			</button>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="0"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_install_splash_image%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">dialog_context=loc_splash_image</action>
					<action function="overlay">dialog_folder</action>
				</actions>
			</button>

			<button>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_sort" highlightresource="actionbar_sort_hl"/>
				<action function="overlay">menu_sort</action>
			</button>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@sel_rec_im=Select Recovery Image}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row_btn1_y%"/>
				<text>{@select_storage_btn=SELECT STORAGE}</text>
				<actions>
					<action function="set">tw_back_temp=%tw_back%</action>
					<action function="set">tw_back=theme_splash_select_img</action>
					<action function="overlay">dialog_storage</action>
				</actions>
			</button>

			<action>
				<condition var1="tw_filename" op="modified"/>
				<actions>
					<action function="set">tw_fm_type=File</action>
					<action function="set">tw_fm_isfolder=0</action>
					<action function="set">tw_image_type=recovery</action>
					<action function="set">tw_splash_img_name=%tw_file%</action>
					<action function="set">tw_splash_img_path=%tw_zip_location%</action>
					<action function="set">tw_flash_img_path=%tw_zip_location%</action>
					<action function="page">%tw_back%</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">%tw_back%</action>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_back=</action>
					<action function="set">tw_flash_img_name=</action>
					<action function="set">tw_splash_img_name=</action>
					<action function="set">tw_splash_img_path=</action>
					<action function="set">tw_splash_png_name=</action>
					<action function="set">tw_splash_png_path=</action>
					<action function="page">main</action>
				</actions>
			</action>
		</page>

		<page name="theme_splash_select_png">
			<action>
				<condition var1="bookmark" var2="1"/>
				<action function="set">tw_zip_location=%location_install_splash_png%</action>
			</action>

			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".png" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".png" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<image>
				<condition var1="bookmark" var2="1"/>
				<condition var1="tw_zip_location" var2="%location_install_splash_png%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pinned"/>
			</image>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="1"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_install_splash_png%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">location_install_splash_png=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_install_splash_png%</action>
				</actions>
			</button>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="0"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_install_splash_png%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">dialog_context=loc_splash_png</action>
					<action function="overlay">dialog_folder</action>
				</actions>
			</button>

			<button>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_sort" highlightresource="actionbar_sort_hl"/>
				<action function="overlay">menu_sort</action>
			</button>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@sel_splash_png=Select Splash PNG}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row_btn1_y%"/>
				<text>{@select_storage_btn=SELECT STORAGE}</text>
				<actions>
					<action function="set">tw_back=theme_splash_select_png</action>
					<action function="overlay">dialog_storage</action>
				</actions>
			</button>

			<action>
				<condition var1="tw_filename" op="modified"/>
				<actions>
					<action function="set">tw_splash_png_name=%tw_file%</action>
					<action function="set">tw_splash_png_path=%tw_zip_location%</action>
					<action function="page">theme_splash</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">theme_splash</action>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_splash_img_name=</action>
					<action function="set">tw_splash_img_path=</action>
					<action function="set">tw_splash_png_name=</action>
					<action function="set">tw_splash_png_path=</action>
					<action function="page">main</action>
				</actions>
			</action>
		</page>

		<page name="theme_splash_flash">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@theme_splash_hdr=Change TWRP Splash}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@install_recovery=Installing Recovery...}</text>
			</text>

			<template name="action_page_console"/>

			<action>
				<condition var1="tw_operation_state" var2="1"/>
				<action function="page">theme_splash_flash_done</action>
			</action>
		</page>

		<page name="theme_splash_flash_done">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>Materialised</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@theme_splash_hdr=Change TWRP Splash}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@successful=Successful}</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@back_btn=BACK}</text>
				<action function="page">theme_splash</action>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@reboot_recovery_btn=REBOOT RECOVERY}</text>
				<actions>
					<action function="set">tw_back=main</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_reboot_param=recovery</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=theme_splash</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>
		</page>

		<page name="install">
			<action>
				<action function="set">tw_back=install</action>
			</action>

			<action>
				<condition var1="bookmark" var2="1"/>
				<action function="set">tw_zip_location=%location_install%</action>
			</action>

			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".zip" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".zip" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_zip_hdr=Install Zip}</text>
			</text>

			<image>
				<condition var1="bookmark" var2="1"/>
				<condition var1="tw_zip_location" var2="%location_install%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pinned"/>
			</image>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="1"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_install%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">location_install=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_install%</action>
				</actions>
			</button>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="0"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_install%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">dialog_context=loc_install</action>
					<action function="overlay">dialog_folder</action>
				</actions>
			</button>

			<button>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_sort" highlightresource="actionbar_sort_hl"/>
				<action function="overlay">menu_sort</action>
			</button>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@install_select_file_hdr=Select File}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row_btn1_y%"/>
				<text>{@select_storage_btn=SELECT STORAGE}</text>
				<actions>
					<action function="set">tw_back=install</action>
					<action function="overlay">dialog_storage</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row_btn1_y%" placement="1"/>
				<text>{@install_image_btn=INSTALL IMAGE}</text>
				<action function="page">install_image</action>
			</button>

			<action>
				<condition var1="tw_filename" op="modified"/>
				<actions>
					<action function="queuezip"/>
					<action function="set">tw_q_1=%tw_file%</action>
					<action function="page">flash_confirm</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="install_image">
			<action>
				<action function="set">tw_back=install_image</action>
			</action>

			<action>
				<condition var1="bookmark" var2="1"/>
				<action function="set">tw_zip_location=%location_install_image%</action>
			</action>

			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".img" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".img" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_image_hdr=Install Image}</text>
			</text>

			<image>
				<condition var1="bookmark" var2="1"/>
				<condition var1="tw_zip_location" var2="%location_install_image%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pinned"/>
			</image>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="1"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_install_image%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">location_install_image=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_install_image%</action>
				</actions>
			</button>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="0"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_install_image%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">dialog_context=loc_image</action>
					<action function="overlay">dialog_folder</action>
				</actions>
			</button>

			<button>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_sort" highlightresource="actionbar_sort_hl"/>
				<action function="overlay">menu_sort</action>
			</button>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@install_select_file_hdr=Select File}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row_btn1_y%"/>
				<text>{@select_storage_btn=SELECT STORAGE}</text>
				<actions>
					<action function="set">tw_back=install_image</action>
					<action function="overlay">dialog_storage</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row_btn1_y%" placement="1"/>
				<text>{@install_zip_btn=INSTALL ZIP}</text>
				<action function="page">install</action>
			</button>

			<action>
				<condition var1="use_flashit" var2="0"/>
				<condition var1="tw_filename" op="modified"/>
				<action function="page">flash_image_confirm</action>
			</action>

			<action>
				<condition var1="use_flashit" var2="1"/>
				<condition var1="tw_filename" op="modified"/>
				<actions>
					<action function="set">tw_fm_type={@fm_type_file=File}</action>
					<action function="set">tw_fm_isfolder=0</action>
					<action function="set">tw_image_type=none</action>
					<action function="cmd">
					i=%tw_theme_path%/flashit;
					rm -f $i/boot*.img $i/*recovery*.img $i/radio*.img $i/modem*.img;
					</action>
					<action function="set">tw_back=install_image</action>
					<action function="set">tw_filecheck=%tw_theme_path%/flashit/flashit.zip</action>
					<action function="set">tw_existpage=flash_image_confirm_f</action>
					<action function="set">tw_notexistpage=flash_image_confirm_f</action>
					<action function="page">filecheck</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">install</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="flash_confirm">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_zip_hdr=Install Zip}</text>
			</text>

			<button>
				<condition var1="tw_zip_queue_count" op="!=" var2="10"/>
				<placement x="%btn_float_x%" y="%row1_2_y%"/>
				<image resource="btn_float_addtoqueue" highlightresource="btn_float_addtoqueue_hl"/>
				<action function="page">add_zip</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@queue_hdr=Queue}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@zip_queue_count=%tw_zip_queue_count% of max of 10 Files queued}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@file=File}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_file%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>{@folder=Folder}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row4_2_y%"/>
				<text>{@options_cptn=Options}</text>
			</text>

			<listbox style="settingslist">
				<placement x="%col1_x%" y="%row4_3_y%" w="%listbox_w%" h="%listbox_settings_install_height%"/>
				<listitem name="{@zip_sig_chk=Zip signature verification}">
					<data variable="tw_signed_zip_verify"/>
				</listitem>
				<listitem name="{@install_reboot_chk=Reboot after installation is complete}">
					<data variable="tw_install_reboot"/>
				</listitem>
				<listitem name="{@inject_twrp_chk=Inject TWRP after install}">
					<condition var1="tw_has_injecttwrp" var2="1"/>
					<data variable="tw_inject_after_zip"/>
				</listitem>
			</listbox>

			<button style="btn_raised">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="1"/>
				<placement x="%btn_raised_left_x%" y="%row6_3_y%"/>
				<text>{@raised_viewqueue_btn=VIEW QUEUE}</text>
				<action function="page">queueview</action>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row6_3_y%" placement="1"/>
				<text>{@raised_clearqueue_btn=CLEAR QUEUE}</text>
				<actions>
					<action function="queueclear"/>
					<action function="page">install</action>
				</actions>
			</button>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_install=Swipe to Install}</text>
			</text>

			<slider>
				<action function="flash">flash_zip</action>
			</slider>

			<action>
				<touch key="back"/>
				<actions>
					<action function="cancelzip"/>
					<action function="page">install</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="queueview">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_zip_hdr=Install Zip}</text>
			</text>

			<button>
				<condition var1="tw_zip_queue_count" op="!=" var2="10"/>
				<placement x="%btn_float_x%" y="%row1_2_y%"/>
				<image resource="btn_float_addtoqueue" highlightresource="btn_float_addtoqueue_hl"/>
				<action function="page">add_zip</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@zip_queue=Queued}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@zip_queue_count=%tw_zip_queue_count% of max of 10 Files queued}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@queue_no=No.}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@file=File}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>1</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>%tw_q_1%</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="1"/>
				<placement x="%col1_x%" y="%row3_1a_y%"/>
				<text>2</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="1"/>
				<placement x="%col1_x_indent%" y="%row3_1a_y%"/>
				<text>%tw_q_2%</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="2"/>
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>3</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="2"/>
				<placement x="%col1_x_indent%" y="%row3_3_y%"/>
				<text>%tw_q_3%</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="3"/>
				<placement x="%col1_x%" y="%row4_1a_y%"/>
				<text>4</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="3"/>
				<placement x="%col1_x_indent%" y="%row4_1a_y%"/>
				<text>%tw_q_4%</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="4"/>
				<placement x="%col1_x%" y="%row4_3_y%"/>
				<text>5</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="4"/>
				<placement x="%col1_x_indent%" y="%row4_3_y%"/>
				<text>%tw_q_5%</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="5"/>
				<placement x="%col1_x%" y="%row5_1a_y%"/>
				<text>6</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="5"/>
				<placement x="%col1_x_indent%" y="%row5_1a_y%"/>
				<text>%tw_q_6%</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="6"/>
				<placement x="%col1_x%" y="%row5_3_y%"/>
				<text>7</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="6"/>
				<placement x="%col1_x_indent%" y="%row5_3_y%"/>
				<text>%tw_q_7%</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="7"/>
				<placement x="%col1_x%" y="%row6_1a_y%"/>
				<text>8</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="7"/>
				<placement x="%col1_x_indent%" y="%row6_1a_y%"/>
				<text>%tw_q_8%</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="8"/>
				<placement x="%col1_x%" y="%row6_3_y%"/>
				<text>9</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="8"/>
				<placement x="%col1_x_indent%" y="%row6_3_y%"/>
				<text>%tw_q_9%</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="9"/>
				<placement x="%col1_x%" y="%row7_1a_y%"/>
				<text>10</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_zip_queue_count" op="&gt;" var2="9"/>
				<placement x="%col1_x_indent%" y="%row7_1a_y%"/>
				<text>%tw_q_10%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@back_btn=BACK}</text>
				<action function="page">flash_confirm</action>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@raised_clearqueue_btn=CLEAR QUEUE}</text>
				<actions>
					<action function="queueclear"/>
					<action function="page">install</action>
				</actions>
			</button>

			<action>
				<touch key="back"/>
				<action function="page">flash_confirm</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="flash_aromafm_confirm">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@start_aromafm=Start Aroma File Manager}</text>
			</text>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_aromafm=Swipe to start AromaFM}</text>
			</text>

			<slider>
				<action function="flash">flash_zip</action>
			</slider>

			<action>
				<touch key="back"/>
				<actions>
					<action function="cancelzip"/>
					<action function="set">tw_signed_zip_verify=%tw_signed_zip_verify_temp%</action>
					<action function="set">tw_screen_timeout_secs=%tw_screen_timeout_temp%</action>
					<action function="set">tw_aroma=</action>
					<action function="page">main</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="cancelzip"/>
					<action function="set">tw_signed_zip_verify=%tw_signed_zip_verify_temp%</action>
					<action function="set">tw_screen_timeout_secs=%tw_screen_timeout_temp%</action>
					<action function="set">tw_aroma=</action>
					<action function="page">main</action>
				</actions>
			</action>
		</page>

		<page name="flash_image_confirm">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_image_hdr=Install Image}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@flash_img_confirm=Flash Image File}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@install_sel_target=Select Target Partition}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@file=File}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_file%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>{@folder=Folder}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row4_2_y%"/>
				<text>{@flash_image_select=Partition}</text>
			</text>

			<partitionlist style="partitionlist_radio">
				<placement x="%col1_x%" y="%row4_3_y%" w="%listbox_w%" h="%fileselector_part_height%"/>
				<data name="tw_flash_partition"/>
				<listtype name="flashimg"/>
			</partitionlist>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_install_img=Swipe to install Image}</text>
			</text>

			<slider>
				<actions>
					<action function="set">tw_back=flash_image_confirm</action>
					<action function="set">tw_action=flashimage</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@flashing_image=Flashing Image...}</action>
					<action function="set">tw_action_text2=%tw_file%</action>
					<action function="set">tw_complete_text1={@image_flashed=Image Flashed}</action>
					<action function="page">flash_image</action>
				</actions>
			</slider>

			<action>
				<touch key="back"/>
				<action function="page">%tw_back%</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="flash_image_confirm_f">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_image_hdr=Install Image}</text>
			</text>

			<button>
				<placement x="%btn_float_x%" y="%row1_2_y%"/>
				<image resource="btn_float_flashitinfo" highlightresource="btn_float_flashitinfo_hl"/>
				<action function="page">flash_image_info</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@flashit_script=FlashIt Script}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@file=File}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_file%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>{@folder=Folder}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row4_2_y%"/>
				<text>{@image_type=Image Type}</text>
			</text>

			<button>
				<condition var1="tw_image_type" op="!=" var2="recovery"/>
				<placement x="%col1_x%" y="%row4_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@image_type_1=Recovery Image}</text>
				<image resource="radio_false"/>
				<action function="set">tw_image_type=recovery</action>
			</button>

			<button>
				<condition var1="tw_image_type" var2="recovery"/>
				<placement x="%col1_x%" y="%row4_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@image_type_1=Recovery Image}</text>
				<image resource="radio_true"/>
				<action function="set">tw_image_type=recovery</action>
			</button>

			<button>
				<condition var1="tw_image_type" op="!=" var2="boot"/>
				<placement x="%col1_x%" y="%row5_1a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@image_type_2=Boot Image}</text>
				<image resource="radio_false"/>
				<action function="set">tw_image_type=boot</action>
			</button>

			<button>
				<condition var1="tw_image_type" var2="boot"/>
				<placement x="%col1_x%" y="%row5_1a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@image_type_2=Boot Image}</text>
				<image resource="radio_true"/>
				<action function="set">tw_image_type=boot</action>
			</button>

			<button>
				<condition var1="tw_image_type" op="!=" var2="radio"/>
				<placement x="%col1_x%" y="%row5_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@image_type_3=Radio / Modem Image}</text>
				<image resource="radio_false"/>
				<action function="set">tw_image_type=radio</action>
			</button>

			<button>
				<condition var1="tw_image_type" var2="radio"/>
				<placement x="%col1_x%" y="%row5_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@image_type_3=Radio / Modem Image}</text>
				<image resource="radio_true"/>
				<action function="set">tw_image_type=radio</action>
			</button>

			<image>
				<condition var1="tw_fileexists" var2="0"/>
				<condition var1="partitionlisterror" var2="1"/>
				<placement x="%col1_x%" y="%row7_1_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<condition var1="tw_fileexists" var2="0"/>
				<condition var1="partitionlisterror" var2="1"/>
				<placement x="%col1_x_indent%" y="%row7_1_y%"/>
				<text>{@install_flashit_script=Install the FlashIt script to continue!}</text>
			</text>

			<button style="btn_raised_hl">
				<condition var1="tw_fileexists" var2="0"/>
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@raised_installscript_btn=INSTALL SCRIPT}</text>
				<action function="cmd">
				mkdir "%tw_theme_path%/flashit";
				mkdir "/data/local/twrp";
				unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
				cp -r /data/local/twrp/flashit/* %tw_theme_path%/flashit;
				chmod 777 "%tw_theme_path%/flashit/flashit.zip";
				rm -r /data/local/twrp;
				</action>
				<action function="set">tw_fileexists=1</action>
			</button>

			<text style="caption">
				<conditions>
					<condition var1="tw_fileexists" var2="1"/>
					<condition var1="tw_image_type" var2="recovery"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_install_img=Swipe to install Image}</text>
			</text>

			<text style="caption">
				<conditions>
					<condition var1="tw_fileexists" var2="1"/>
					<condition var1="tw_image_type" var2="boot"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_install_img=Swipe to install Image}</text>
			</text>

			<text style="caption">
				<conditions>
					<condition var1="tw_fileexists" var2="1"/>
					<condition var1="tw_image_type" var2="radio"/>
				</conditions>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_install_img=Swipe to install Image}</text>
			</text>

			<text style="text_body2_hl">
				<conditions>
					<condition var1="tw_fileexists" var2="1"/>
					<condition var1="tw_image_type" op="=" var2="none"/>
				</conditions>
				<placement x="%center_x%" y="%row8_2_y%" placement="4"/>
				<text>{@sel_image_type=Select Image Type!}</text>
			</text>

			<slider>
				<conditions>
					<condition var1="tw_fileexists" var2="1"/>
					<condition var1="tw_image_type" op="!=" var2="none"/>
				</conditions>
				<actions>
					<action function="queueclear"/>
					<action function="cmd">
					cp "%tw_filename%" %tw_theme_path%/flashit/%tw_image_type%.img;
					</action>
					<action function="set">tw_filename=%tw_theme_path%/flashit/flashit.zip</action>
					<action function="queuezip"/>
					<action function="flash">flash_zip</action>
				</actions>
			</slider>

			<action>
				<touch key="back"/>
				<actions>
					<action function="cancelzip"/>
					<action function="page">install_image</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="flash_image_info">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_image_hdr=Install Image}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@flashit_script=FlashIt Script}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@ts_inform=Information}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@ts_how_works=How it works}</text>
			</text>

			<listbox style="textbox">
				<placement x="%col1_x%" y="%row2_3_y%" w="%console_width%" h="%console_action_height%"/>
				<listitem name="This will directly flash .img files."/>
				<listitem name="The selected image file is copied to a"/>
				<listitem name="temporary directory and renamed according"/>
				<listitem name="to the selected image type."/>
				<listitem name="The script will then search for a partition"/>
				<listitem name="matching the selected type."/>
				<listitem name=""/>
				<listitem name="If a matching partition is found"/>
				<listitem name="the image will be flashed."/>
				<listitem name=""/>
				<listitem name="If no matching partition is found"/>
				<listitem name="the script will not flash anything."/>
				<listitem name=""/>
				<listitem name="This script will only work on devices"/>
				<listitem name="with standard by-name partition naming,"/>
				<listitem name="e.g. &quot;boot&quot;, &quot;recovery&quot; and "/>
				<listitem name="&quot;modem&quot; or &quot;radio&quot;."/>
				<listitem name="If your device uses other partition names"/>
				<listitem name="the script will let you know and stop."/>
				<listitem name=""/>
				<listitem name="Be certain the image you have selected also"/>
				<listitem name="has the correct type selected. Do not"/>
				<listitem name="attempt to flash an image to the incorrect"/>
				<listitem name="partition and then reboot, or you may need"/>
				<listitem name="to use fastboot/ODIN to recover!"/>
				<listitem name=""/>
			</listbox>

			<fill color="%linecolor%">
				<placement x="%col1_x%" y="%row2_3_y%" w="%content_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<placement x="%col1_x%" y="%row7_3_y%" w="%content_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<button>
				<placement x="%btn_float_x%" y="%row7_3a_y%"/>
				<image resource="btn_float_accept"/>
				<highlight color="%highlight_color%"/>
				<action function="page">flash_image_confirm_f</action>
			</button>

			<action>
				<touch key="back"/>
				<action function="page">flash_image_confirm_f</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="add_zip">
			<action>
				<condition var1="bookmark" var2="1"/>
				<action function="set">tw_zip_location=%location_addfile%</action>
			</action>

			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".zip" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter extn=".zip" folders="1" files="1"/>
				<path name="tw_zip_location" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_file"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_zip_hdr=Install Zip}</text>
			</text>

			<image>
				<condition var1="bookmark" var2="1"/>
				<condition var1="tw_zip_location" var2="%location_addfile%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pinned"/>
			</image>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="1"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_addfile%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">location_addfile=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_addfile%</action>
				</actions>
			</button>

			<button>
				<condition var1="bookmark" var2="1"/>
				<condition var1="dialog_hide_folder" var2="0"/>
				<condition var1="tw_zip_location" op="!=" var2="%location_addfile%"/>
				<placement x="%ab_btn3_x%" y="%ab_y%"/>
				<image resource="actionbar_pin" highlightresource="actionbar_pin_hl"/>
				<actions>
					<action function="set">dialog_context=loc_addfile</action>
					<action function="overlay">dialog_folder</action>
				</actions>
			</button>

			<button>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_sort" highlightresource="actionbar_sort_hl"/>
				<action function="overlay">menu_sort</action>
			</button>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@zip_add_queue=Add File to Queue}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_zip_location%</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row_btn1_y%"/>
				<text>{@select_storage_btn=SELECT STORAGE}</text>
				<actions>
					<action function="set">tw_back=add_zip</action>
					<action function="overlay">dialog_storage</action>
				</actions>
			</button>

			<action>
				<condition var1="tw_filename" op="modified"/>
				<action function="queuezip"/>
			</action>

			<action>
				<condition var1="tw_zip_queue_count" var2="2"/>
				<action function="set">tw_q_2=%tw_file%</action>
			</action>

			<action>
				<condition var1="tw_zip_queue_count" var2="3"/>
				<action function="set">tw_q_3=%tw_file%</action>
			</action>

			<action>
				<condition var1="tw_zip_queue_count" var2="4"/>
				<action function="set">tw_q_4=%tw_file%</action>
			</action>

			<action>
				<condition var1="tw_zip_queue_count" var2="5"/>
				<action function="set">tw_q_5=%tw_file%</action>
			</action>

			<action>
				<condition var1="tw_zip_queue_count" var2="6"/>
				<action function="set">tw_q_6=%tw_file%</action>
			</action>

			<action>
				<condition var1="tw_zip_queue_count" var2="7"/>
				<action function="set">tw_q_7=%tw_file%</action>
			</action>

			<action>
				<condition var1="tw_zip_queue_count" var2="8"/>
				<action function="set">tw_q_8=%tw_file%</action>
			</action>

			<action>
				<condition var1="tw_zip_queue_count" var2="9"/>
				<action function="set">tw_q_9=%tw_file%</action>
			</action>

			<action>
				<condition var1="tw_zip_queue_count" var2="10"/>
				<action function="set">tw_q_10=%tw_file%</action>
			</action>

			<action>
				<condition var1="tw_filename" op="modified"/>
				<action function="page">flash_confirm</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">flash_confirm</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="flash_zip">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<condition var1="tw_aroma" op="!=" var2="AROMA Filemanager"/>
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_zip_hdr=Install Zip}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_aroma" var2="{@tw_aroma_btn=AROMA Filemanager}" />
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@working=Working...}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_aroma" op="!=" var2="{@tw_aroma_btn=AROMA Filemanager}" />
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@install_zip_count_hdr=Installing file %tw_zip_index% of %tw_zip_queue_count%}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_aroma" var2="{@tw_aroma_btn=AROMA Filemanager}" />
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@run_aromafm=Run}</text>
			</text>

			<text style="text_ab_subtitle">
				<condition var1="tw_aroma" op="!=" var2="{@tw_aroma_btn=AROMA Filemanager}" />
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_file%</text>
			</text>

			<text style="text_ab_subtitle">
				<condition var1="tw_aroma" var2="{@tw_aroma_btn=AROMA Filemanager}" />
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_aroma%</text>
			</text>

			<template name="action_page_console"/>

			<action>
				<condition var1="tw_aroma" op="!=" var2="{@tw_aroma_btn=AROMA Filemanager}" />
				<condition var1="tw_operation_state" var2="1"/>
				<action function="page">flash_done</action>
			</action>

			<action>
				<condition var1="tw_aroma" var2="{@tw_aroma_btn=AROMA Filemanager}" />
				<condition var1="tw_operation_state" var2="1"/>
				<actions>
				<action function="set">tw_signed_zip_verify=%tw_signed_zip_verify_temp%</action>
				<action function="set">tw_screen_timeout_secs=%tw_screen_timeout_temp%</action>
				<action function="set">tw_aroma=</action>
				<action function="page">main</action>
				</actions>
			</action>
		</page>

		<page name="flash_image">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_image_hdr=Install Image}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_action_text1%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_action_text2%</text>
			</text>

			<template name="action_page_console"/>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
				</conditions>
				<actions>
					<action function="page">flash_image_done</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="!=" var2="0"/>
				</conditions>
				<actions>
					<action function="page">flash_image_done</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="0"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="1"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
					<action function="%tw_action2%">%tw_action2_param%</action>
				</actions>
			</action>
		</page>

		<page name="flash_done">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<condition var1="tw_file" op="!=" var2="{@tw_aroma_btn=AROMA Filemanager}" />
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_zip_hdr=Install Zip}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_file" var2="{@tw_aroma_btn=AROMA Filemanager}"/>
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@working=Working...}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@failed=Failed}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@successful=Successful}</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@wipe_cache_btn=WIPE CACHES}</text>
				<actions>
					<action function="set">tw_back=flash_done</action>
					<action function="set">tw_action=wipe</action>
					<action function="set">tw_action_param=/cache</action>
					<action function="set">tw_has_action2=1</action>
					<action function="set">tw_action2=wipe</action>
					<action function="set">tw_action2_param=dalvik</action>
					<action function="set">tw_text1={@wipe_cache_dalvik_confirm=Wipe Cache &amp; Dalvik?}</action>
					<action function="set">tw_action_text1={@wiping_cache_dalvik=Wiping Cache &amp; Dalvik...}</action>
					<action function="set">tw_complete_text1={@wipe_cache_dalvik_complete=Cache &amp; Dalvik Wipe Complete}</action>
					<action function="set">tw_slider_text={@swipe_wipe=Swipe to Wipe}</action>
					<action function="page">confirm_action</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@reboot_system_btn=REBOOT SYSTEM}</text>
				<actions>
					<action function="set">tw_back=main2</action>
					<action function="page">reboot_system_routine</action>
				</actions>
			</button>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=install</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_install_reboot" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
					<condition var1="tw_reboot_system" var2="1"/>
				</conditions>
				<actions>
					<action function="set">tw_sleep=%tw_sleep_total%</action>
					<action function="page">flash_sleep_and_reboot</action>
				</actions>
			</action>
		</page>

		<page name="flash_sleep_and_reboot">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<condition var1="tw_file" op="!=" var2="{@tw_aroma_btn=AROMA Filemanager}" />
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_zip_hdr=Install Zip}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_file" var2="{@tw_aroma_btn=AROMA Filemanager}"/>
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@working=Working...}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@failed=Failed}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@successful=Successful}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@install_reboot=Rebooting in %tw_sleep% second(s)}</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@cancel_reboot_btn=CANCEL REBOOT}</text>
				<actions>
					<action function="set">tw_install_reboot=0</action>
					<action function="page">flash_done</action>
				</actions>
			</button>

			<action>
				<conditions>
					<condition var1="tw_sleep" var2="tw_sleep_total"/>
					<condition var1="tw_install_reboot" var2="1"/>
				</conditions>
				<action function="sleepcounter">%tw_sleep_total%</action>
			</action>

			<action>
				<conditions>
					<condition var1="tw_sleep" var2="0"/>
					<condition var1="tw_install_reboot" var2="1"/>
				</conditions>
				<actions>
					<action function="sleep">50000</action>
					<action function="set">tw_back=main2</action>
					<action function="page">reboot_system_routine</action>
				</actions>
			</action>
		</page>

		<page name="flash_image_done">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@install_image_hdr=Install Image}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@failed=Failed}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@successful=Successful}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_complete_text1%</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@reboot_recovery_btn=REBOOT RECOVERY}</text>
				<actions>
					<action function="set">tw_back=main</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_reboot_param=recovery</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@reboot_system_btn=REBOOT SYSTEM}</text>
				<actions>
					<action function="set">tw_back=main2</action>
					<action function="page">reboot_system_routine</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=install_image</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>
		</page>

		<page name="clear_vars">
			<action>
				<action function="set">tw_operation_state=0</action>
				<action function="set">tw_text1=</action>
				<action function="set">tw_text2=</action>
				<action function="set">tw_text3=</action>
				<action function="set">tw_text4=</action>
				<action function="set">tw_action_text1=</action>
				<action function="set">tw_action_text2=</action>
				<action function="set">tw_action_param=</action>
				<action function="set">tw_has_action2=0</action>
				<action function="set">tw_action2=</action>
				<action function="set">tw_action2_param=</action>
				<action function="set">tw_has_cancel=0</action>
				<action function="set">tw_cancel_action=</action>
				<action function="set">tw_cancel_param=</action>
				<action function="set">tw_show_exclamation=0</action>
				<action function="set">tw_show_reboot=0</action>
				<action function="page">%tw_clear_destination%</action>
			</action>
		</page>

		<page name="reboot_system_routine">
			<action>
				<action function="set">tw_action=reboot</action>
				<action function="set">tw_action_param=system</action>
				<action function="set">tw_has_action2=0</action>
				<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
				<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
				<action function="set">tw_text3=</action>
				<action function="set">tw_text4=</action>
				<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
				<action function="set">tw_action_text2=</action>
				<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
				<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
				<action function="page">rebootcheck</action>
			</action>
		</page>

		<page name="confirm_action">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@confirm_action=Confirm Action}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_text1%</text>
			</text>

			<image>
				<condition var1="tw_action" var2="fixpermissions"/>
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<condition var1="tw_action" var2="fixpermissions"/>
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>%tw_text2%</text>
			</text>

			<text style="text_body2_hl">
				<condition var1="tw_action" op="!=" var2="fixpermissions"/>
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_text2%</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>%tw_text3%</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>%tw_text4%</text>
			</text>

			<text style="caption">
				<condition var1="tw_action" var2="copylog"/>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@options_cptn=Options}</text>
			</text>

			<checkbox style="checkbox_big">
				<condition var1="tw_action" var2="copylog"/>
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>{@include_kernel_log=Include Kernel Log}</text>
				<data variable="tw_include_kernel_log" value="1"/>
			</checkbox>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>%tw_slider_text%</text>
			</text>

			<slider>
				<action function="page">action_page</action>
			</slider>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="action_page">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<condition var1="tw_action" op="!=" var2="adbsideload"/>
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@working=Working...}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_action" var2="adbsideload"/>
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@adb_sideload_hdr=ADB Sideload}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_action_text1%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_action_text2%</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised_hl">
				<condition var1="tw_has_cancel" var2="1"/>
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@cancel_btn=CANCEL}</text>
				<action function="%tw_cancel_action%">%tw_cancel_param%</action>
			</button>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
				</conditions>
				<actions>
					<action function="page">action_complete</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="!=" var2="0"/>
				</conditions>
				<actions>
					<action function="page">action_complete</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="0"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="1"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
					<action function="%tw_action2%">%tw_action2_param%</action>
				</actions>
			</action>
		</page>

		<page name="singleaction_page">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@working=Working...}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_action_text1%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_action_text2%</text>
			</text>

			<template name="action_page_console"/>

			<action>
				<condition var1="tw_operation_state" var2="1"/>
				<actions>
					<action function="set">tw_page_done=1</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="0"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="1"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
					<action function="%tw_action2%">%tw_action2_param%</action>
				</actions>
			</action>
		</page>

		<page name="action_complete">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<condition var1="tw_action" op="!=" var2="adbsideload"/>
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@done=Done}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_action" var2="adbsideload"/>
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@adb_sideload_hdr=ADB Sideload}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@failed=Failed}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@successful=Successful}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_complete_text1%</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@back_btn=BACK}</text>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@reboot_system_btn=REBOOT SYSTEM}</text>
				<actions>
					<action function="set">tw_back=main2</action>
					<action function="page">reboot_system_routine</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>
		</page>

		<page name="reboot">
			<template name="body"/>

			<template name="ab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@reboot_hdr=Reboot}</text>
			</text>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_system" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row1_y%"/>
				<image resource="mb_system"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_system" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row1_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_system" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row1_y%"/>
				<image resource="mb_system_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_system" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row1_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<condition var1="tw_reboot_system" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row1_text_y%"/>
				<text>{@rb_system_btn=System}</text>
			</text>

			<button style="mb_btn">
				<condition var1="tw_reboot_system" var2="1"/>
				<placement x="%col1_x%" y="%mb_row1_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="page">reboot_system_routine</action>
				</actions>
			</button>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row2_y%"/>
				<image resource="mb_recovery"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row2_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row2_y%"/>
				<image resource="mb_recovery_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row2_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<condition var1="tw_reboot_recovery" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row2_text_y%"/>
				<text>{@rb_recovery_btn=Recovery}</text>
			</text>

			<button style="mb_btn">
				<condition var1="tw_reboot_recovery" var2="1"/>
				<placement x="%col1_x%" y="%mb_row2_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_action_param=recovery</action>
					<action function="set">tw_reboot_param=recovery</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_bootloader"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row3_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_bootloader_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row3_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<conditions>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%mb_row3_text_y%"/>
				<text>{@rb_bootloader_btn=Bootloader}</text>
			</text>

			<button style="mb_btn">
				<conditions>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row3_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_action_param=bootloader</action>
					<action function="set">tw_reboot_param=bootloader</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_bootloader"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row3_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_bootloader_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row3_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<conditions>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%mb_row3_text_y%"/>
				<text>{@rb_download_btn=Download}</text>
			</text>

			<button style="mb_btn">
				<conditions>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row3_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_action_param=download</action>
					<action function="set">tw_reboot_param=download</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_bootloader"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row3_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_bootloader_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row3_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<conditions>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%mb_row3_text_y%"/>
				<text>{@rb_bootloader_btn=Bootloader}</text>
			</text>

			<button style="mb_btn">
				<conditions>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row3_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_action_param=bootloader</action>
					<action function="set">tw_reboot_param=bootloader</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_bootloader"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row4_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_bootloader_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row4_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<conditions>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%mb_row4_text_y%"/>
				<text>{@rb_download_btn=Download}</text>
			</text>

			<button style="mb_btn">
				<conditions>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row4_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_action_param=download</action>
					<action function="set">tw_reboot_param=download</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_theme"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row4_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_theme_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row4_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<condition var1="tw_download_mode" op="!=" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row4_text_y%"/>
				<text>{@rb_theme=Theme}</text>
			</text>

			<button style="mb_btn">
				<condition var1="tw_download_mode" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%mb_row4_y%" w="%content_w%" h="%mb_h%"/>
				<action function="reload"/>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_theme"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row4_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_theme_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row4_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row4_text_y%"/>
				<text>{@rb_theme=Theme}</text>
			</text>

			<button style="mb_btn">
				<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%mb_row4_y%" w="%content_w%" h="%mb_h%"/>
				<action function="reload"/>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_theme"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row5_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_theme_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row5_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<conditions>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%mb_row5_text_y%"/>
				<text>{@rb_theme=Theme}</text>
			</text>

			<button style="mb_btn">
				<conditions>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row5_y%" w="%content_w%" h="%mb_h%"/>
				<action function="reload"/>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_poweroff"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row5_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_poweroff_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row5_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<conditions>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%mb_row5_text_y%"/>
				<text>{@rb_poweroff_btn=Power Off}</text>
			</text>

			<button style="mb_btn">
				<conditions>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_download_mode" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row5_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_action_param=poweroff</action>
					<action function="set">tw_reboot_param=poweroff</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_ospo=Are you sure you wish to power off?}</action>
					<action function="set">tw_action_text1={@turning_off=Turning Off...}</action>
					<action function="set">tw_complete_text1={@turning_off=Turning Off...}</action>
					<action function="set">tw_slider_text={@swipe_power_off=Swipe to Power Off}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_poweroff"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row5_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_poweroff_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row5_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<conditions>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%mb_row5_text_y%"/>
				<text>{@rb_poweroff_btn=Power Off}</text>
			</text>

			<button style="mb_btn">
				<conditions>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" op="!=" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row5_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_action_param=poweroff</action>
					<action function="set">tw_reboot_param=poweroff</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_ospo=Are you sure you wish to power off?}</action>
					<action function="set">tw_action_text1={@turning_off=Turning Off...}</action>
					<action function="set">tw_complete_text1={@turning_off=Turning Off...}</action>
					<action function="set">tw_slider_text={@swipe_power_off=Swipe to Power Off}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row6_y%"/>
				<image resource="mb_poweroff"/>
			</image>

			<fill color="%accent%">
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%mb_icon_x%" y="%mb_row6_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row6_y%"/>
				<image resource="mb_poweroff_color"/>
			</image>

			<image>
				<conditions>
					<condition var1="menu_btn_solid" var2="1"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_neg%" y="%mb_row6_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<conditions>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%mb_row6_text_y%"/>
				<text>{@rb_poweroff_btn=Power Off}</text>
			</text>

			<button style="mb_btn">
				<conditions>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x%" y="%mb_row6_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_action_param=poweroff</action>
					<action function="set">tw_reboot_param=poweroff</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_ospo=Are you sure you wish to power off?}</action>
					<action function="set">tw_action_text1={@turning_off=Turning Off...}</action>
					<action function="set">tw_complete_text1={@turning_off=Turning Off...}</action>
					<action function="set">tw_slider_text={@swipe_power_off=Swipe to Power Off}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row2_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row3_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row4_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row5_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<conditions>
					<condition var1="menu_btn_solid" var2="0"/>
					<condition var1="tw_reboot_poweroff" var2="1"/>
					<condition var1="tw_reboot_bootloader" var2="1"/>
					<condition var1="tw_download_mode" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%mb_row6_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<text style="caption">
				<condition var1="tw_has_boot_slots" var2="1"/>
				<placement x="%col1_x%" y="%row7_2_y%"/>
				<text>{@boot_slot=Boot Slot}</text>
			</text>

			<button style="btn_raised_hl">
				<conditions>
					<condition var1="tw_has_boot_slots" var2="1"/>
					<condition var1="tw_active_slot" var2="A"/>
				</conditions>
				<placement x="%btn_raised_left_x%" y="%row7_3_y%"/>
				<text>{@boot_slot_a=SLOT A}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=A</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<button style="btn_raised">
				<conditions>
					<condition var1="tw_has_boot_slots" var2="1"/>
					<condition var1="tw_active_slot" var2="B"/>
				</conditions>
				<placement x="%btn_raised_left_x%" y="%row7_3_y%"/>
				<text>{@boot_slot_use_a=SWITCH TO SLOT A}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=A</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<conditions>
					<condition var1="tw_has_boot_slots" var2="1"/>
					<condition var1="tw_active_slot" var2="B"/>
				</conditions>
				<placement x="%btn_raised_right_x%" y="%row7_3_y%" placement="1"/>
				<text>{@boot_slot_b=SLOT B}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=B</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<button style="btn_raised">
				<conditions>
					<condition var1="tw_has_boot_slots" var2="1"/>
					<condition var1="tw_active_slot" var2="A"/>
				</conditions>
				<placement x="%btn_raised_right_x%" y="%row7_3_y%" placement="1"/>
				<text>{@boot_slot_use_b=SWITCH TO SLOT B}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=B</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="filecheck">
			<action>
				<action function="fileexists">%tw_filecheck%</action>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_fileexists=1</action>
					<action function="page">%tw_existpage%</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="1"/>
				</conditions>
				<actions>
					<action function="set">tw_fileexists=0</action>
					<action function="page">%tw_notexistpage%</action>
				</actions>
			</action>
		</page>

		<page name="themecheck">
			<action>
				<action function="fileexists">%tw_filecheck%</action>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_themeexists=1</action>
					<action function="set">inject_theme=0</action>
					<action function="page">theme_settings</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="1"/>
				</conditions>
				<actions>
					<action function="set">tw_themeexists=0</action>
					<action function="page">themecheck2</action>
				</actions>
			</action>
		</page>

		<page name="themecheck2">
			<action>
				<condition var1="inject_theme" var2="0"/>
				<action function="page">theme_path_select</action>
			</action>

			<action>
				<condition var1="inject_theme" var2="1"/>
				<action function="page">theme_settings</action>
			</action>
		</page>

		<page name="rebootcheck">
			<action>
				<condition var1="tw_backup_system_size" op="&gt;=" var2="%tw_min_system%"/>
				<action function="page">appcheck</action>
			</action>

			<action>
				<condition var1="tw_backup_system_size" op="&lt;" var2="%tw_min_system%"/>
				<action function="page">confirm_action</action>
			</action>
		</page>

		<page name="appcheck">
			<action>
				<condition var1="tw_app_prompt" var2="1"/>
				<action function="checkforapp"></action>
			</action>

			<action>
				<condition var1="tw_app_prompt" op="!=" var2="1"/>
				<action function="reboot">%tw_reboot_param%</action>
			</action>

			<action>
				<condition var1="tw_app_install_status" var2="1"/>
				<action function="page">installapp</action>
			</action>

			<action>
				<condition var1="tw_app_install_status" var2="2"/>
				<action function="reboot">%tw_reboot_param%</action>
			</action>
		</page>

		<page name="wipe">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@wipe_hdr=Wipe}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@factory_reset_hdr=Factory Reset}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@factory_reset1=Wipes Data, Cache, and Dalvik}</text>
			</text>

			<text style="text_body2_hl">
				<condition var1="tw_has_data_media" var2="1"/>
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>{@factory_reset2=(not including internal storage)}</text>
			</text>

			<text style="text_body2_hl">
				<conditions>
					<condition var1="tw_has_android_secure" var2="1"/>
					<condition var1="fileexists" var2="/and-sec"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%row3_1_y%"/>
				<text>{@also_wipes=Also wipes} {@android_secure=Android Secure}</text>
			</text>

			<text style="text_body2_hl">
				<condition var1="tw_has_sdext_partition" var2="1"/>
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@also_wipes=Also wipes} {@sdext=SD-EXT}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row4_1_y%"/>
				<text>{@factory_reset3=Most of the time this is}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row4_2_y%"/>
				<text>{@factory_reset4=the only wipe that you need.}</text>
			</text>

			<button style="btn_raised_warn">
				<condition var1="tw_has_data_media" var2="1"/>
				<placement x="%btn_raised_left_x%" y="%row6_3_y%"/>
				<text>{@format_data_btn=FORMAT DATA}</text>
				<actions>
					<action function="page">formatdata</action>
				</actions>
			</button>

			<button style="btn_raised_warn">
				<conditions>
					<condition var1="tw_is_encrypted" var2="1"/>
					<condition var1="tw_has_data_media" var2="0"/>
				</conditions>
				<placement x="%btn_raised_left_x%" y="%row6_3_y%"/>
				<text>{@wipe_enc_btn=WIPE ENCRYPTION}</text>
				<actions>
					<action function="set">tw_back=wipe</action>
					<action function="set">tw_action=wipe</action>
					<action function="set">tw_action_param=DATAMEDIA</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@wipe_enc_confirm=Wipe Encryption from Data?}</action>
					<action function="set">tw_text2=</action>
					<action function="set">tw_action_text1={@formatting_data=Formatting Data...}</action>
					<action function="set">tw_complete_text1={@format_data_complete=Data Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_format_data=Swipe to Format Data}</action>
					<action function="page">wipe_confirm_action</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row6_3_y%" placement="1"/>
				<text>{@advanced_wipe_btn=ADVANCED WIPE}</text>
				<actions>
					<action function="set">partitionlisterror=0</action>
					<action function="page">advancedwipe</action>
				</actions>
			</button>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_factory_reset=Swipe to Factory Reset}</text>
			</text>

			<slider>
				<actions>
					<action function="set">tw_back=wipe</action>
					<action function="set">tw_action=wipe</action>
					<action function="set">tw_action_param=data</action>
					<action function="set">tw_action_text1={@factory_reset_hdr=Factory Reset}</action>
					<action function="set">tw_action_text2={@factory_resetting=Wiping Data, Cache and Dalvik...}</action>
					<action function="set">tw_complete_text1={@factory_reset_complete=Factory Reset Complete}</action>
					<action function="page">wipe_action_page</action>
				</actions>
			</slider>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="advancedwipe">
			<action>
				<action function="set">tw_wipe_list=</action>
			</action>

			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@wipe_hdr=Wipe}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@advanced_wipe_hdr=Advanced Wipe}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@sel_part_hdr=Select Partitions}</text>
			</text>

			<image>
				<condition var1="partitionlisterror" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<condition var1="partitionlisterror" op="!=" var2="1"/>
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@sel_part_single1=Single select partitions if you want}</text>
			</text>

			<text style="text_body2_hl">
				<condition var1="partitionlisterror" op="!=" var2="1"/>
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>{@sel_part_single2=to use the Partition Options!}</text>
			</text>

			<image>
				<condition var1="partitionlisterror" var2="1"/>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_warning"/>
			</image>

			<text style="text_body2_fail">
				<condition var1="partitionlisterror" var2="1"/>
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@part_fs_error_1=Partition Options are not}</text>
			</text>

			<text style="text_body2_fail">
				<condition var1="partitionlisterror" var2="1"/>
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>{@part_fs_error_2=available for this partition!}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>{@partitions=Partitions}</text>
			</text>

			<partitionlist>
				<placement x="%col1_x%" y="%row3_3_y%" w="%listbox_w%" h="%fileselector_part_height%"/>
				<data name="tw_wipe_list"/>
				<listtype name="wipe"/>
			</partitionlist>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row6_3_y%" placement="1"/>
				<text>{@file_sys_opt=PARTITION OPTIONS}</text>
				<actions>
					<action function="checkpartitionlist"/>
					<action function="page">checkpartitionlist</action>
				</actions>
			</button>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_wipe=Swipe to Wipe}</text>
			</text>

			<slider>
				<actions>
					<action function="set">tw_back=advancedwipe</action>
					<action function="set">tw_action=wipe</action>
					<action function="set">tw_action_param=LIST</action>
					<action function="set">tw_text1={@wipe_sel_confirm=Wipe Selected Partition(s)?}</action>
					<action function="set">tw_action_text1=Wipe</action>
					<action function="set">tw_action_text2={@wiping_part=Wiping Partition(s)...}</action>
					<action function="set">tw_complete_text1={@wipe_complete=Wipe complete}</action>
					<action function="page">wipe_action_page</action>
				</actions>
			</slider>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">wipe</action>
			</action>
		</page>

		<page name="formatdata">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@wipe_hdr=Wipe}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@factory_reset_hdr=Factory Reset}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@format_data_hdr=Format Data}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_warning"/>
			</image>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@format_data_ptr1=Format Data will wipe all of your apps,}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>{@format_data_ptr2=backups, pictures, videos, media, and}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row3_1_y%"/>
				<text>{@format_data_ptr3=removes encryption on internal storage.}</text>
			</text>

			<text style="text_body2_fail">
				<condition var1="tw_has_adopted_storage" var2="1"/>
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@also_wipes=Also wipes} {@adopted_storage=Adopted Storage}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_3_y%"/>
				<text>{@yes_continue=Type "yes" to confirm.}</text>
			</text>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row4_2_y%"/>
				<text>{@confirm_wipe_cptn=Confirm Wipe}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_format_y%" w="%input_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_confirm_formatdata%</text>
				<data name="tw_confirm_formatdata"/>
				<restrict minlen="3" maxlen="3" allow="yes"/>
				<action function="page">formatdata_confirm</action>
			</input>

			<fill color="%accent%">
				<placement x="%col1_x%" y="%row5_1_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">wipe</action>
			</action>
		</page>

		<page name="formatdata_confirm">
			<action>
				<condition var1="tw_confirm_formatdata" op="=" var2="yes"/>
				<actions>
					<action function="set">tw_back=formatdata</action>
					<action function="set">tw_action=wipe</action>
					<action function="set">tw_action_param=DATAMEDIA</action>
					<action function="set">tw_action_text1={@formatting_data=Formatting Data...}</action>
					<action function="set">tw_complete_text1={@format_data_complete=Data Format Complete}</action>
					<action function="page">wipe_action_page</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_confirm_formatdata" op="!=" var2="yes"/>
				<action function="page">formatdata</action>
			</action>
		</page>

		<page name="checkpartitionlist">
			<action>
				<condition var1="tw_check_partition_list" op="=" var2="1"/>
				<actions>
					<action function="set">partitionlisterror=0</action>
					<action function="getpartitiondetails"/>
					<action function="page">partitionoptions</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_check_partition_list" op="!=" var2="1"/>
				<actions>
					<action function="set">partitionlisterror=1</action>
					<action function="set">tw_wipe_list=</action>
					<action function="page">advancedwipe</action>
				</actions>
			</action>
		</page>

		<page name="partitionoptions">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@wipe_hdr=Wipe}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@advanced_wipe_hdr=Advanced Wipe}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@part_opt_hdr=Partition Options for %tw_partition_name%}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@part_mount_point=Mount Point:}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_partition_mount_point%</text>
			</text>

			<text style="caption">
				<placement x="%col2_x%" y="%row2_2_y%"/>
				<text>{@part_curr_fs=File system:}</text>
			</text>

			<text style="text_body2">
				<placement x="%col2_x%" y="%row2_3_y%"/>
				<text>%tw_partition_file_system%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>{@part_present=Present:}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_partition_is_present" op="!=" var2="0"/>
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>{@part_yes=Yes}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_partition_is_present" op="=" var2="0"/>
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>{@part_no=No}</text>
			</text>

			<text style="caption">
				<placement x="%col2_x%" y="%row3_2_y%"/>
				<text>{@part_removable=Removable:}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_partition_removable" op="!=" var2="0"/>
				<placement x="%col2_x%" y="%row3_3_y%"/>
				<text>{@part_yes=Yes}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_partition_removable" op="=" var2="0"/>
				<placement x="%col2_x%" y="%row3_3_y%"/>
				<text>{@part_no=No}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row4_2_y%"/>
				<text>{@part_size=Size:}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row4_3_y%"/>
				<text>%tw_partition_size%MB</text>
			</text>

			<text style="caption">
				<placement x="%col2_x%" y="%row4_2_y%"/>
				<text>{@part_backup_size=Backup Size:}</text>
			</text>

			<text style="text_body2">
				<placement x="%col2_x%" y="%row4_3_y%"/>
				<text>%tw_partition_backup_size%MB</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row5_2_y%"/>
				<text>{@part_used=Used:}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row5_3_y%"/>
				<text>%tw_partition_used%MB</text>
			</text>

			<text style="caption">
				<placement x="%col2_x%" y="%row5_2_y%"/>
				<text>{@part_free=Free:}</text>
			</text>

			<text style="text_body2">
				<placement x="%col2_x%" y="%row5_3_y%"/>
				<text>%tw_partition_free%MB</text>
			</text>

			<button style="btn_raised">
				<condition var1="tw_partition_can_resize" op="=" var2="1"/>
				<placement x="%btn_raised_left_x%" y="%row7_1_y%"/>
				<text>{@resize_btn=RESIZE FS}</text>
				<actions>
					<action function="set">tw_back=partitionoptions</action>
					<action function="set">tw_action=resize</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_has_action2=1</action>
					<action function="set">tw_action2=getpartitiondetails</action>
					<action function="set">tw_text1={@resize_confirm=Resize %tw_partition_name%?}</action>
					<action function="set">tw_text2=</action>
					<action function="set">tw_action_text1={@resizing=Resizing...}</action>
					<action function="set">tw_complete_text1={@resize_complete=Resize Complete}</action>
					<action function="set">tw_slider_text={@swipe_resize=Swipe to Resize}</action>
					<action function="page">wipe_confirm_action</action>
				</actions>
			</button>

			<button style="btn_raised">
				<condition var1="tw_partition_can_repair" op="=" var2="1"/>
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@repair_btn=REPAIR FS}</text>
				<actions>
					<action function="set">tw_back=partitionoptions</action>
					<action function="set">tw_action=repair</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@repair_confirm=Repair %tw_partition_name%?}</action>
					<action function="set">tw_text2=</action>
					<action function="set">tw_action_text1={@repairing=Repairing...}</action>
					<action function="set">tw_complete_text1={@repair_complete=Repair Complete}</action>
					<action function="set">tw_slider_text={@swipe_repair=Swipe to Repair}</action>
					<action function="page">wipe_confirm_action</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@change_fs_btn=CHANGE FS}</text>
				<action function="page">selectfilesystem</action>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">advancedwipe</action>
			</action>
		</page>

		<page name="refreshfilesystem">
			<action>
				<condition var1="tw_check_partition_list" op="=" var2="1"/>
				<actions>
					<action function="set">partitionlisterror=0</action>
					<action function="getpartitiondetails"/>
					<action function="page">selectfilesystem</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_check_partition_list" op="!=" var2="1"/>
				<actions>
					<action function="set">partitionlisterror=1</action>
					<action function="set">tw_wipe_list=</action>
					<action function="page">advancedwipe</action>
				</actions>
			</action>
		</page>

		<page name="selectfilesystem">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<action>
				<action function="set">tw_action_new_file_system=_</action>
			</action>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@wipe_hdr=Wipe}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@advanced_wipe_hdr=Advanced Wipe}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@change_fs_hdr=Change File System for %tw_partition_name%}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@part_mount_point=Mount Point:}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_partition_mount_point%</text>
			</text>

			<text style="caption">
				<placement x="%col2_x%" y="%row2_2_y%"/>
				<text>{@part_curr_fs=File system:}</text>
			</text>

			<text style="text_body2">
				<placement x="%col2_x%" y="%row2_3_y%"/>
				<text>%tw_partition_file_system%</text>
			</text>

			<image>
				<condition var1="tw_partition_is_present" op="!=" var2="0"/>
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<image resource="icon_warning"/>
			</image>

			<text style="text_body2_fail">
				<condition var1="tw_partition_is_present" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@change_fs_warn1=Some ROMs or kernels may not support}</text>
			</text>

			<text style="text_body2_fail">
				<condition var1="tw_partition_is_present" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row3_3_y%"/>
				<text>{@change_fs_warn2=some file systems. Proceed with caution!}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row4_2_y%"/>
				<text>{@new_file_system=New File System}</text>
			</text>

			<button>
				<condition var1="tw_action_new_file_system" op="!=" var2="ext2"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col1_x%" y="%row4_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>EXT2          </text>
				<image resource="radio_false"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=ext2</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=EXT2</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="=" var2="ext2"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col1_x%" y="%row4_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>EXT2          </text>
				<image resource="radio_true"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=ext2</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=EXT2</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="!=" var2="ext3"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col1_x%" y="%row5_1a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>EXT3          </text>
				<image resource="radio_false"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=ext3</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=EXT3</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="=" var2="ext3"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col1_x%" y="%row5_1a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>EXT3          </text>
				<image resource="radio_true"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=ext3</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=EXT3</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="!=" var2="ext4"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col1_x%" y="%row5_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>EXT4          </text>
				<image resource="radio_false"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=ext4</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=EXT4</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="=" var2="ext4"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col1_x%" y="%row5_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>EXT4          </text>
				<image resource="radio_true"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=ext4</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=EXT4</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="!=" var2="fat"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col2_x%" y="%row4_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>FAT          </text>
				<image resource="radio_false"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=fat</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=FAT</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="=" var2="fat"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col2_x%" y="%row4_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>FAT          </text>
				<image resource="radio_true"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=fat</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=FAT</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="!=" var2="exfat"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col2_x%" y="%row5_1a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>exFAT          </text>
				<image resource="radio_false"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=exfat</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=exFAT</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="=" var2="exfat"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col2_x%" y="%row5_1a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>exFAT          </text>
				<image resource="radio_true"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=exfat</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=exFAT</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="!=" var2="ntfs"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col2_x%" y="%row5_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>NTFS          </text>
				<image resource="radio_false"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=ntfs</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=NTFS</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<button>
				<condition var1="tw_action_new_file_system" op="=" var2="ntfs"/>
				<condition var1="tw_partition_ext" op="=" var2="1"/>
				<placement x="%col2_x%" y="%row5_3_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>NTFS          </text>
				<image resource="radio_true"/>
				<actions>
					<action function="set">tw_back=refreshfilesystem</action>
					<action function="set">tw_action=changefilesystem</action>
					<action function="set">tw_action_param=%tw_partition_mount_point%</action>
					<action function="set">tw_action_new_file_system=ntfs</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@change_fs_confirm=Change %tw_partition_name%?}</action>
					<action function="set">tw_text2=NTFS</action>
					<action function="set">tw_action_text1={@formatting=Formatting...}</action>
					<action function="set">tw_complete_text1={@format_complete=Format Complete}</action>
					<action function="set">tw_slider_text={@swipe_change_fs=Swipe to Change}</action>
				</actions>
			</button>

			<text style="caption">
				<condition var1="tw_action_new_file_system" op="!=" var2="_"/>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>%tw_slider_text%</text>
			</text>

			<slider>
				<condition var1="tw_action_new_file_system" op="!=" var2="_"/>
				<action function="page">wipe_action_page</action>
			</slider>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">partitionoptions</action>
			</action>
		</page>

		<page name="wipe_confirm_action">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@wipe_hdr=Wipe}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_text1%</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_text2%</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>%tw_text3%</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>%tw_text4%</text>
			</text>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>%tw_slider_text%</text>
			</text>

			<slider>
				<action function="page">wipe_action_page</action>
			</slider>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="wipe_action_page">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@wipe_hdr=Wipe}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_action_text1%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_action_text2%</text>
			</text>

			<template name="action_page_console"/>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
				</conditions>
				<actions>
					<action function="page">wipe_action_complete</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="!=" var2="0"/>
				</conditions>
				<actions>
					<action function="page">wipe_action_complete</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="0"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="1"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
					<action function="%tw_action2%">%tw_action2_param%</action>
				</actions>
			</action>
		</page>

		<page name="wipe_action_complete">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@wipe_hdr=Wipe}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@failed=Failed}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@successful=Successful}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_complete_text1%</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@back_btn=BACK}</text>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@reboot_system_btn=REBOOT SYSTEM}</text>
				<actions>
					<action function="set">tw_back=main2</action>
					<action function="page">reboot_system_routine</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="page">advancedwipe</action>
				</actions>
			</action>
		</page>

		<page name="backup">
			<template name="body"/>

			<template name="ab_tab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@backup_hdr=Backup}</text>
			</text>

			<image>
				<placement x="%tab3_col1_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_create_a"/>
			</image>

			<button>
				<placement x="%center_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_options"/>
				<action function="page">backup_options</action>
			</button>

			<button>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="0"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_dis"/>
				<actions>
					<action function="set">tw_password_not_match=0</action>
					<action function="page">backup_encryption1</action>
				</actions>
			</button>

			<button>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="1"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_ena"/>
				<actions>
					<action function="set">tw_password_not_match=0</action>
					<action function="page">backup_encryption1</action>
				</actions>
			</button>

			<fill color="%text_actionbar%">
				<placement x="0" y="%tab_indicator_y%" w="%tab3_width%" h="%tab_indicator_height%"/>
			</fill>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_1_y%"/>
				<text>{@name=Name}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>%tw_backup_name%</text>
			</text>

			<fill color="%linecolor%">
				<placement x="%col1_x%" y="%row2_3_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<button>
				<placement x="%col1_x%" y="%row2_1_y%" w="%content_w%" h="%mb_h%"/>
				<fill color="%transparent%"/>
				<actions>
					<action function="set">tw_fileexists=0</action>
					<action function="page">backupname1</action>
				</actions>
			</button>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_1_y%"/>
				<text>{@storage_cptn=Storage}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>%tw_storage_display_name% (%tw_storage_free_size% MB)</text>
			</text>

			<button>
				<placement x="%col1_x%" y="%row3_1_y%" w="%content_w%" h="%mb_h%"/>
				<fill color="%transparent%"/>
				<actions>
					<action function="set">tw_back=backup</action>
					<action function="overlay">dialog_storage</action>
				</actions>
			</button>

			<button>
				<placement x="%ab_btn1_x%" y="%row3_1_y%"/>
				<image resource="actionbar_refresh"/>
				<highlight color="%highlight_color%"/>
				<actions>
					<action function="refreshsizes"/>
					<action function="page">backup</action>
				</actions>
			</button>

			<text style="caption">
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>{@partitions=Partitions}</text>
			</text>

			<partitionlist>
				<placement x="%col1_x%" y="%row4_2_y%" w="%listbox_w%" h="%fileselector_backup_height%"/>
				<data name="tw_backup_list"/>
				<listtype name="backup"/>
			</partitionlist>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_backup=Swipe to Backup}</text>
			</text>

			<slider>
				<action function="page">backup_run</action>
			</slider>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="backup_options">
			<template name="body"/>

			<template name="ab_tab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@backup_hdr=Backup}</text>
			</text>

			<button>
				<placement x="%tab3_col1_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_create"/>
				<action function="page">backup</action>
			</button>

			<image>
				<placement x="%center_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_options_a"/>
			</image>

			<button>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="0"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_dis"/>
				<actions>
					<action function="set">tw_password_not_match=0</action>
					<action function="page">backup_encryption1</action>
				</actions>
			</button>

			<button>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="1"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_ena"/>
				<actions>
					<action function="set">tw_password_not_match=0</action>
					<action function="page">backup_encryption1</action>
				</actions>
			</button>

			<fill color="%text_actionbar%">
				<placement x="tab3_ind2_x" y="%tab_indicator_y%" w="%tab3_width%" h="%tab_indicator_height%"/>
			</fill>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_1_y%"/>
				<text>{@options_hdr=Options}</text>
			</text>

			<listbox style="settingslist">
				<placement x="%col1_x%" y="%row2_2_y%" w="%listbox_w%" h="%listbox_settings_backup_height%"/>
				<listitem name="{@enable_backup_comp_chk=Enable compression}">
					<data variable="tw_use_compression"/>
				</listitem>
				<listitem name="{@skip_digest_backup_chk=Skip Digest generation during backup}">
					<data variable="tw_skip_digest_generate"/>
				</listitem>
				<listitem name="{@disable_backup_space_chk=Disable Free Space Check}">
					<data variable="tw_disable_free_space"/>
				</listitem>
			</listbox>

			<text style="caption">
				<condition var1="tw_has_boot_slots" var2="1"/>
				<placement x="%col1_x%" y="%row4_2_y%"/>
				<text>{@boot_slot=Boot Slot}</text>
			</text>

			<button style="btn_raised_hl">
				<conditions>
					<condition var1="tw_has_boot_slots" var2="1"/>
					<condition var1="tw_active_slot" var2="A"/>
				</conditions>
				<placement x="%btn_raised_left_x%" y="%row4_3_y%"/>
				<text>{@boot_slot_a=SLOT A}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=A</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<button style="btn_raised">
				<conditions>
					<condition var1="tw_has_boot_slots" var2="1"/>
					<condition var1="tw_active_slot" var2="B"/>
				</conditions>
				<placement x="%btn_raised_left_x%" y="%row4_3_y%"/>
				<text>{@boot_slot_use_a=SWITCH TO SLOT A}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=A</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<conditions>
					<condition var1="tw_has_boot_slots" var2="1"/>
					<condition var1="tw_active_slot" var2="B"/>
				</conditions>
				<placement x="%btn_raised_right_x%" y="%row4_3_y%" placement="1"/>
				<text>{@boot_slot_b=SLOT B}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=B</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<button style="btn_raised">
				<conditions>
					<condition var1="tw_has_boot_slots" var2="1"/>
					<condition var1="tw_active_slot" var2="A"/>
				</conditions>
				<placement x="%btn_raised_right_x%" y="%row4_3_y%" placement="1"/>
				<text>{@boot_slot_use_b=SWITCH TO SLOT B}</text>
				<actions>
					<action function="set">tw_back=backup_options</action>
					<action function="set">tw_action=setbootslot</action>
					<action function="set">tw_action_param=B</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action_text1={@changing_boot_slot=Changing Boot Slot}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_complete_text1={@changing_boot_slot_complete=Change Boot Slot Complete}</action>
					<action function="page">action_page</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">backup</action>
			</action>
		</page>

		<page name="backup_encryption1">
			<template name="body"/>

			<template name="ab_tab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@backup_hdr=Backup}</text>
			</text>

			<button>
				<placement x="%tab3_col1_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_create"/>
				<action function="page">backup</action>
			</button>

			<button>
				<placement x="%center_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_options"/>
				<action function="page">backup_options</action>
			</button>

			<image>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="0"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_dis_a"/>
			</image>

			<image>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="1"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_ena_a"/>
			</image>

			<fill color="%text_actionbar%">
				<placement x="tab3_ind3_x" y="%tab_indicator_y%" w="%tab3_width%" h="%tab_indicator_height%"/>
			</fill>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row2_1_y%"/>
				<text>{@password=Password}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_backup_y%" w="%input_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_backup_encrypt_display%</text>
				<data name="tw_backup_password" mask="*" maskvariable="tw_backup_encrypt_display"/>
				<restrict minlen="1" maxlen="32" allow="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_"/>
				<action function="page">backup_encryption2</action>
			</input>

			<fill color="%accent%">
				<condition var1="tw_password_not_match" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%row2_3_y%" w="%input_width%" h="%input_line_height%" placement="1"/>
			</fill>

			<fill color="%text_fail%">
				<condition var1="tw_password_not_match" var2="1"/>
				<placement x="%col1_x%" y="%row2_3_y%" w="%input_width%" h="%input_line_height%" placement="1"/>
			</fill>

			<text style="text_input_fail">
				<condition var1="tw_password_not_match" var2="1"/>
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>{@pass_not_match=Passwords do not match!}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@encrypt_backup1=Enter a password to}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_has_data_media" var2="1"/>
				<placement x="%col1_x_indent%" y="%row3_3_y%"/>
				<text>{@encrypt_backup2=enable backup encryption.}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_has_data_media" var2="1"/>
				<placement x="%col1_x_indent%" y="%row4_1a_y%"/>
				<text>{@encrypt_backup4=Press back button to cancel.}</text>
			</text>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_encrypt_backup=0</action>
					<action function="set">tw_backup_password=</action>
					<action function="set">tw_backup_password2=</action>
					<action function="set">tw_backup_encrypt_display=</action>
					<action function="set">tw_backup_encrypt_display2=</action>
					<action function="page">main</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_encrypt_backup=0</action>
					<action function="set">tw_backup_password=</action>
					<action function="set">tw_backup_password2=</action>
					<action function="set">tw_backup_encrypt_display=</action>
					<action function="set">tw_backup_encrypt_display2=</action>
					<action function="page">backup</action>
				</actions>
			</action>
		</page>

		<page name="backup_encryption2">
			<template name="body"/>

			<template name="ab_tab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@backup_hdr=Backup}</text>
			</text>

			<button>
				<placement x="%tab3_col1_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_create"/>
				<action function="page">backup</action>
			</button>

			<button>
				<placement x="%center_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_options"/>
				<action function="page">backup_options</action>
			</button>

			<image>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="0"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_dis_a"/>
			</image>

			<image>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="1"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_ena_a"/>
			</image>

			<fill color="%text_actionbar%">
				<placement x="tab3_ind3_x" y="%tab_indicator_y%" w="%tab3_width%" h="%tab_indicator_height%"/>
			</fill>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row2_1_y%"/>
				<text>{@password=Password}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_backup_y%" w="%input_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_backup_encrypt_display%</text>
				<data name="tw_backup_password2" mask="*" maskvariable="tw_backup_encrypt_display2"/>
				<restrict minlen="1" maxlen="32" allow="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_"/>
				<action function="page">checkbackuppassword</action>
			</input>

			<fill color="%accent%">
				<placement x="%col1_x%" y="%row2_3_y%" w="%input_width%" h="%input_line_height%" placement="1"/>
			</fill>

			<image>
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@encrypt_backup3=Repeat password to}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_has_data_media" var2="1"/>
				<placement x="%col1_x_indent%" y="%row3_3_y%"/>
				<text>{@encrypt_backup2=enable backup encryption.}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_has_data_media" var2="1"/>
				<placement x="%col1_x_indent%" y="%row4_1a_y%"/>
				<text>{@encrypt_backup4=Press back button to cancel.}</text>
			</text>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_encrypt_backup=0</action>
					<action function="set">tw_backup_password=</action>
					<action function="set">tw_backup_password2=</action>
					<action function="set">tw_backup_encrypt_display=</action>
					<action function="set">tw_backup_encrypt_display2=</action>
					<action function="page">main</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_encrypt_backup=0</action>
					<action function="set">tw_backup_password=</action>
					<action function="set">tw_backup_password2=</action>
					<action function="set">tw_backup_encrypt_display=</action>
					<action function="set">tw_backup_encrypt_display2=</action>
					<action function="page">backup</action>
				</actions>
			</action>
		</page>

		<page name="backupname1">
			<action>
				<condition var1="tw_backup_name" op="=" var2="{@auto_generate=(Auto Generate)}"/>
				<action function="set">tw_backup_name=</action>
				<!--action function="generatebackupname"></action-->
			</action>

			<action>
				<action function="page">backupname2</action>
			</action>
		</page>

		<page name="backupname2">
			<template name="body"/>

			<template name="ab_tab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@backup_hdr=Backup}</text>
			</text>

			<image>
				<placement x="%tab3_col1_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_create_a"/>
			</image>

			<button>
				<placement x="%center_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_options"/>
				<actions>
					<action function="set">tw_backup_name={@auto_generate=(Auto Generate)}</action>
					<action function="page">backup_options</action>
				</actions>
			</button>

			<button>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="0"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_dis"/>
				<actions>
					<action function="set">tw_backup_name={@auto_generate=(Auto Generate)}</action>
					<action function="set">tw_password_not_match=0</action>
					<action function="page">backup_encryption1</action>
				</actions>
			</button>

			<button>
				<conditions>
					<condition var1="tw_include_encrypted_backup" var2="1"/>
					<condition var1="tw_encrypt_backup" var2="1"/>
					<condition var1="tw_enable_adb_backup" op="!=" var2="1"/>
				</conditions>
				<placement x="%tab3_col3_x%" y="%tab_y%" placement="4"/>
				<image resource="tab_bu_encr_ena"/>
				<actions>
					<action function="set">tw_backup_name={@auto_generate=(Auto Generate)}</action>
					<action function="set">tw_password_not_match=0</action>
					<action function="page">backup_encryption1</action>
				</actions>
			</button>

			<fill color="%text_actionbar%">
				<placement x="0" y="%tab_indicator_y%" w="%tab3_width%" h="%tab_indicator_height%"/>
			</fill>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row2_1_y%"/>
				<text>{@name=Name}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_backup_y%" w="%input_backup_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_backup_name%</text>
				<data name="tw_backup_name"/>
				<restrict minlen="1" maxlen="64" allow=" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890-_.{}[]"/>
				<actions>
					<action function="set">tw_filecheck=%tw_backups_folder%/%tw_backup_name%</action>
					<action function="set">tw_existpage=backupname2</action>
					<action function="set">tw_notexistpage=backup</action>
					<action function="page">filecheck</action>
				</actions>
			</input>

			<button>
				<placement x="%ab_btn1_x%" y="%row2_1_y%"/>
				<image resource="actionbar_date"/>
				<action function="appenddatetobackupname"/>
			</button>

			<fill color="%accent%">
				<condition var1="tw_fileexists" var2="0"/>
				<placement x="%col1_x%" y="%row2_3_y%" w="%input_backup_width%" h="%input_line_height%" placement="1"/>
			</fill>

			<fill color="%text_fail%">
				<condition var1="tw_fileexists" var2="1"/>
				<placement x="%col1_x%" y="%row2_3_y%" w="%input_backup_width%" h="%input_line_height%" placement="1"/>
			</fill>

			<text style="text_input_fail">
				<condition var1="tw_fileexists" var2="1"/>
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>{@backup_name_exists=A backup with that name already exists!}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_1_y%"/>
				<text>{@storage_cptn=Storage}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>%tw_storage_display_name% (%tw_storage_free_size% MB)</text>
			</text>

			<image>
				<placement x="%ab_btn1_x%" y="%row3_1_y%"/>
				<image resource="actionbar_refresh"/>
			</image>

			<text style="caption">
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>{@partitions=Partitions}</text>
			</text>

			<partitionlist>
				<placement x="%col1_x%" y="%row4_2_y%" w="%listbox_w%" h="%fileselector_wipe_height%"/>
				<data name="tw_backup_list"/>
				<listtype name="backup"/>
			</partitionlist>

			<button>
				<fill color="%transparent%"/>
				<placement x="0" y="row3_1_y" w="%screen_w%" h="%input_backup_bg_height%"/>
				<font resource="font" color="%text_button%"/>
				<action function="page">backupname1</action>
			</button>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_backup_name={@auto_generate=(Auto Generate)}</action>
					<action function="page">main</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_backup_name={@auto_generate=(Auto Generate)}</action>
					<action function="page">backup</action>
				</actions>
			</action>
		</page>

		<page name="checkbackuppassword">
			<action>
				<condition var1="tw_backup_password2" var2="tw_backup_password"/>
				<actions>
					<action function="set">tw_encrypt_backup=1</action>
					<action function="page">backup</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_backup_password2" op="!=" var2="tw_backup_password"/>
				<actions>
					<action function="set">tw_encrypt_backup=0</action>
					<action function="set">tw_password_not_match=1</action>
					<action function="set">tw_backup_password=</action>
					<action function="set">tw_backup_password2=</action>
					<action function="set">tw_backup_encrypt_display=</action>
					<action function="set">tw_backup_encrypt_display2=</action>
					<action function="page">backup_encryption1</action>
				</actions>
			</action>
		</page>

		<page name="backup_run">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@backup_hdr=Backup}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_operation%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_partition%: %tw_file_progress%</text>
			</text>

			<template name="action_page_console"/>

			<text style="caption">
				<placement x="%col1_x%" y="%row7_1a_y%"/>
				<text>{@progress=Progress}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row7_2a_y%"/>
				<text>%tw_size_progress%</text>
			</text>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@cancel_btn=CANCEL}</text>
				<action function="cancelbackup"/>
			</button>

			<action>
				<action function="nandroid">backup</action>
			</action>

			<action>
				<condition var1="tw_operation_state" var2="1"/>
				<condition var1="tw_cancel_backup" var2="0"/>
				<actions>
					<action function="set">tw_back=backup</action>
					<action function="set">tw_complete_text1={@backup_complete=Backup Complete}</action>
					<action function="set">tw_show_reboot=1</action>
					<action function="page">backup_action_complete</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_operation_state" var2="1"/>
				<condition var1="tw_cancel_backup" var2="1"/>
				<actions>
					<action function="set">tw_back=backup</action>
					<action function="set">tw_complete_text1={@backup_cancel=Backup cancelled}</action>
					<action function="set">tw_show_reboot=1</action>
					<action function="page">backup_action_complete</action>
				</actions>
			</action>
		</page>

		<page name="backup_action_complete">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@backup_hdr=Backup}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@failed=Failed}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@successful=Successful}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_complete_text1%</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@back_btn=BACK}</text>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@reboot_system_btn=REBOOT SYSTEM}</text>
				<actions>
					<action function="set">tw_back=main2</action>
					<action function="page">reboot_system_routine</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>
		</page>

		<page name="restore">
			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter folders="1" files="1" nav="0" extn=".ab"/>
				<path name="tw_backups_folder"/>
				<data name="tw_restore" default=""/>
				<selection name="tw_restore_name"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_install_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter folders="1" files="1" nav="0" extn=".ab"/>
				<path name="tw_backups_folder"/>
				<data name="tw_restore" default=""/>
				<selection name="tw_restore_name"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<button>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_sort" highlightresource="actionbar_sort_hl"/>
				<action function="overlay">menu_sort</action>
			</button>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@sel_backup_hdr=Select Backup}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_storage_display_name% (%tw_storage_free_size% MB)</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row_btn1_y%"/>
				<text>{@select_storage_btn=SELECT STORAGE}</text>
				<actions>
					<action function="set">tw_back=restore</action>
					<action function="overlay">dialog_storage</action>
				</actions>
			</button>

			<action>
				<condition var1="tw_restore" op="modified"/>
				<actions>
					<action function="readBackup"/>
					<action function="page">restore_read</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="restore_read">
			<action>
				<condition var1="tw_restore_encrypted" var2="1"/>
				<actions>
					<action function="set">tw_password_fail=0</action>
					<action function="page">restore_decrypt</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_restore_encrypted" var2="0"/>
				<actions>
					<action function="page">restore_select</action>
				</actions>
			</action>
		</page>

		<page name="restore_decrypt">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<button>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_delete" highlightresource="actionbar_delete_hl"/>
				<actions>
					<action function="set">tw_back=restore_decrypt</action>
					<action function="set">tw_action=cmd</action>
					<action function="set">tw_action_param=cd %tw_backups_folder% &amp;&amp; rm -rf "%tw_restore_name%"</action>
					<action function="set">tw_text1={@del_backup_confirm=Delete Backup?}</action>
					<action function="set">tw_text2=%tw_restore_name%</action>
					<action function="set">tw_text4={@del_backup_confirm2=This cannot be undone!}</action>
					<action function="set">tw_action_text1={@deleting_backup=Deleting Backup...}</action>
					<action function="set">tw_complete_text1={@backup_deleted=Backup deleted}</action>
					<action function="set">tw_slider_text={@swipe_delete=Swipe to Delete}</action>
					<action function="page">deletebackup</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@restore_backup_hdr=Restore Backup}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_restore_name%</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@sel_encrypt_backup=You have selected an encrypted backup.}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_1_y%"/>
				<text>{@decrypt_data_enter_note1=Please enter the password or}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@decrypt_data_enter_note2=press the back button to cancel.}</text>
			</text>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>{@enter_password_cptn=Password}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_decr_y%" w="%input_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_restore_display%</text>
				<data name="tw_restore_password" mask="*" maskvariable="tw_restore_display"/>
				<restrict minlen="1" maxlen="32" allow="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_"/>
				<action function="page">try_restore_decrypt</action>
			</input>

			<fill color="%accent%">
				<condition var1="tw_password_fail" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%row4_3_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<fill color="%text_fail%">
				<condition var1="tw_password_fail" var2="1"/>
				<placement x="%col1_x%" y="%row4_3_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<text style="text_input_fail">
				<condition var1="tw_password_fail" var2="1"/>
				<placement x="%col1_x%" y="%row4_3_y%"/>
				<text>{@restore_dec_fail=Password failed, please try again!}</text>
			</text>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_page_done=1</action>
					<action function="page">restore</action>
				</actions>
			</action>
		</page>

		<page name="try_restore_decrypt">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@decrypt_data_trying=Trying Decryption}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_restore_name%</text>
			</text>

			<template name="action_page_console"/>

			<action>
				<action function="decrypt_backup"/>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="!=" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_password_fail=1</action>
					<action function="page">restore_decrypt</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="=" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_page_done=1</action>
					<action function="page">restore_select</action>
				</actions>
			</action>
		</page>

		<page name="restore_select">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<button>
				<placement x="%ab_btn2_x%" y="%ab_y%"/>
				<image resource="actionbar_edit" highlightresource="actionbar_edit_hl"/>
				<actions>
					<action function="set">tw_backup_rename=%tw_restore_name%</action>
					<!--action function="set">tw_backup_rename=</action-->
					<action function="set">tw_fileexists=0</action>
					<action function="page">renamebackup</action>
				</actions>
			</button>

			<button>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_delete" highlightresource="actionbar_delete_hl"/>
				<actions>
					<action function="set">tw_back=restore_select</action>
					<action function="set">tw_action=cmd</action>
					<action function="set">tw_action_param=cd %tw_backups_folder% &amp;&amp; rm -rf "%tw_restore_name%"</action>
					<action function="set">tw_text1={@del_backup_confirm=Delete Backup?}</action>
					<action function="set">tw_text2=%tw_restore_name%</action>
					<action function="set">tw_text4={@del_backup_confirm2=This cannot be undone!}</action>
					<action function="set">tw_action_text1={@deleting_backup=Deleting Backup...}</action>
					<action function="set">tw_complete_text1={@backup_deleted=Backup deleted}</action>
					<action function="set">tw_slider_text={@swipe_delete=Swipe to Delete}</action>
					<action function="page">deletebackup</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@restore_backup_hdr=Restore Backup}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_restore_name%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@restore_backup_date=Backup Date}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_restore_file_date%</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>{@partitions=Partitions}</text>
			</text>

			<partitionlist>
				<placement x="%col1_x%" y="%row3_3_y%" w="%listbox_w%" h="%fileselector_wipe_height%"/>
				<data name="tw_restore_list" selectedlist="tw_restore_selected"/>
				<listtype name="restore"/>
			</partitionlist>

			<text style="caption">
				<placement x="%col1_x%" y="%row6_2a_y%"/>
				<text>{@options_hdr=Options}</text>
			</text>

			<checkbox style="checkbox_big">
				<condition var1="tw_enable_adb_backup" op="=" var2="0"/>
				<placement x="%col1_x%" y="%row6_3a_y%"/>
				<text>{@restore_enable_digest_chk=Enable Digest verification of backups}</text>
				<data variable="tw_skip_digest_check"/>
			</checkbox>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_restore=Swipe to Restore}</text>
			</text>

			<slider>
				<action function="page">restore_run</action>
			</slider>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">restore</action>
			</action>
		</page>

		<page name="renamebackup">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@rename_backup_hdr=Rename Backup}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_restore_name%</text>
			</text>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@name=Name}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_rename_y%" w="%input_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_backup_rename%</text>
				<data name="tw_backup_rename"/>
				<restrict minlen="1" maxlen="64" allow=" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890-_.{}[]"/>
				<actions>
					<action function="set">tw_back=restore</action>
					<action function="set">tw_action=cmd</action>
					<action function="set">tw_action_param=cd %tw_backups_folder% &amp;&amp; mv "%tw_restore_name%" "%tw_backup_rename%"</action>
					<action function="set">tw_text1={@rename_backup_confirm=Rename Backup?}</action>
					<action function="set">tw_text2={@rename_backup_confirm2=This cannot be undone!}</action>
					<action function="set">tw_action_text1={@renaming_backup=Renaming Backup...}</action>
					<action function="set">tw_complete_text1={@rename_backup_complete=Backup Rename Complete}</action>
					<action function="set">tw_slider_text={@swipe_to_rename=Swipe to Rename}</action>
					<action function="set">tw_filecheck=%tw_backups_folder%/%tw_backup_rename%</action>
					<action function="set">tw_existpage=renamebackup</action>
					<action function="set">tw_notexistpage=restore_confirm_action</action>
					<action function="page">filecheck</action>
				</actions>
			</input>

			<fill color="%accent%">
				<condition var1="tw_fileexists" var2="0"/>
				<placement x="%col1_x%" y="%row3_1_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<fill color="%text_fail%">
				<condition var1="tw_fileexists" var2="1"/>
				<placement x="%col1_x%" y="%row3_1_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<text style="text_input_fail">
				<condition var1="tw_fileexists" var2="1"/>
				<placement x="%col1_x%" y="%row3_1_y%"/>
				<text>{@backup_name_exists=A backup with that name already exists!}</text>
			</text>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">restore_select</action>
			</action>
		</page>

		<page name="deletebackup">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_text1%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_text2%</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<image resource="icon_warning"/>
			</image>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>%tw_text4%</text>
			</text>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>%tw_slider_text%</text>
			</text>

			<slider>
				<action function="set">tw_back=restore</action>
				<action function="page">restore_action_page</action>
			</slider>

			<action>
				<touch key="back"/>
				<action function="page">%tw_back%</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="restore_run">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_operation%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_partition%</text>
			</text>

			<template name="action_page_console"/>

			<text style="caption">
				<placement x="%col1_x%" y="%row7_1a_y%"/>
				<text>{@progress=Progress}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row7_2a_y%"/>
				<text>%tw_size_progress%</text>
			</text>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_back=restore_select</action>
					<action function="set">tw_complete_text1={@restore_complete=Restore completed}</action>
					<action function="page">restore_action_complete</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="1"/>
				</conditions>
				<actions>
					<action function="set">tw_back=restore_select</action>
					<action function="set">tw_complete_text1={@restore_complete=Restore completed}</action>
					<action function="page">restore_action_complete</action>
				</actions>
			</action>

			<action>
				<action function="nandroid">restore</action>
			</action>
		</page>

		<page name="restore_confirm_action">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_text1%</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_warning"/>
			</image>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>%tw_text2%</text>
			</text>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>%tw_slider_text%</text>
			</text>

			<slider>
				<action function="page">restore_action_page</action>
			</slider>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="restore_action_page">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_action_text1%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_action_text2%</text>
			</text>

			<template name="action_page_console"/>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
				</conditions>
				<actions>
					<action function="page">restore_action_complete</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="!=" var2="0"/>
				</conditions>
				<actions>
					<action function="page">restore_action_complete</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="0"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_has_action2" var2="1"/>
				<actions>
					<action function="%tw_action%">%tw_action_param%</action>
					<action function="%tw_action2%">%tw_action2_param%</action>
				</actions>
			</action>
		</page>

		<page name="restore_action_complete">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@restore_hdr=Restore}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@failed=Failed}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@successful=Successful}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_complete_text1%</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@back_btn=BACK}</text>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@reboot_system_btn=REBOOT SYSTEM}</text>
				<actions>
					<action function="set">tw_back=main2</action>
					<action function="page">reboot_system_routine</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>
		</page>

		<page name="mount">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@mount_hdr=Mount}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@sel_part_hdr=Select Partitions}</text>
			</text>

			<text style="text_ab_subtitle">
				<conditions>
					<condition var1="tw_has_mtp" var2="1"/>
					<condition var1="tw_mtp_enabled" var2="0"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@mtp_disabled=MTP is disabled}</text>
			</text>

			<text style="text_ab_subtitle">
				<conditions>
					<condition var1="tw_has_mtp" var2="1"/>
					<condition var1="tw_mtp_enabled" var2="1"/>
				</conditions>
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@mtp_enabled=MTP is enabled}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@storage_cptn=Storage}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_storage_display_name% (%tw_storage_free_size% MB)</text>
			</text>

			<button>
				<placement x="%col1_x%" y="%row2_2_y%" w="%content_w%" h="%mb_h%"/>
				<fill color="%transparent%"/>
				<actions>
					<action function="set">tw_back=mount</action>
					<action function="overlay">dialog_storage</action>
				</actions>
			</button>

			<button>
				<placement x="%ab_btn1_x%" y="%row2_2_y%"/>
				<image resource="actionbar_refresh"/>
				<highlight color="%highlight_color%"/>
				<actions>
					<action function="refreshsizes"/>
					<action function="page">mount</action>
				</actions>
			</button>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<text>{@partitions=Partitions}</text>
			</text>

			<partitionlist>
				<placement x="%col1_x%" y="%row3_3_y%" w="%listbox_w%" h="%fileselector_mount_height%"/>
				<listtype name="mount"/>
			</partitionlist>

			<text style="caption">
				<placement x="%col1_x%" y="%row7_1_y%"/>
				<text>{@options_hdr=Options}</text>
			</text>

			<button>
				<condition var1="tw_mount_system_ro" op="=" var2="0"/>
				<placement x="%col1_x%" y="%row7_2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@mount_sys_ro_chk=Mount system partition read-only}</text>
				<image resource="checkbox_false"/>
				<action function="mountsystemtoggle">1</action>
			</button>

			<button>
				<condition var1="tw_mount_system_ro" op="!=" var2="0"/>
				<placement x="%col1_x%" y="%row7_2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>{@mount_sys_ro_chk=Mount system partition read-only}</text>
				<image resource="checkbox_true"/>
				<actions>
					<action function="set">tw_lifetime_writes=2</action>
					<action function="page">system_readonly_check</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<condition var1="tw_has_usb_storage" var2="1"/>
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@usb_storage_btn=USB STORAGE}</text>
				<actions>
					<action function="mount">usb</action>
					<action function="page">usb_mount</action>
				</actions>
			</button>

			<button style="btn_raised">
				<conditions>
					<condition var1="tw_is_encrypted" var2="1"/>
					<condition var1="tw_is_decrypted" var2="0"/>
				</conditions>
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@decrypt_data_btn=DECRYPT DATA}</text>
				<action function="page">decrypt</action>
			</button>

			<button style="btn_raised_hl">
				<conditions>
					<condition var1="tw_has_mtp" var2="1"/>
					<condition var1="tw_mtp_enabled" var2="0"/>
				</conditions>
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@enable_mtp_btn=ENABLE MTP}</text>
				<action function="startmtp"/>
			</button>

			<button style="btn_raised_hl">
				<conditions>
					<condition var1="tw_has_mtp" var2="1"/>
					<condition var1="tw_mtp_enabled" var2="1"/>
				</conditions>
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@disable_mtp_btn=DISABLE MTP}</text>
				<action function="stopmtp"/>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="usb_mount">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@mount_hdr=Mount}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@usb_storage_hdr=USB Storage}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@usb_stor_mnt1=USB Storage mounted}</text>
			</text>

			<image>
				<image resource="usb"/>
				<placement x="%center_x%" y="%row5_1_y%" placement="4"/>
			</image>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@unmount_btn=UNMOUNT}</text>
				<action function="page">usb_umount</action>
			</button>

			<action>
				<touch key="back"/>
				<action function="page">usb_umount</action>
				<action function="set">tw_busy=1</action>
			</action>
		</page>

		<page name="usb_umount">
			<action>
				<action function="unmount">usb</action>
			</action>

			<action>
				<action function="page">mount</action>
				<action function="set">tw_busy=0</action>
			</action>
		</page>

		<page name="system_readonly_check">
			<action>
				<action function="checkpartitionlifetimewrites">/system</action>
			</action>

			<action>
				<condition var1="tw_lifetime_writes" var2="1"/>
				<actions>
					<action function="mountsystemtoggle">0</action>
					<action function="page">mount</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_lifetime_writes" var2="0"/>
				<actions>
					<action function="set">tw_back=mount</action>
					<action function="page">system_readonly</action>
				</actions>
			</action>
		</page>

		<page name="system_readonly">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">mount</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@mount_hdr=Mount}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@sys_ro_hdr=Unmodified System Partition}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text></text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@sys_ro_hdr=Unmodified System Partition}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row2_3a_y%"/>
				<text>{@sys_rop1=TWRP can leave your system partition}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_1a_y%"/>
				<text>{@sys_rop2=unmodified to make it easier for you to}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_2a_y%"/>
				<text>{@sys_rop2a=take official updates.}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_3a_y%"/>
				<text>{@sys_rop3=TWRP will be unable to prevent the}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row4_1a_y%"/>
				<text>{@sys_rop4=stock ROM from replacing TWRP and}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row4_2a_y%"/>
				<text>{@sys_rop4a=will not offer to root your device.}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row5_1_y%"/>
				<text>{@sys_rop5=Zip installations or ADB operations}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row5_2_y%"/>
				<text>{@sys_rop6=may still modify the system partition.}</text>
			</text>

			<checkbox style="checkbox_big">
				<condition var1="tw_is_encrypted" var2="0"/>
				<placement x="%col1_x%" y="%row6_1_y%"/>
				<text>{@sys_ro_never_show_chk=Never show this screen during boot again}</text>
				<data variable="tw_never_show_system_ro_page"/>
			</checkbox>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row6_3_y%"/>
				<text>{@sys_ro_keep_ro_btn=KEEP READ-ONLY}</text>
				<actions>
					<action function="mountsystemtoggle">1</action>
					<action function="set">tw_page_done=1</action>
					<action function="page">%tw_back%</action>
				</actions>
			</button>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_allow_mod=Swipe to Allow Modifications}</text>
			</text>

			<slider>
				<actions>
					<action function="mountsystemtoggle">0</action>
					<action function="set">tw_page_done=1</action>
					<action function="page">%tw_back%</action>
				</actions>
			</slider>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_page_done=1</action>
					<action function="page">main</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_page_done=1</action>
					<action function="page">%tw_back%</action>
				</actions>
			</action>
		</page>

		<page name="decrypt">
			<action>
				<condition var1="tw_crypto_pwtype" var2="2"/>
				<action function="page">decrypt_pattern</action>
			</action>

			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@mount_hdr=Mount}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@decrypt=Decrypt}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@data_part=Data Partition}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@encrypt_data_part=Data Partition is encrypted.}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_1_y%"/>
				<text>{@decrypt_data_enter_note1=Please enter the password or}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@decrypt_data_enter_note2=press the back button to cancel.}</text>
			</text>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>{@decrypt_data_enter_pass=Password}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_decr_y%" w="%input_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_crypto_display%</text>
				<data name="tw_crypto_password" mask="*" maskvariable="tw_crypto_display"/>
				<restrict minlen="1" maxlen="254"/>
				<actions>
					<action function="page">trydecrypt</action>
				</actions>
			</input>

			<fill color="%accent%">
				<condition var1="tw_password_fail" op="!=" var2="1"/>
				<placement x="%col1_x%" y="%row4_3_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<fill color="%text_fail%">
				<condition var1="tw_password_fail" var2="1"/>
				<placement x="%col1_x%" y="%row4_3_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<text style="text_input_fail">
				<condition var1="tw_password_fail" var2="1"/>
				<placement x="%col1_x%" y="%row4_3_y%"/>
				<text>{@restore_dec_fail=Password failed, please try again!}</text>
			</text>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_page_done=1</action>
					<action function="page">main</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_page_done=1</action>
					<action function="page">main</action>
				</actions>
			</action>
		</page>

		<page name="decrypt_pattern">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@mount_hdr=Mount}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@decrypt=Decrypt}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@data_part=Data Partition}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@encrypt_data_part=Data Partition is encrypted.}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_password_fail" op="!=" var2="1"/>
				<placement x="%col1_x_indent%" y="%row3_1_y%"/>
				<text>{@decrypt_data_enter_note1a=Please enter the pattern or}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_password_fail" op="!=" var2="1"/>
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@decrypt_data_enter_note2=press the back button to cancel.}</text>
			</text>

			<text style="text_body2_fail">
				<condition var1="tw_password_fail" var2="1"/>
				<placement x="%col1_x_indent%" y="%row3_1_y%"/>
				<text>{@decrypt_data_failed_pattern=Pattern failed!}</text>
			</text>

			<text style="text_body2">
				<condition var1="tw_password_fail" var2="1"/>
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@decrypt_try_again=Please try again.</text>
			</text>

			<patternpassword>
				<size name="tw_gui_pattern_grid_size" default="3"/>
				<placement x="%pattern_x%" y="%row4_1a_y%" w="%pattern_size%" h="%pattern_size%"/>
				<dot color="%text_dark%" activecolor="%accent%" radius="%pattern_dot_dia%"/>
				<line color="%text_dark%" width="%pattern_line_w%"/>
				<data name="tw_crypto_password"/>
				<action function="page">trydecrypt</action>
			</patternpassword>

			<button style="btn_flat_qw">
				<placement x="%btn_raised_left_x%" y="%row8_1a_y%"/>
				<text>3x3</text>
				<action function="set">tw_gui_pattern_grid_size=3</action>
			</button>

			<button style="btn_flat_qw">
				<placement x="%btn_rot_2_x%" y="%row8_1a_y%" placement="1"/>
				<text>4x4</text>
				<action function="set">tw_gui_pattern_grid_size=4</action>
			</button>

			<button style="btn_flat_qw">
				<placement x="%btn_rot_3_x%" y="%row8_1a_y%"/>
				<text>5x5</text>
				<action function="set">tw_gui_pattern_grid_size=5</action>
			</button>

			<button style="btn_flat_qw">
				<placement x="%btn_raised_right_x%" y="%row8_1a_y%" placement="1"/>
				<text>6x6</text>
				<action function="set">tw_gui_pattern_grid_size=6</action>
			</button>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_page_done=1</action>
					<action function="page">main</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_page_done=1</action>
					<action function="page">main</action>
				</actions>
			</action>
		</page>

		<page name="trydecrypt">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@mount_hdr=Mount}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@decrypt_data_trying=Trying Decryption}</text>
			</text>

			<template name="action_page_console"/>

			<action>
				<action function="decrypt"/>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="!=" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_password_fail=1</action>
					<action function="page">decrypt</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="=" var2="0"/>
				</conditions>
				<action function="page">main</action>
			</action>
		</page>

		<page name="filemanagerlist">
			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter folders="1" files="1"/>
				<path name="tw_file_location1" default="/"/>
				<data name="tw_filename1"/>
				<selection name="tw_selection1"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter folders="1" files="1"/>
				<path name="tw_file_location1" default="/"/>
				<data name="tw_filename1"/>
				<selection name="tw_selection1"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@fm_sel_file=Select a File or Folder}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_file_location1%</text>
			</text>

			<action>
				<actions>
					<action function="set">tw_fm_type={@fm_type_file=File}</action>
					<action function="set">tw_fm_isfolder=0</action>
				</actions>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>

			<action>
				<condition var1="tw_filename1" op="modified"/>
				<actions>
					<action function="page">filemanageroptions</action>
				</actions>
			</action>

			<button>
				<placement x="%btn_float_x%" y="%row7_3a_y%"/>
				<image resource="btn_float_folder"/>
				<highlight color="%highlight_color%"/>
				<actions>
					<action function="set">tw_filename1=tw_file_location1</action>
					<action function="set">tw_fm_isfolder=1</action>
					<action function="set">tw_fm_type={@fm_type_folder=Folder}</action>
					<action function="page">filemanageroptions</action>
				</actions>
			</button>
		</page>

		<page name="filemanageroptions">
			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter folders="1" files="1"/>
				<path name="tw_file_location1" default="/"/>
				<!--data name="tw_filename1" /-->
				<selection name="tw_selection1"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<icon folder="folder_icon" file="file_icon"/>
				<path name="tw_file_location1" default="/"/>
				<!--data name="tw_filename1" /-->
				<selection name="tw_selection1"/>
			</fileselector>

			<button>
				<fill color="%lightransparent%"/>
				<placement x="0" y="%row_ab_ex_y%" w="%screen_w%" h="%screen_h%"/>
				<action function="page">filemanageroptions</action>
			</button>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_fm_type%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_filename1%</text>
			</text>

			<image>
				<placement x="0" y="%bs_shadow_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<fill color="%background%">
				<placement x="0" y="%bs_y%" w="%screen_w%" h="%bs_h%"/>
			</fill>

			<text style="caption">
				<placement x="%col1_x%" y="%row3_1_y%"/>
				<text>%tw_fm_type% {@fm_actions=Actions}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%bs_row1_y%"/>
				<image resource="bs_btn_copy"/>
			</image>

			<text style="bs_text">
				<placement x="%col1_x_indent%" y="%bs_row1_text_y%"/>
				<text>{@fm_copy_btn=Copy}</text>
			</text>

			<button style="bs_btn">
				<condition var1="tw_fm_isfolder" var2="0"/>
				<placement x="%col1_x%" y="%bs_row1_y%" w="%content_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_filemanager_command=cp</action>
					<action function="set">tw_fm_text1={@fm_copying=Copying}</action>
					<action function="page">choosedestinationfolder</action>
				</actions>
			</button>

			<button style="bs_btn">
				<condition var1="tw_fm_isfolder" var2="1"/>
				<placement x="%col1_x%" y="%bs_row1_y%" w="%content_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_filemanager_command=cd "%tw_file_location1%" &amp;&amp; cd .. &amp;&amp; cp -R</action>
					<action function="set">tw_fm_text1={@fm_copying=Copying}</action>
					<action function="page">choosedestinationfolder</action>
				</actions>
			</button>

			<image>
				<placement x="%col1_x%" y="%bs_row2_y%"/>
				<image resource="bs_btn_cut"/>
			</image>

			<text style="bs_text">
				<placement x="%col1_x_indent%" y="%bs_row2_text_y%"/>
				<text>{@fm_move_btn=Move}</text>
			</text>

			<button style="bs_btn">
				<placement x="%col1_x%" y="%bs_row2_y%" w="%content_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_filemanager_command=mv</action>
					<action function="set">tw_fm_text1={@fm_moving=Moving}</action>
					<action function="page">choosedestinationfolder</action>
				</actions>
			</button>

			<image>
				<placement x="%col1_x%" y="%bs_row3_y%"/>
				<image resource="bs_btn_rename"/>
			</image>

			<text style="bs_text">
				<placement x="%col1_x_indent%" y="%bs_row3_text_y%"/>
				<text>{@fm_rename_btn=Rename}</text>
			</text>

			<button style="bs_btn">
				<condition var1="tw_fm_isfolder" var2="0"/>
				<placement x="%col1_x%" y="%bs_row3_y%" w="%content_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_filemanager_rename=tw_selection1</action>
					<action function="set">tw_fm_text1={@fm_renaming=Renaming}</action>
					<action function="set">tw_filemanager_command=mv</action>
					<action function="page">filemanagerrenamefile</action>
				</actions>
			</button>

			<button style="bs_btn">
				<condition var1="tw_fm_isfolder" var2="1"/>
				<placement x="%col1_x%" y="%bs_row3_y%" w="%content_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_filemanager_rename=tw_selection1</action>
					<action function="set">tw_fm_text1={@fm_renaming=Renaming}</action>
					<action function="set">tw_filemanager_command=cd "%tw_file_location1%" &amp;&amp; cd .. &amp;&amp; mv</action>
					<action function="page">filemanagerrenamefolder</action>
				</actions>
			</button>

			<image>
				<placement x="%col1_x%" y="%bs_row4_y%"/>
				<image resource="bs_btn_delete"/>
			</image>

			<text style="bs_text">
				<placement x="%col1_x_indent%" y="%bs_row4_text_y%"/>
				<text>{@fm_delete_btn=Delete}</text>
			</text>

			<button style="bs_btn">
				<placement x="%col1_x%" y="%bs_row4_y%" w="%content_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_filemanager_command=rm -rf</action>
					<action function="set">tw_fm_text1={@fm_deleting=Deleting}</action>
					<action function="set">tw_fm_text2=</action>
					<action function="set">tw_fm_text3=</action>
					<action function="set">tw_include_text3=0</action>
					<action function="set">tw_back=filemanageroptions</action>
					<action function="page">filemanagerconfirm</action>
				</actions>
			</button>

			<image>
				<placement x="%col1_x%" y="%bs_row5_y%"/>
				<image resource="bs_btn_chmod"/>
			</image>

			<text style="bs_text">
				<placement x="%col1_x_indent%" y="%bs_row5_text_y%"/>
				<text>{@fm_chmod755_btn=chmod 755}</text>
			</text>

			<button style="bs_btn">
				<placement x="%col1_x%" y="%bs_row5_y%" w="%content_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_filemanager_command=chmod 755</action>
					<action function="set">tw_fm_text1={@fm_chmod755ing=chmod 755}</action>
					<action function="set">tw_fm_text2=</action>
					<action function="set">tw_fm_text3=</action>
					<action function="set">tw_include_text3=0</action>
					<action function="set">tw_back=filemanageroptions</action>
					<action function="page">filemanagerconfirm</action>
				</actions>
			</button>

			<image>
				<placement x="%col1_x%" y="%bs_row6_y%"/>
				<image resource="bs_btn_chmod"/>
			</image>

			<text style="bs_text">
				<placement x="%col1_x_indent%" y="%bs_row6_text_y%"/>
				<text>{@fm_chmod644_btn=chmod 644}</text>
			</text>

			<button style="bs_btn">
				<placement x="%col1_x%" y="%bs_row6_y%" w="%content_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_filemanager_command=chmod 644</action>
					<action function="set">tw_fm_text1={@fm_chmod644ing=chmod 644}</action>
					<action function="set">tw_fm_text2=</action>
					<action function="set">tw_fm_text3=</action>
					<action function="set">tw_include_text3=0</action>
					<action function="set">tw_back=filemanageroptions</action>
					<action function="page">filemanagerconfirm</action>
				</actions>
			</button>

			<image>
				<placement x="%col1_x%" y="%bs_row7_y%"/>
				<image resource="bs_btn_chmod"/>
			</image>

			<text style="bs_text">
				<placement x="%col1_x_indent%" y="%bs_row7_text_y%"/>
				<text>{@fm_chmod_btn=chmod}</text>
			</text>

			<button style="bs_btn">
				<placement x="%col1_x%" y="%bs_row7_y%" w="%content_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_filemanager_rename=0000</action>
					<action function="set">tw_fm_text2=</action>
					<action function="set">tw_fm_text3=</action>
					<action function="set">tw_include_text3=0</action>
					<action function="set">tw_back=filemanageroptions</action>
					<action function="page">filemanagerchmod</action>
				</actions>
			</button>

			<button>
				<placement x="%ab_btn1_x%" y="%row3_1_y%"/>
				<image resource="bs_close"/>
				<highlight color="%highlight_color%"/>
				<action function="page">filemanagerlist</action>
			</button>

			<fill color="%accent%">
				<condition var1="navbar_accent" var2="1"/>
				<placement x="0" y="%row_nav_y%" w="%screen_w%" h="%nav_h%"/>
			</fill>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home" highlightresource="home_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home_white" highlightresource="home_white_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout" highlightresource="slideout_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout_white" highlightresource="slideout_white_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout" highlightresource="slideout_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout_white" highlightresource="slideout_white_hl"/>
				<action function="page">filemanagerlist</action>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="choosedestinationfolder">
			<template name="body"/>

			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="big"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter folders="1" files="0"/>
				<path name="tw_file_location2" default="/"/>
				<data name="tw_filename2"/>
				<selection name="tw_selection2"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" var2="small"/>
				<placement x="%col1_x%" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<filter folders="1" files="0"/>
				<path name="tw_file_location2" default="/"/>
				<data name="tw_filename2"/>
				<selection name="tw_selection2"/>
			</fileselector>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<button>
				<condition var1="list_font" var2="big"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_big" highlightresource="actionbar_font_big_hl"/>
				<actions>
					<action function="set">list_font=small</action>
				</actions>
			</button>

			<button>
				<condition var1="list_font" var2="small"/>
				<placement x="%ab_btn1_x%" y="%ab_y%"/>
				<image resource="actionbar_font_small" highlightresource="actionbar_font_small_hl"/>
				<actions>
					<action function="set">list_font=big</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@fm_sel_dest=Destination Folder}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_file_location2%</text>
			</text>

			<button>
				<placement x="%btn_float_x%" y="%row7_3a_y%"/>
				<image resource="btn_float_folder"/>
				<highlight color="%highlight_color%"/>
				<actions>
					<action function="set">tw_fm_text2=to</action>
					<action function="set">tw_fm_text3=%tw_file_location2%</action>
					<action function="set">tw_include_text3=1</action>
					<action function="set">tw_back=filemanageroptions</action>
					<action function="page">filemanagerconfirm</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">filemanageroptions</action>
			</action>
		</page>

		<page name="filemanagerrenamefile">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@fm_rename_hdr=Rename} %tw_fm_type%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_file_location1%</text>
			</text>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@name=Name}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_rename_y%" w="%input_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_filemanager_rename%</text>
				<data name="tw_filemanager_rename"/>
				<restrict minlen="1" maxlen="64"/>
				<actions>
					<action function="set">tw_fm_text2=to</action>
					<action function="set">tw_fm_text3="%tw_file_location1%/%tw_filemanager_rename%"</action>
					<action function="set">tw_include_text3=1</action>
					<action function="set">tw_back=filemanageroptions</action>
					<action function="page">filemanagerconfirm</action>
				</actions>
			</input>

			<fill color="%accent%">
				<placement x="%col1_x%" y="%row3_1_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">filemanageroptions</action>
			</action>
		</page>

		<page name="filemanagerrenamefolder">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@fm_rename_hdr=Rename} %tw_fm_type%</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_file_location1%</text>
			</text>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@name=Name}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_rename_y%" w="%input_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_filemanager_rename%</text>
				<data name="tw_filemanager_rename"/>
				<restrict minlen="1" maxlen="64"/>
				<actions>
					<action function="set">tw_fm_text2=to</action>
					<action function="set">tw_fm_text3=%tw_filemanager_rename%</action>
					<action function="set">tw_include_text3=1</action>
					<action function="set">tw_back=filemanageroptions</action>
					<action function="page">filemanagerconfirm</action>
				</actions>
			</input>

			<fill color="%accent%">
				<placement x="%col1_x%" y="%row3_1_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">filemanageroptions</action>
			</action>
		</page>

		<page name="filemanagerchmod">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@fm_set_perms_hdr=Set Permissions}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_file_location1%</text>
			</text>

			<text style="caption_hl">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@fm_perms=Permissions}</text>
			</text>

			<input>
				<placement x="%col1_x%" y="%input_rename_y%" w="%input_width%" h="%input_height%"/>
				<background color="%background%"/>
				<cursor color="%accent%" hasfocus="1" width="%input_cursor_width%"/>
				<font resource="body1" color="%text%"/>
				<text>%tw_filemanager_rename%</text>
				<data name="tw_filemanager_rename"/>
				<restrict minlen="3" maxlen="4" allow="0123456789"/>
				<actions>
					<action function="set">tw_filemanager_command=chmod %tw_filemanager_rename%</action>
					<action function="set">tw_fm_text1=chmod %tw_filemanager_rename%</action>
					<action function="set">tw_back=filemanageroptions</action>
					<action function="page">filemanagerconfirm</action>
				</actions>
			</input>

			<fill color="%accent%">
				<placement x="%col1_x%" y="%row3_1_y%" w="%content_w%" h="%input_line_height%" placement="1"/>
			</fill>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardtemplate"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">filemanageroptions</action>
			</action>
		</page>

		<page name="filemanagerconfirm">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@confirm_action=Confirm Action}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>%tw_fm_text1%</text>
			</text>

			<text style="text_body2_hl">
				<placement x="%col1_x%" y="%row3_1_y%"/>
				<text>%tw_filename1%</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x%" y="%row3_3_y%"/>
				<text>%tw_fm_text2%</text>
			</text>

			<text style="text_body2_hl">
				<placement x="%col1_x%" y="%row4_1_y%"/>
				<text>%tw_fm_text3%</text>
			</text>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_confirm=Swipe to Confirm}</text>
			</text>

			<slider>
				<action function="page">filemanageraction</action>
			</slider>

			<action>
				<touch key="back"/>
				<action function="page">%tw_back%</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="filemanageraction">
			<template name="body"/>

			<template name="progress_bar"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<image>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back"/>
			</image>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>%tw_fm_text1%</text>
			</text>

			<template name="action_page_console"/>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_back=filemanagerlist</action>
					<action function="set">tw_complete_text1={@fm_complete=File operation completed}</action>
					<action function="page">filemanagercomplete</action>
				</actions>
			</action>

			<action>
				<conditions>
					<condition var1="tw_operation_state" var2="1"/>
					<condition var1="tw_operation_status" op="!=" var2="0"/>
				</conditions>
				<actions>
					<action function="set">tw_complete_text1={@fm_complete=File operation completed}</action>
					<action function="page">filemanagercomplete</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_include_text3" var2="0"/>
				<actions>
					<action function="cmd">%tw_filemanager_command% "%tw_filename1%"</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_include_text3" var2="1"/>
				<actions>
					<action function="cmd">%tw_filemanager_command% "%tw_filename1%" "%tw_fm_text3%"</action>
				</actions>
			</action>
		</page>

		<page name="filemanagercomplete">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@fm_hdr=File Manager}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" op="!=" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@failed=Failed}</text>
			</text>

			<text style="text_ab_title">
				<condition var1="tw_operation_status" var2="0"/>
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@successful=Successful}</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_complete_text1%</text>
			</text>

			<template name="action_page_console"/>

			<button style="btn_raised">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@back_btn=BACK}</text>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</button>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@reboot_system_btn=REBOOT SYSTEM}</text>
				<actions>
					<action function="set">tw_back=main2</action>
					<action function="page">reboot_system_routine</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_clear_destination=main2</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_clear_destination=%tw_back%</action>
					<action function="page">clear_vars</action>
				</actions>
			</action>
		</page>

		<page name="advanced">
			<template name="body"/>

			<template name="ab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@advanced_hdr=Advanced}</text>
			</text>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row1_y%"/>
				<image resource="mb_logtosd"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row1_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row1_y%"/>
				<image resource="mb_logtosd_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row1_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row1_text_y%"/>
				<text>{@copy_log_btn=Copy Logs to SD}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row1_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=advanced</action>
					<action function="set">tw_action=copylog</action>
					<action function="set">tw_text1={@copy_log_confirm=Copy Logs to SD Card?}</action>
					<action function="set">tw_action_text1={@copy_log_btn=Copy Logs to SD}</action>
					<action function="set">tw_action_text2={@copying_log=Copying Logs to SD Card...}</action>
					<action function="set">tw_complete_text1={@copy_log_complete=Logs copied}</action>
					<action function="set">tw_slider_text={@swipe_to_confirm=Swipe to Confirm}</action>
					<action function="page">confirm_action</action>
				</actions>
			</button>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row2_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row2_y%"/>
				<image resource="mb_fixpermissions"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row2_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row2_y%"/>
				<image resource="mb_fixpermissions_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row2_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row2_text_y%"/>
				<text>{@fix_contexts_hdr=Fix Contexts}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row2_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">fixcontexts</action>
			</button>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row3_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_terminalcommand"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row3_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row3_y%"/>
				<image resource="mb_terminalcommand_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row3_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row3_text_y%"/>
				<text>{@terminal_btn=Terminal}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row3_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">terminal</action>
			</button>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x_indent%" y="%mb_row4_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_adbsideload"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row4_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x%" y="%mb_row4_y%"/>
				<image resource="mb_adbsideload_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row4_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<placement x="%col1_x_indent%" y="%mb_row4_text_y%"/>
				<text>{@adb_sideload_btn=ADB Sideload}</text>
			</text>

			<button style="mb_btn">
				<placement x="%col1_x%" y="%mb_row4_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">sideload</action>
			</button>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_show_dumlock" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row5_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_show_dumlock" var2="0"/>
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row5_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_show_dumlock" var2="0"/>
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row5_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_show_dumlock" var2="1"/>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_dumlock"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<condition var1="tw_show_dumlock" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row5_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<condition var1="tw_show_dumlock" var2="1"/>
				<placement x="%col1_x%" y="%mb_row5_y%"/>
				<image resource="mb_dumlock_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<condition var1="tw_show_dumlock" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row5_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<condition var1="tw_show_dumlock" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row5_text_y%"/>
				<text>{@dumlock_hdr=HTC Dumlock}</text>
			</text>

			<button style="mb_btn">
				<condition var1="tw_show_dumlock" var2="1"/>
				<placement x="%col1_x%" y="%mb_row5_y%" w="%content_w%" h="%mb_h%"/>
				<action function="page">htcdumlock</action>
			</button>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row6_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_has_injecttwrp" var2="0"/>
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row6_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<placement x="%col1_x%" y="%mb_row6_y%"/>
				<image resource="mb_recovery"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row6_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<placement x="%col1_x%" y="%mb_row6_y%"/>
				<image resource="mb_recovery_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row6_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row6_text_y%"/>
				<text>{@inject_twrp_btn=Inject TWRP}</text>
			</text>

			<button style="mb_btn">
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<placement x="%col1_x%" y="%mb_row6_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">tw_back=advanced</action>
					<action function="set">tw_action=reinjecttwrp</action>
					<action function="set">tw_text1={@inject_twrp_confirm=Re-Inject TWRP?}</action>
					<action function="set">tw_action_text1={@injecting_twrp=Re-Injecting TWRP...}</action>
					<action function="set">tw_complete_text1={@inject_twrp_complete=TWRP Injection completed}</action>
					<action function="set">tw_slider_text={@swipe_to_confirm=Swipe to Confirm}</action>
					<action function="page">confirm_action</action>
				</actions>
			</button>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_has_injecttwrp" var2="0"/>
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row7_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<fill color="%linecolor%">
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_has_injecttwrp" var2="1"/>
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row7_y%" w="%mb_div_w%" h="%fileselector_separatorheight%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="0"/>
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%col1_x%" y="%mb_row7_y%"/>
				<image resource="mb_partsdcard"/>
			</image>

			<fill color="%accent%">
				<condition var1="menu_btn_solid" var2="1"/>
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%mb_icon_x%" y="%mb_row7_icon_y%" w="%mb_icon_w%" h="%mb_icon_h%"/>
			</fill>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%col1_x%" y="%mb_row7_y%"/>
				<image resource="mb_partsdcard_color"/>
			</image>

			<image>
				<condition var1="menu_btn_solid" var2="1"/>
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%col1_x_neg%" y="%mb_row7_y%" placement="1"/>
				<image resource="mb_color_extension"/>
			</image>

			<text style="mb_text">
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%col1_x_indent%" y="%mb_row7_text_y%"/>
				<text>{@part_sd_hdr=Partition SD Card}</text>
			</text>

			<button style="mb_btn">
				<condition var1="tw_allow_partition_sdcard" var2="1"/>
				<placement x="%col1_x%" y="%mb_row7_y%" w="%content_w%" h="%mb_h%"/>
				<actions>
					<action function="set">partitionlisterror=0</action>
					<action function="page">partsdcardsel</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>
		</page>

		<page name="partsdcardsel">
			<template name="body"/>

			<template name="ab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@part_sd_hdr=Partition SD Card}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row1_1_y%"/>
				<image resource="icon_warning"/>
			</image>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row1_1_y%"/>
				<text>{@part_sdcard_sel_note_1=Partitioning will delete all files}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@part_sdcard_sel_note_2=on your SD card!}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row2_1_y%"/>
				<text>{@part_sd_undo=This action cannot be undone!}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>{@rem_sd=Removable Storage}</text>
			</text>

			<partitionlist>
				<placement x="%col1_x%" y="%row3_1_y%" w="%listbox_w%" h="%fileselector_wipe_height%"/>
				<data name="tw_storage_path"/>
				<listtype name="storage"/>
			</partitionlist>

			<image>
				<condition var1="partitionlisterror" var2="1"/>
				<placement x="%col1_x%" y="%row7_2_y%"/>
				<image resource="icon_warning"/>
			</image>

			<text style="text_body2_fail">
				<condition var1="partitionlisterror" var2="1"/>
				<placement x="%col1_x_indent%" y="%row7_2_y%"/>
				<text>{@rem_sd_sel=Select a removable device!}</text>
			</text>

			<button style="btn_raised">
				<placement x="%btn_raised_right_x%" y="%row8_1_y%" placement="1"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="getpartitiondetails">tw_storage_path</action>
					<action function="page">partsdcardcheck</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">advanced</action>
			</action>
		</page>

		<page name="partsdcardcheck">
			<action>
				<condition var1="tw_partition_removable" op="=" var2="1"/>
				<actions>
					<action function="set">partitionlisterror=0</action>
					<action function="page">partsdcard</action>
				</actions>
			</action>

			<action>
				<condition var1="tw_partition_removable" op="!=" var2="1"/>
				<actions>
					<action function="set">partitionlisterror=1</action>
					<action function="page">partsdcardsel</action>
				</actions>
			</action>
		</page>

		<page name="partsdcard">
			<template name="body"/>

			<template name="ab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@part_sd_hdr=Partition SD Card}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row1_1_y%"/>
				<image resource="icon_warning"/>
			</image>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row1_1_y%"/>
				<text>{@part_sdcard_sel_note_1=Partitioning will delete all files}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@part_sdcard_sel_note_2=on your SD card!}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row2_1_y%"/>
				<text>{@part_sd_undo=This action cannot be undone!}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>{@part_size=Size}</text>
			</text>

			<button style="btn_flat_qw">
				<placement x="%btn_raised_left_x%" y="%row3_1_y%"/>
				<text>{@btn_flat_less=LESS}</text>
				<action function="addsubtract">tw_sdext_size-128</action>
			</button>

			<text style="text_body2">
				<placement x="%center_x%" y="%row3_2_y%" placement="5"/>
				<text>{@part_sd_ext_sz=EXT Size:} %tw_sdext_size%</text>
			</text>

			<button style="btn_flat_qw">
				<placement x="%btn_raised_right_x%" y="%row3_1_y%" placement="1"/>
				<text>{@btn_flat_more=MORE}</text>
				<action function="addsubtract">tw_sdext_size+128</action>
			</button>

			<button style="btn_flat_qw">
				<placement x="%btn_raised_left_x%" y="%row4_2_y%"/>
				<text>{@btn_flat_less=LESS}</text>
				<action function="addsubtract">tw_swap_size-32</action>
			</button>

			<text style="text_body2">
				<placement x="%center_x%" y="%row4_3_y%" placement="5"/>
				<text>{@part_sd_swap_sz=Swap Size:} %tw_swap_size%</text>
			</text>

			<button style="btn_flat_qw">
				<placement x="%btn_raised_right_x%" y="%row4_2_y%" placement="1"/>
				<text>{@btn_flat_more=MORE}</text>
				<action function="addsubtract">tw_swap_size+32</action>
			</button>

			<text style="caption">
				<placement x="%col1_x%" y="%row5_3_y%"/>
				<text>{@file_system=File System}</text>
			</text>

			<button style="btn_flat_qw">
				<placement x="%btn_raised_left_x%" y="%row6_1_y%"/>
				<text>{@btn_flat_ext3=EXT3}</text>
				<action function="set">tw_sdpart_file_system=ext3</action>
			</button>

			<text style="text_body2">
				<placement x="%center_x%" y="%row6_2_y%" placement="5"/>
				<text>{@current_color=Current:} %tw_sdpart_file_system%</text>
			</text>

			<button style="btn_flat_qw">
				<placement x="%btn_raised_right_x%" y="%row6_1_y%" placement="1"/>
				<text>{@btn_flat_ext4=EXT4}</text>
				<action function="set">tw_sdpart_file_system=ext4</action>
			</button>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_part_sd=Swipe to Partition}</text>
			</text>

			<slider>
				<action function="page">partsdcardaction</action>
				<actions>
					<action function="set">tw_back=partsdcard</action>
					<action function="set">tw_action=partitionsd</action>
					<action function="set">tw_has_action2=1</action>
					<action function="set">tw_action2=set</action>
					<action function="set">tw_action2_param=tw_zip_location=/sdcard</action>
					<action function="set">tw_action_text1={@partitioning_sd=Partitioning SD Card...}</action>
					<action function="set">tw_action_text2={@partitioning_sd2=This will take a few minutes.}</action>
					<action function="set">tw_complete_text1={@part_sd_complete=Partitioning completed}</action>
					<action function="page">action_page</action>
				</actions>
			</slider>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">partitionlisterror=0</action>
					<action function="page">partsdcardsel</action>
				</actions>
			</action>
		</page>

		<page name="htcdumlock">
			<template name="body"/>

			<template name="ab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@dumlock_hdr=HTC Dumlock}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row1_1_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row1_1_y%"/>
				<text>{@dumlock_note1=For information about the workings}</text>
			</text>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@dumlock_note2=of HTC Dumlock please see:}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row2_1_y%"/>
				<text>http://teamw.in/project/htcdumlock</text>
			</text>

			<button style="btn_flat_fw">
				<placement x="%btn_raised_left_x%" y="%row6_1_y%"/>
				<text>{@dumlock_restore_btn=RESTORE ORIGINAL BOOT}</text>
				<actions>
					<action function="set">tw_back=htcdumlock</action>
					<action function="set">tw_action=htcdumlockrestoreboot</action>
					<action function="set">tw_text1={@dumlock_restore_confirm=Restore original boot image?}</action>
					<action function="set">tw_action_text1={@dumlock_restoring=Restoring original boot...}</action>
					<action function="set">tw_complete_text1={@dumlock_restore_complete=Restore original boot completed}</action>
					<action function="set">tw_slider_text={@swipe_to_confirm=Swipe to Confirm}</action>
					<action function="page">confirm_action</action>
				</actions>
			</button>

			<button style="btn_flat_fw">
				<placement x="%btn_raised_left_x%" y="%row7_1_y%"/>
				<text>{@dumlock_reflash_btn=REFLASH RECOVERY}</text>
				<actions>
					<action function="set">tw_back=htcdumlock</action>
					<action function="set">tw_action=htcdumlockreflashrecovery</action>
					<action function="set">tw_text1={@dumlock_reflash_confirm=Reflash recovery to boot?}</action>
					<action function="set">tw_action_text1={@dumlock_reflashing=Flashing recovery to boot...}</action>
					<action function="set">tw_complete_text1={@dumlock_reflash_complete=Recovery flash to boot completed}</action>
					<action function="set">tw_slider_text={@swipe_to_confirm=Swipe to Confirm}</action>
					<action function="page">confirm_action</action>
				</actions>
			</button>

			<button style="btn_flat_fw">
				<placement x="%btn_raised_left_x%" y="%row8_1_y%"/>
				<text>{@dumlock_install_btn=INSTALL DUMLOCK}</text>
				<actions>
					<action function="set">tw_back=htcdumlock</action>
					<action function="set">tw_action=installhtcdumlock</action>
					<action function="set">tw_text1={@dumlock_install_confirm=Install HTC dumlock files to ROM?}</action>
					<action function="set">tw_action_text1={@dumlock_installing=Installing HTC Dumlock...}</action>
					<action function="set">tw_complete_text1={@dumlock_install_complete=HTC Dumlock install completed}</action>
					<action function="set">tw_slider_text={@swipe_to_confirm=Swipe to Confirm}</action>
					<action function="page">confirm_action</action>
				</actions>
			</button>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">advanced</action>
			</action>
		</page>

		<page name="terminal">
			<template name="body"/>

			<template name="ab"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@term_s_hdr=Terminal}</text>
			</text>

			<terminal>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="%col1_x%" y="%terminal_y%" w="%terminal_width%" h="%terminal_height%"/>
			</terminal>

			<terminal>
				<condition var1="tw_hide_kb" var2="1"/>
				<placement x="%col1_x%" y="%terminal_y%" w="%terminal_width%" h="%terminal_nokb_height%"/>
			</terminal>

			<image>
				<condition var1="tw_hide_kb" var2="0"/>
				<placement x="0" y="%keyboard_bg_terminal_y%"/>
				<image resource="keyboard_shadow"/>
			</image>

			<template name="keyboardterminaltemplate"/>

			<template name="keyboardtemplate"/>

			<fill color="%background%">
				<condition var1="navbar_accent" var2="0"/>
				<placement x="0" y="%row_nav_y%" w="%screen_w%" h="%nav_h%"/>
			</fill>

			<fill color="%accent%">
				<condition var1="navbar_accent" var2="1"/>
				<placement x="0" y="%row_nav_y%" w="%screen_w%" h="%nav_h%"/>
			</fill>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home" highlightresource="home_hl"/>
				<action function="key">home</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home_white" highlightresource="home_white_hl"/>
				<action function="key">home</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="key">back</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="tw_hide_kb" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="keyboard_hide" highlightresource="keyboard_hide_hl"/>
				<action function="set">tw_hide_kb=1</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="tw_hide_kb" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="keyboard_hide_white" highlightresource="keyboard_hide_white_hl"/>
				<action function="set">tw_hide_kb=1</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="tw_hide_kb" var2="1"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="keyboard_show" highlightresource="keyboard_show_hl"/>
				<action function="set">tw_hide_kb=0</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="tw_hide_kb" var2="1"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="keyboard_show_white" highlightresource="keyboard_show_white_hl"/>
				<action function="set">tw_hide_kb=0</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="tw_hide_kb" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="keyboard_hide" highlightresource="keyboard_hide_hl"/>
				<action function="set">tw_hide_kb=1</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="tw_hide_kb" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="keyboard_hide_white" highlightresource="keyboard_hide_white_hl"/>
				<action function="set">tw_hide_kb=1</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="tw_hide_kb" var2="1"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="keyboard_show" highlightresource="keyboard_show_hl"/>
				<action function="set">tw_hide_kb=0</action>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="tw_hide_kb" var2="1"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="keyboard_show_white" highlightresource="keyboard_show_white_hl"/>
				<action function="set">tw_hide_kb=0</action>
			</button>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_hide_kb=0</action>
					<action function="page">main</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_hide_kb=0</action>
					<action function="page">advanced</action>
				</actions>
			</action>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="sideload">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@adb_sideload_hdr=ADB Sideload}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@adb_sideload_opt=Sideload Options}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<text>{@options_cptn=Options}</text>
			</text>

			<checkbox style="checkbox_big">
				<placement x="%col1_x%" y="%row2_3_y%"/>
				<text>{@sideload_wipe_dalvik_chk=Wipe Dalvik Cache}</text>
				<data variable="tw_wipe_dalvik"/>
			</checkbox>

			<checkbox style="checkbox_big">
				<placement x="%col1_x%" y="%row3_1a_y%"/>
				<text>{@sideload_wipe_cache_chk=Wipe Cache}</text>
				<data variable="tw_wipe_cache"/>
			</checkbox>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_sideload=Swipe to start Sideload}</text>
			</text>

			<slider>
				<actions>
					<action function="set">tw_back=advanced</action>
					<action function="set">tw_action=adbsideload</action>
					<action function="set">tw_action_text1={@sideload_confirm=ADB Sideload}</action>
					<action function="set">tw_action_text2={@sideload_usage=Usage: adb sideload filename.zip}</action>
					<action function="set">tw_complete_text1={@sideload_complete=ADB Sideload completed}</action>
					<action function="set">tw_has_cancel=1</action>
					<action function="set">tw_show_reboot=1</action>
					<action function="set">tw_cancel_action=adbsideloadcancel</action>
					<action function="page">action_page</action>
				</actions>
			</slider>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">advanced</action>
			</action>
		</page>

		<page name="fixcontexts">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">advanced</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@confirm_action=Confirm Action}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@fix_contexts_confirm=Fix SELinux contexts?}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_warning"/>
			</image>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@fix_contexts_note1=Note: Fixing contexts is rarely needed.}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>{@fix_contexts_note2=Fixing SELinux contexts may cause}</text>
			</text>

			<text style="text_body2_fail">
				<placement x="%col1_x_indent%" y="%row3_1_y%"/>
				<text>{@fix_contexts_note3=your device to not boot properly.}</text>
			</text>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_fix_contexts=Swipe to fix contexts}</text>
			</text>

			<slider>
				<actions>
					<action function="set">tw_back=advanced</action>
					<action function="set">tw_action=fixcontexts</action>
					<action function="set">tw_action_text1={@fixing_contexts=Fixing Contexts...}</action>
					<action function="set">tw_complete_text1={@fix_contexts_complete=Fix Contexts completed}</action>
					<action function="set">tw_slider_text={@swipe_to_confirm=Swipe to Confirm}</action>
					<action function="set">tw_show_reboot=1</action>
					<action function="page">action_page</action>
				</actions>
			</slider>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">advanced</action>
			</action>
		</page>

		<page name="installsu">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">reboot</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@reboot_hdr=Reboot}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@su_install=Install SuperSU?}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@su_note1=Your device does not appear}</text>
			</text>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>{@su_note2=to be rooted. Install SuperSU now?}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@su_note3=This will root your device.}</text>
			</text>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row6_3_y%" placement="1"/>
				<text>{@su_cancel=DO NOT INSTALL}</text>
				<action function="set">tw_page_done=1</action>
			</button>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_su_to_install=Swipe to Install}</text>
			</text>

			<slider>
				<actions>
					<action function="set">tw_action=installsu</action>
					<action function="set">tw_action_text1={@su_installing=Installing SuperSU}</action>
					<action function="set">tw_action_text2=</action>
					<action function="page">singleaction_page</action>
				</actions>
			</slider>
		</page>

		<page name="installapp">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<actions>
					<action function="set">tw_app_install_status=0</action>
					<action function="page">reboot</action>
				</actions>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@reboot_hdr=Reboot}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@reboot_install_app_hdr=Install official TWRP App?}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@reboot_install_app1=Do you like to install the TWRP App?}</text>
			</text>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>{@reboot_install_app2=It can check for new TWRP versions.}</text>
			</text>

			<listbox style="settingslist">
				<placement x="%col1_x%" y="%row4_1_y%" w="%listbox_w%" h="%listbox_settings_height%"/>
				<listitem name="{@reboot_install_app_prompt_install=Prompt again at next reboot}">
					<data variable="tw_app_prompt"/>
				</listitem>
				<listitem name="{@reboot_install_app_system=Install as a system app}">
					<data variable="tw_app_install_system"/>
				</listitem>
			</listbox>

			<button style="btn_raised_hl">
				<placement x="%btn_raised_right_x%" y="%row6_3_y%" placement="1"/>
				<text>{@su_cancel=DO NOT INSTALL}</text>
				<action function="reboot">%tw_reboot_param%</action>
			</button>

			<text style="caption">
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_install_app=Swipe to install TWRP App}</text>
			</text>

			<slider>
				<actions>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=installapp</action>
					<action function="set">tw_action_text1={@reboot_installing_app=Installing TWRP App...}</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_has_action2=1</action>
					<action function="set">tw_action2=reboot</action>
					<action function="set">tw_action2_param=%tw_reboot_param%</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="page">action_page</action>
				</actions>
			</slider>

			<action>
				<touch key="home"/>
				<actions>
					<action function="set">tw_app_install_status=0</action>
					<action function="page">main</action>
				</actions>
			</action>

			<action>
				<touch key="back"/>
				<actions>
					<action function="set">tw_app_install_status=0</action>
					<action function="page">reboot</action>
				</actions>
			</action>
		</page>

		<page name="lock">
			<background color="%darktransparent%"/>

			<image>
				<image resource="unlock_icon"/>
				<placement x="%center_x%" y="%row4_1_y%" placement="4"/>
			</image>

			<text color="%text_light%">
				<font resource="caption"/>
				<placement x="%center_x%" y="%slider_text_y%" placement="5"/>
				<text>{@swipe_to_unlock=Swipe to Unlock}</text>
			</text>

			<slider>
				<action function="overlay"/>
			</slider>

			<action>
				<touch key="power"/>
				<action function="togglebacklight"/>
			</action>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="about">
			<template name="body"/>

			<template name="ab_ex"/>

			<template name="statusbarinfo"/>

			<button>
				<placement x="%ab_back_x%" y="%ab_y%"/>
				<image resource="actionbar_back" highlightresource="actionbar_back_hl"/>
				<action function="page">main</action>
			</button>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@about_hdr=About}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>TWRP Materialised</text>
			</text>

			<text style="text_ab_subtitle">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>Recovery gone App</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row2_2_y%"/>
				<image resource="icon_person"/>
			</image>

			<text style="caption">
				<placement x="%col1_x_indent%" y="%row2_2_y%"/>
				<text>{@author=Author}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row2_3_y%"/>
				<text>z31s1g</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row3_2_y%"/>
				<image resource="icon_mail"/>
			</image>

			<text style="caption">
				<placement x="%col1_x_indent%" y="%row3_2_y%"/>
				<text>{@contact=Contact}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row3_3_y%"/>
				<text>forum.xda-developers.com</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row4_2_y%"/>
				<image resource="icon_cake"/>
			</image>

			<text style="caption">
				<placement x="%col1_x_indent%" y="%row4_2_y%"/>
				<text>{@credits=Credits}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row4_3_y%"/>
				<text>{@helpful=to all the helpful souls that make the}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row5_1_y%"/>
				<text>{@irc=IRC channel #twrp a fun place to learn}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row5_2a_y%"/>
				<text>{@osm0sis=to &quot;osm0sis&quot; for the FlashIt script}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row6_1_y%"/>
				<text>{@dsm=to &quot;DSM_&quot; for the color changing script}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row6_3_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="caption">
				<placement x="%col1_x_indent%" y="%row6_3_y%"/>
				<text>{@version_twrp=Version}</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row7_1_y%"/>
				<text>TWRP: %tw_version%</text>
			</text>

			<text style="text_body2">
				<placement x="%col1_x_indent%" y="%row7_2a_y%"/>
				<text>{@theme_vers=Theme:} %theme_version%</text>
			</text>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">main</action>
			</action>

			<button>
				<placement x="%btn_float_x%" y="%row7_3a_y%"/>
				<image resource="btn_float_accept"/>
				<highlight color="%highlight_color%"/>
				<action function="page">main</action>
			</button>
		</page>

		<page name="console">
			<background color="%transparent%"/>

			<fill color="%background%">
				<placement x="0" y="%status_h%" w="%screen_w%" h="%screen_h%"/>
			</fill>

			<console>
				<placement x="%col1_x%" y="%ab_bc_y%" w="%console_width%" h="%console_height%"/> 
				<color foreground="%console_foreground%" background="%background%" scroll="%background%"/>
				<font resource="fixed"/>
			</console>

			<fill color="%accent%">
				<condition var1="navbar_accent" var2="1"/>
				<placement x="0" y="%row_nav_y%" w="%screen_w%" h="%nav_h%"/>
			</fill>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home" highlightresource="home_hl"/>
				<action function="overlay"/>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%center_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="home_white" highlightresource="home_white_hl"/>
				<action function="overlay"/>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="overlay"/>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="overlay"/>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back" highlightresource="back_hl"/>
				<action function="overlay"/>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="back_white" highlightresource="back_white_hl"/>
				<action function="overlay"/>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout" highlightresource="slideout_hl"/>
				<action function="overlay"/>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="0"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%slideout_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout_white" highlightresource="slideout_white_hl"/>
				<action function="overlay"/>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="0"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout" highlightresource="slideout_hl"/>
				<action function="overlay"/>
			</button>

			<button>
				<condition var1="tw_busy" var2="0"/>
				<condition var1="navbar_sams" var2="1"/>
				<condition var1="navbar_accent" var2="1"/>
				<placement x="%back_button_x%" y="%row_navbtn_y%" placement="4"/>
				<image resource="slideout_white" highlightresource="slideout_white_hl"/>
				<action function="overlay"/>
			</button>

			<action>
				<touch key="power"/>
				<action function="togglebacklight"/>
			</action>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="menu_sort">
			<background color="%transparent%"/>

			<button>
				<fill color="%transparent%"/>
				<placement x="0" y="0" w="%screen_w%" h="%screen_h%"/>
				<action function="overlay"/>
			</button>

			<image>
				<placement x="%ab_btn1_x%" y="%ab_menu_y%" placement="1"/>
				<image resource="menu_sort"/>
			</image>

			<text style="menu_text_hl">
				<condition var1="tw_gui_sort_order" op="=" var2="1"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_1_text_y%"/>
				<text>{@sort_by_name_asc=Name asc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="=" var2="1"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_1_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=1</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text">
				<condition var1="tw_gui_sort_order" op="!=" var2="1"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_1_text_y%"/>
				<text>{@sort_by_name_asc=Name asc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="!=" var2="1"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_1_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=1</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text_hl">
				<condition var1="tw_gui_sort_order" op="=" var2="-1"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_2_text_y%"/>
				<text>{@sort_by_name_desc=Name desc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="=" var2="-1"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_2_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=-1</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text">
				<condition var1="tw_gui_sort_order" op="!=" var2="-1"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_2_text_y%"/>
				<text>{@sort_by_name_desc=Name desc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="!=" var2="-1"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_2_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=-1</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text_hl">
				<condition var1="tw_gui_sort_order" op="=" var2="2"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_3_text_y%"/>
				<text>{@sort_by_date_asc=Date asc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="=" var2="2"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_3_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=2</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text">
				<condition var1="tw_gui_sort_order" op="!=" var2="2"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_3_text_y%"/>
				<text>{@sort_by_date_asc=Date asc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="!=" var2="2"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_3_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=2</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text_hl">
				<condition var1="tw_gui_sort_order" op="=" var2="-2"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_4_text_y%"/>
				<text>{@sort_by_date_desc=Date desc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="=" var2="-2"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_4_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=-2</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text">
				<condition var1="tw_gui_sort_order" op="!=" var2="-2"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_4_text_y%"/>
				<text>{@sort_by_date_desc=Date desc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="!=" var2="-2"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_4_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=-2</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text_hl">
				<condition var1="tw_gui_sort_order" op="=" var2="3"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_5_text_y%"/>
				<text>{@sort_by_size_asc=Size asc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="=" var2="3"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_5_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=3</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text">
				<condition var1="tw_gui_sort_order" op="!=" var2="3"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_5_text_y%"/>
				<text>{@sort_by_size_asc=Size asc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="!=" var2="3"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_5_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=3</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text_hl">
				<condition var1="tw_gui_sort_order" op="=" var2="-3"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_6_text_y%"/>
				<text>{@sort_by_size_desc=Size desc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="=" var2="-3"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_6_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=-3</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="menu_text">
				<condition var1="tw_gui_sort_order" op="!=" var2="-3"/>
				<placement x="%ab_menu_sort_text_x%" y="%ab_menu_inst_6_text_y%"/>
				<text>{@sort_by_size_desc=Size desc}</text>
			</text>

			<button style="menu_btn">
				<condition var1="tw_gui_sort_order" op="!=" var2="-3"/>
				<placement x="%ab_menu_sort_x%" y="%ab_menu_inst_6_y%" w="%ab_menu_sort_btn_w%" h="%ab_menu_sort_btn_h%"/>
				<actions>
					<action function="set">tw_gui_sort_order=-3</action>
					<action function="overlay"/>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_storage">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<partitionlist style="partitionlist_dialog">
				<placement x="%storage_indent_x%" y="%storage_indent_y%" w="%storage_width%" h="%storage_height%"/>
				<data name="tw_storage_path"/>
				<listtype name="storage"/>
			</partitionlist>

			<button style="btn_dlg">
				<placement x="%db_left_x%" y="%db_y%"/>
				<text>{@cancel_btn=CANCEL}</text>
				<actions>
					<action function="set">tw_operation_state=0</action>
					<action function="set">tw_text1=</action>
					<action function="set">tw_text2=</action>
					<action function="set">tw_text3=</action>
					<action function="set">tw_text4=</action>
					<action function="set">tw_action_text1=</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_action_param=</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action2=</action>
					<action function="set">tw_action2_param=</action>
					<action function="set">tw_has_cancel=0</action>
					<action function="set">tw_cancel_action=</action>
					<action function="set">tw_cancel_param=</action>
					<action function="set">tw_show_exclamation=0</action>
					<action function="set">tw_show_reboot=0</action>
					<action function="set">tw_back=%tw_back_temp%</action>
					<action function="overlay"/>
				</actions>
			</button>

			<button style="btn_dlg_hl">
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">tw_operation_state=0</action>
					<action function="set">tw_text1=</action>
					<action function="set">tw_text2=</action>
					<action function="set">tw_text3=</action>
					<action function="set">tw_text4=</action>
					<action function="set">tw_action_text1=</action>
					<action function="set">tw_action_text2=</action>
					<action function="set">tw_action_param=</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_action2=</action>
					<action function="set">tw_action2_param=</action>
					<action function="set">tw_has_cancel=0</action>
					<action function="set">tw_cancel_action=</action>
					<action function="set">tw_cancel_param=</action>
					<action function="set">tw_show_exclamation=0</action>
					<action function="set">tw_show_reboot=0</action>
					<action function="set">tw_back=%tw_back_temp%</action>
					<action function="overlay"/>
				</actions>
			</button>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@select_storage_hdr=Select Storage}</text>
			</text>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_color">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@dialog_label_color_hdr=Reboot required}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text1_y%"/>
				<text>{@dialog_settheme_note_1=The recovery will now reboot}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text2_y%"/>
				<text>{@dialog_settheme_note_2a=to apply the selected color.}</text>
			</text>

			<checkbox style="checkbox_small">
				<placement x="%storage_indent_x%" y="%db_checkbox_y%"/>
				<text>{@dialog_color_note_1=Don't tell me again}</text>
				<data variable="dialog_hide_color"/>
			</checkbox>

			<button style="btn_dlg">
				<placement x="%db_left_x%" y="%db_y%"/>
				<text>{@cancel_btn=CANCEL}</text>
				<actions>
					<action function="set">tw_accent=</action>
					<action function="set">tw_folder=</action>
					<action function="set">dialog_hide_color=0</action>
					<action function="overlay"/>
					<action function="page">theme_color</action>
				</actions>
			</button>

			<button style="btn_dlg_hl">
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="cmd">
					mkdir "/data/local/twrp";
					unzip -o "%tw_theme_path%/ui.zip" -d "/data/local/twrp";
					chmod 777 "/data/local/twrp/zip";
					cp -r /data/local/twrp/%tw_folder%/* "/data/local/twrp/images";
					mv "/data/local/twrp/ui.xml" "/data/local/twrp/ui_temp.xml";
					sed "s/%accent%/#%tw_accent%/g" "/data/local/twrp/ui_temp.xml" &gt; "/data/local/twrp/ui_temp2.xml";
					rm -f "/data/local/twrp/ui_temp.xml";
					sed "s/%text_actionbar%/#%tw_text_actionbar%/g" "/data/local/twrp/ui_temp2.xml" &gt; "/data/local/twrp/ui_temp3.xml";
					rm -f "/data/local/twrp/ui_temp2.xml";
					sed "s/%accent_name%/%tw_accent_name%/g" "/data/local/twrp/ui_temp3.xml" &gt; "/data/local/twrp/ui.xml";
					rm -f "/data/local/twrp/ui_temp3.xml";
					cd "/data/local/twrp";
					./zip -0 -r "%tw_theme_path%/ui.zip" *;
					chown -R media_rw:media_rw "%tw_theme_path%";
					cd /;
					rm -r "/data/local/twrp";
					</action>
					<action function="set">accent_name=%tw_accent_name%</action>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_reboot_param=recovery</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="overlay"/>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_folder">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@set_bookmark_hdr=Set Bookmark}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text1_y%"/>
				<text>{@dialog_folder_note_1=Do you want to set the current folder}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text2_y%"/>
				<text>{@dialog_folder_note_2=as the default folder for this list?}</text>
			</text>

			<checkbox style="checkbox_small">
				<placement x="%storage_indent_x%" y="%db_checkbox_y%"/>
				<text>{@hide_folder=Don't ask me again}</text>
				<data variable="dialog_hide_folder"/>
			</checkbox>

			<button style="btn_dlg">
				<placement x="%db_left_x%" y="%db_y%"/>
				<text>{@cancel_btn=CANCEL}</text>
				<actions>
					<action function="set">dialog_hide_folder=0</action>
					<action function="set">dialog_context=none</action>
					<action function="overlay"/>
				</actions>
			</button>

			<button style="btn_dlg_hl">
				<condition var1="dialog_context" var2="loc_install"/>
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">location_install=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_install%</action>
					<action function="set">dialog_context=none</action>
					<action function="overlay"/>
				</actions>
			</button>

			<button style="btn_dlg_hl">
				<condition var1="dialog_context" var2="loc_addfile"/>
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">location_addfile=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_addfile%</action>
					<action function="set">dialog_context=none</action>
					<action function="overlay"/>
				</actions>
			</button>

			<button style="btn_dlg_hl">
				<condition var1="dialog_context" var2="loc_theme"/>
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">location_themes=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_themes%</action>
					<action function="set">dialog_context=none</action>
					<action function="overlay"/>
				</actions>
			</button>

			<button style="btn_dlg_hl">
				<condition var1="dialog_context" var2="loc_image"/>
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">location_install_image=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_install_image%</action>
					<action function="set">dialog_context=none</action>
					<action function="overlay"/>
				</actions>
			</button>

			<button style="btn_dlg_hl">
				<condition var1="dialog_context" var2="loc_splash_image"/>
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">location_install_splash_image=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_install_splash_image%</action>
					<action function="set">dialog_context=none</action>
					<action function="overlay"/>
				</actions>
			</button>

			<button style="btn_dlg_hl">
				<condition var1="dialog_context" var2="loc_splash_png"/>
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">location_install_splash_png=%tw_zip_location%</action>
					<action function="set">tw_zip_location=%location_install_splash_png%</action>
					<action function="set">dialog_context=none</action>
					<action function="overlay"/>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_settheme">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@dialog_settheme_hdr=Change Theme}</text>
			</text>

			<text style="text_body2_hl">
				<placement x="%storage_indent_x%" y="%db_text1_y%"/>
				<text>%tw_file%</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text2a_y%"/>
				<text>{@dialog_settheme_note_1=The recovery will now reboot}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text3a_y%"/>
				<text>{@dialog_settheme_note_2=to apply the selected theme.}</text>
			</text>

			<button style="btn_dlg">
				<placement x="%db_left_x%" y="%db_y%"/>
				<text>{@cancel_btn=CANCEL}</text>
				<action function="overlay"/>
			</button>

			<button style="btn_dlg_hl">
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="cmd">
					cp "%tw_filename%" %tw_theme_path%/ui.zip;
					chown -R media_rw:media_rw %tw_theme_path%
					</action>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_reboot_param=recovery</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_offset">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@tz_offset_hdr=Time Offset}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text1_y%"/>
				<text>{@dialog_offset_note=Select your offset value}</text>
			</text>

			<button>
				<condition var1="tw_time_zone_guioffset" var2="0"/>
				<placement x="%storage_indent_x%" y="%db_text2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>0        </text>
				<image resource="radio_true_d"/>
				<action function="set">tw_time_zone_guioffset=0</action>
			</button>

			<button>
				<condition var1="tw_time_zone_guioffset" op="!=" var2="0"/>
				<placement x="%storage_indent_x%" y="%db_text2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>0        </text>
				<image resource="radio_false_d"/>
				<action function="set">tw_time_zone_guioffset=0</action>
			</button>

			<button>
				<condition var1="tw_time_zone_guioffset" var2="15"/>
				<placement x="%storage_indent_x%" y="%db_text3a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>15      </text>
				<image resource="radio_true_d"/>
				<action function="set">tw_time_zone_guioffset=15</action>
			</button>

			<button>
				<condition var1="tw_time_zone_guioffset" op="!=" var2="15"/>
				<placement x="%storage_indent_x%" y="%db_text3a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>15      </text>
				<image resource="radio_false_d"/>
				<action function="set">tw_time_zone_guioffset=15</action>
			</button>

			<button>
				<condition var1="tw_time_zone_guioffset" var2="30"/>
				<placement x="%center_x%" y="%db_text2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>30       </text>
				<image resource="radio_true_d"/>
				<action function="set">tw_time_zone_guioffset=30</action>
			</button>

			<button>
				<condition var1="tw_time_zone_guioffset" op="!=" var2="30"/>
				<placement x="%center_x%" y="%db_text2_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>30       </text>
				<image resource="radio_false_d"/>
				<action function="set">tw_time_zone_guioffset=30</action>
			</button>

			<button>
				<condition var1="tw_time_zone_guioffset" var2="45"/>
				<placement x="%center_x%" y="%db_text3a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>45      </text>
				<image resource="radio_true_d"/>
				<action function="set">tw_time_zone_guioffset=45</action>
			</button>

			<button>
				<condition var1="tw_time_zone_guioffset" op="!=" var2="45"/>
				<placement x="%center_x%" y="%db_text3a_y%" textplacement="6"/>
				<font resource="body1" color="%text%"/>
				<text>45      </text>
				<image resource="radio_false_d"/>
				<action function="set">tw_time_zone_guioffset=45</action>
			</button>

			<button style="btn_dlg_hl">
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="setguitimezone"/>
					<action function="overlay"/>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_reset">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@dialog_reset_theme_hdr=Default Settings}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text1_y%"/>
				<text>{@dialog_reset_note_1=Do you want to restore the}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text2_y%"/>
				<text>{@dialog_reset_note_2=default settings for TWRP recovery}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text3_y%"/>
				<text>{@dialog_reset_note_3=and Materialised theme?}</text>
			</text>

			<button style="btn_dlg">
				<placement x="%db_left_x%" y="%db_y%"/>
				<text>{@cancel_btn=CANCEL}</text>
				<action function="overlay"/>
			</button>

			<button style="btn_dlg_hl">
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">tw_hide_kb=0</action>
					<action function="set">use_flashit=0</action>
					<action function="set">inject_theme=0</action>
					<action function="set">auto_flash_repack=0</action>
					<action function="set">aromafm=0</action>
					<action function="set">auto_generate=0</action>
					<action function="set">show_cpu_temp=0</action>
					<action function="set">center_clock=0</action>
					<action function="set">dialog_hide_folder=0</action>
					<action function="set">dialog_hide_color=0</action>
					<action function="set">dialog_context=none</action>
					<action function="set">list_font=small</action>
					<action function="set">bookmark=0</action>
					<action function="set">navbar_sams=0</action>
					<action function="set">menu_btn_solid=0</action>
					<action function="set">tw_theme_path=/data/media/0/TWRP/theme</action>
					<action function="set">location_install=/sdcard/Download</action>
					<action function="set">location_install_image=/sdcard/Download</action>
					<action function="set">location_addfile=/sdcard/Download</action>
					<action function="set">location_themes=/sdcard/Download</action>
					<action function="set">location_install_splash_image=/sdcard/Download</action>
					<action function="set">location_install_splash_png=/sdcard/Download</action>
					<action function="restoredefaultsettings"/>
					<action function="overlay"/>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_reset_theme">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@dialog_reset_theme_hdr=Default Settings}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text1_y%"/>
				<text>{@dialog_reset_theme_note_1=Do you want to restore the default}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text2_y%"/>
				<text>{@dialog_reset_theme_note_2=settings for the Materialised theme?}</text>
			</text>

			<button style="btn_dlg">
				<placement x="%db_left_x%" y="%db_y%"/>
				<text>{@cancel_btn=CANCEL}</text>
				<action function="overlay"/>
			</button>

			<button style="btn_dlg_hl">
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">tw_hide_kb=0</action>
					<action function="set">use_flashit=0</action>
					<action function="set">inject_theme=0</action>
					<action function="set">auto_flash_repack=0</action>
					<action function="set">aromafm=0</action>
					<action function="set">auto_generate=0</action>
					<action function="set">show_cpu_temp=0</action>
					<action function="set">center_clock=0</action>
					<action function="set">dialog_hide_folder=0</action>
					<action function="set">dialog_hide_color=0</action>
					<action function="set">dialog_context=none</action>
					<action function="set">list_font=small</action>
					<action function="set">bookmark=0</action>
					<action function="set">navbar_sams=0</action>
					<action function="set">menu_btn_solid=0</action>
					<action function="set">tw_theme_path=/data/media/0/TWRP/theme</action>
					<action function="set">location_install=/sdcard/Download</action>
					<action function="set">location_install_image=/sdcard/Download</action>
					<action function="set">location_addfile=/sdcard/Download</action>
					<action function="set">location_themes=/sdcard/Download</action>
					<action function="set">location_install_splash_image=/sdcard/Download</action>
					<action function="set">location_install_splash_png=/sdcard/Download</action>
					<action function="overlay"/>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_remove_theme">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@dialog_remove_theme_hdr=Remove Theme}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text1_y%"/>
				<text>{@dialog_remove_theme_1=Do you want to remove the theme?}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text2a_y%"/>
				<text>{@dialog_remove_theme_2=If you've found a bug, please visit}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text3a_y%"/>
				<text>{@dialog_remove_theme_3=the XDA forum and report it.}</text>
			</text>

			<button style="btn_dlg">
				<placement x="%db_left_x%" y="%db_y%"/>
				<text>{@cancel_btn=CANCEL}</text>
				<action function="overlay"/>
			</button>

			<button style="btn_dlg_hl">
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="cmd">
					rm -f "%tw_theme_path%/ui.zip";
					</action>
					<action function="overlay"/>
					<action function="set">tw_back=reboot</action>
					<action function="set">tw_action=reboot</action>
					<action function="set">tw_reboot_param=recovery</action>
					<action function="set">tw_has_action2=0</action>
					<action function="set">tw_text1={@no_os1=No OS Installed!}</action>
					<action function="set">tw_text2={@no_osrb=Are you sure you wish to reboot?}</action>
					<action function="set">tw_action_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_complete_text1={@rebooting=Rebooting...}</action>
					<action function="set">tw_slider_text={@swipe_reboot=Swipe to Reboot}</action>
					<action function="page">rebootcheck</action>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_warning">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@dialog_warning_hdr=Warning!}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text1_y%"/>
				<text>{@dialog_warning_1=The size of the resulting image file}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text2_y%"/>
				<text>{@dialog_warning_2=might exceed the actual size of the}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text3_y%"/>
				<text>{@dialog_warning_3=recovery partition. In this case,}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_checkbox_y%"/>
				<text>{@dialog_warning_4=flashing the image will fail.}</text>
			</text>

			<button style="btn_dlg">
				<placement x="%db_left_x%" y="%db_y%"/>
				<text>{@cancel_btn=CANCEL}</text>
				<actions>
					<action function="overlay"/>
					<action function="page">%tw_back%</action>
				</actions>
			</button>

			<button style="btn_dlg_hl">
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="set">inject_theme=1</action>
					<action function="overlay"/>
					<action function="page">%tw_back%</action>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>

		<page name="dialog_aik_missing">
			<background color="%transparent%"/>

			<image>
				<placement x="%bg_storage_x%" y="%bg_storage_y%"/>
				<image resource="dialog_bg"/>
			</image>

			<text style="text_dlg_title">
				<placement x="%bg_storage_hdr_x%" y="%bg_storage_hdr_y%"/>
				<text>{@dialog_aikmissing_hdr=AIK required}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text1_y%"/>
				<text>{@dialog_aikmissing_1=Android Image Kitchen is missing!}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text2_y%"/>
				<text>{@dialog_aikmissing_2=Download and flash the}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_text3_y%"/>
				<text>{@dialog_aikmissing_3=AIK-mobile installer from XDA}</text>
			</text>

			<text style="text_body2">
				<placement x="%storage_indent_x%" y="%db_checkbox_y%"/>
				<text>{@dialog_aikmissing_4=to use this function.}</text>
			</text>

			<button style="btn_dlg_hl">
				<placement x="%db_right_x%" y="%db_y%"/>
				<text>{@ok_btn=OK}</text>
				<actions>
					<action function="overlay"/>
					<action function="page">%tw_back%</action>
				</actions>
			</button>

			<action>
				<touch key="power+voldown"/>
				<action function="screenshot"/>
			</action>
		</page>
	</pages>
</recovery>
